var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,s){function a(e){try{h(o.next(e))}catch(t){s(t)}}function r(e){try{h(o["throw"](e))}catch(t){s(t)}}function h(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(a,r)}h((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return o([e,t])}}function o(i){if(n)throw new TypeError("Generator is already executing.");for(;h;)try{if(n=1,s&&(a=s[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=t.call(e,h)}catch(o){i=[6,o],s=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var n,s,a,r,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},BaseFixedWidthView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.width=PopUpManager.STAGE_WIDTH,this.height=PopUpManager.STAGE_HEIGHT,DisplayUtil.log(this.width+"_____"+this.height+"_____"+this.name)},t}(eui.Component);__reflect(BaseFixedWidthView.prototype,"BaseFixedWidthView");var BaseView=function(e){function t(t){var i=e.call(this)||this;return i.skinLoaded=!1,DisplayUtil.log("start skin setSkinName:"+t),t&&(i.once(eui.UIEvent.COMPLETE,i.skinCompleteHandler,i),i.skinName=t),i}return __extends(t,e),t.prototype.setSkinName=function(e){DisplayUtil.log("set skin setSkinName:"+e),e&&(this.once(eui.UIEvent.COMPLETE,this.skinCompleteHandler,this),this.skinName=e)},t.prototype.skinCompleteHandler=function(e){this.skinLoaded=!0,this.afterSkin()},t.prototype.afterSkin=function(){},t.prototype.getMediator=function(e){return MainFacade.getInstance().retrieveMediator(e)},t}(BaseFixedWidthView);__reflect(BaseView.prototype,"BaseView");var BaseWindow=function(e){function t(t){var i=e.call(this)||this;return i.skinLoaded=!1,t&&(i.once(eui.UIEvent.COMPLETE,i.skinCompleteHandler,i),i.skinName=t),i}return __extends(t,e),t.prototype.setSkinName=function(e){DisplayUtil.log("set skin setSkinName:"+e),e&&(this.once(eui.UIEvent.COMPLETE,this.skinCompleteHandler,this),this.skinName=e)},t.prototype.skinCompleteHandler=function(e){this.skinLoaded=!0,this.afterSkin()},t.prototype.afterSkin=function(){},t}(eui.Component);__reflect(BaseWindow.prototype,"BaseWindow");var BaseMediator=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype.onRegister=function(){this.viewComponent.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.dispose,this),this.game=this.facade.retrieveProxy(GameProxy.NAME),this.user=this.facade.retrieveProxy(UserProxy.NAME),this.config=this.facade.retrieveProxy(ConfigProxy.NAME)},t.prototype.onRemove=function(){this.viewComponent.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.dispose,this)},t.prototype.dispose=function(e){this.facade.removeMediator(this.mediatorName)},t.prototype.listNotificationInterests=function(){return[]},t.prototype.handleNotification=function(e){},t}(puremvc.Mediator);__reflect(BaseMediator.prototype,"BaseMediator");var WXPlatform=function(){function e(){this.NEW_SHARE_QQ_VERSION="7.6.5",this.IS_NEW_SHARE_INTERFACE=!0,this.mIsHide=!1}return e.prototype.reportGameResult=function(e){},e.prototype.fetchOpenKey=function(e){},e.prototype.skipGame=function(e,t){},e.prototype.shareComplete=function(e,t,i,o){},e.prototype.onClose=function(){for(var e=0,t=this.mListeners;e<t.length;e++){var i=t[e];null!=i.onClose&&i.onClose()}},e.prototype.onEnterForeground=function(){for(var e=0,t=this.mListeners;e<t.length;e++){var i=t[e];null!=i.onEnterForeground&&i.onEnterForeground()}},e.prototype.startGame=function(){this.mStartTime=(new Date).getTime()},e.prototype.pauseGame=function(){this.mIsHide||(this.mIsHide=!0)},e.prototype.onMaximize=function(){for(var e=0,t=this.mListeners;e<t.length;e++){var i=t[e];null!=i.onMaximize&&i.onMaximize()}},e.prototype.onMinimize=function(){for(var e=0,t=this.mListeners;e<t.length;e++){var i=t[e];null!=i.onMinimize&&i.onMinimize()}},e.prototype.onEnterBackground=function(){for(var e=0,t=this.mListeners;e<t.length;e++){var i=t[e];null!=i.onEnterBackground&&i.onEnterBackground()}},e.prototype.continueGame=function(){this.mIsHide&&(this.mIsHide=!1)},e.prototype.getUserInfo=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,null]})})},e.prototype.getLaunchOptionsSync=function(){},e.prototype.onShow=function(e){},e.prototype.onHide=function(e){},e.prototype.previewImage=function(e){},e.prototype.postMessage=function(e){},e.prototype.requestSubscribeSystemMessage=function(e){},e.prototype.requestSubscribeMessage=function(e){},e.prototype.initMTA=function(){},e.prototype.sendEvent=function(e,t){},e.prototype.setStorageSync=function(e,t){},e.prototype.getStorageSync=function(e){return null},e.prototype.shareAppMessage=function(e){},e.prototype.getSystemInfoSync=function(){},e.prototype.saveGameData=function(e,t,i){void 0===i&&(i=!1),ToolUtil.local_storage[e]=t},e.prototype.loadGameData=function(e,t){},e.prototype.setUserCloudStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getUserCloudStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getFriendCloudStorage=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{}]})})},e.prototype.createInnerAudioContext=function(){return{}},e.prototype.showShareMenu=function(e){},e.prototype.showToast=function(e){},e.prototype.hideToast=function(e){},e.prototype.onShareAppMessage=function(e,t){},e.prototype.parseEntry=function(e,t,i,o){},e.prototype.getShareInfo=function(e){},e.prototype.md6=function(e){return""},e.prototype.gc=function(){},e.prototype.onMemoryWarning=function(e){},e.prototype.showModal=function(e){},e.prototype.openMiniPrograme=function(e,t){window.wx&&window.wx.navigateToMiniProgram&&window.wx.navigateToMiniProgram({appId:e,path:t,extraData:{foo:"bar"},envVersion:"release",success:function(e){console.log("success",e)},fail:function(e){console.log("fail",e)},complete:function(e){console.log("rescomplete",e)}})},e.prototype.showPreviewImage=function(e){window.wx&&window.wx.previewImage({current:e,urls:[e]})},e.prototype.clearStorage=function(){},e.prototype.vibrateShort=function(e){},e.prototype.loadFont=function(e){},e.prototype.createRewardedVideoAd=function(e){},e.prototype.createBannerAd=function(e){},e.prototype.createGameClubButton=function(e){},e.prototype.createUserInfoButton=function(e){},e.prototype.getUpdateManager=function(){},e.prototype.onLoad=function(){},e.prototype.getUserName=function(){},e.prototype.getUserIcon=function(){},e.prototype.getSetting=function(e){},e.prototype.authorize=function(e){},e.prototype.setInnerAudioOption=function(e){},e.prototype.loadSubpackage=function(e){},e.prototype.authorizeOpenID=function(e){NativeManager.authorizeOpenID(e)},e.prototype.tatrack=function(e,t){var i=e+"-"+JSON.stringify(t);NativeManager.track(i)},e.prototype.userSet=function(e){NativeManager.userSet(JSON.stringify(e))},e.prototype.userAdd=function(e){NativeManager.userAdd(JSON.stringify(e))},e.prototype.initTrack=function(){NativeManager.initTA()},e.prototype.talogin=function(e){NativeManager.login(e)},e.prototype.onShareMessageToFriend=function(e){},e}();__reflect(WXPlatform.prototype,"WXPlatform",["Platform"]),window.platform||(window.platform=new WXPlatform);var BaseCommand=function(e){function t(){var t=e.call(this)||this;return t.game=t.facade.retrieveProxy(GameProxy.NAME),t.user=t.facade.retrieveProxy(UserProxy.NAME),t.config=t.facade.retrieveProxy(ConfigProxy.NAME),t}return __extends(t,e),t}(puremvc.SimpleCommand);__reflect(BaseCommand.prototype,"BaseCommand");var BasePopupWindow=function(e){function t(t){var i=e.call(this,t)||this;return i.isSolo=!1,i.width=PopUpManager.STAGE_WIDTH,i.height=PopUpManager.STAGE_HEIGHT,i.init(),i}return __extends(t,e),t.prototype.init=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onCreateHandler,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDestoryHandler,this)},t.prototype.onCreateHandler=function(e){this.onCreate()},t.prototype.onDestoryHandler=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onCreateHandler,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDestoryHandler,this),this.tempCloseBtn&&this.tempCloseBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeWin,this),this.onDestory()},t.prototype.onCreate=function(){},t.prototype.onDestory=function(){},t.prototype.setClose=function(e){this.tempCloseBtn=e,e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeWin,this)},t.prototype.closeWin=function(e){e.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeWin,this),PopUpManager.hideWindow(this)},t}(BaseWindow);__reflect(BasePopupWindow.prototype,"BasePopupWindow");var GameBase=function(e){function t(t,i){var o=e.call(this,t,i)||this;return o.speed=.0825,o.step=0,o.sheetGroup=[],o.buglevelFail={0:[1,null,null],5:[1,null,3],6:[null,2,3],7:[null,null,3],8:[null,null,3],9:[null,2,null]},o.buglevelWin={4:[null,null,3],7:[null,null,3]},o}return __extends(t,e),t.prototype.loadSub=function(e){var t="scene"+e;console.log("load group:",t);var t=(Math.random(),"scene"+e);this.loadSubSuccess(t)},t.prototype.loadSubSuccess=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,RES.loadGroup(e)];case 1:return t.sent(),this.initTopview(),this.loadSubOK(),[2]}})})},t.prototype.loadSubOK=function(){},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case NotificationNames.CHOSEEVENT:if("baobao"==this.role.dragonName||2==this.step&&(14==this.user.level||14==this.game.templevel))this.eventResult(t);else{this.hideAllTalk(),SoundManager.getInstance().playNewEffect(SoundManager.DING);var i=this.viewComponent.rolebox.parent.localToGlobal(this.viewComponent.rolebox.x,this.viewComponent.rolebox.y);this.dengpao.x=i.x,"bb"==this.role.dragonName?(this.role.play("3",0),this.dengpao.y=i.y-this.roleheight*this.role.scaleY*.9):(this.role.play("1",0),this.dengpao.y=i.y-this.roleheight*this.role.scaleY),this.dengpao.visible=!0,this.AnimationEndByTimes(this.dengpao,"1",1,function(){this.dengpao.visible=!1,this.eventResult(t)})}break;case NotificationNames.CLOSE_MAINGAME:this.closeMyself();break;case NotificationNames.REVIVE:1==this.step?(this.game.templevel>=0?AldUtil.aldRunRevive(this.game.templevel,this.step):AldUtil.aldRunRevive(this.user.level,this.step),this.reviveStepTwo()):2==this.step&&(this.game.templevel>=0?AldUtil.aldRunRevive(this.game.templevel,this.step):AldUtil.aldRunRevive(this.user.level,this.step),this.reviveStepThree());break;case NotificationNames.CLICKMEGIC:"bb"==this.role.dragonName?this.AnimationEndByTimes(this.role,"mofa",1,function(){this.sendNotification(NotificationNames.MEGICCOMPLETE),this.AnimationEndByTimes(this.role,"mofa2",1,function(){this.role.play("3",0)})}):this.sendNotification(NotificationNames.MEGICCOMPLETE)}},t.prototype.listNotificationInterests=function(){return[NotificationNames.CHOSEEVENT,NotificationNames.CLOSE_MAINGAME,NotificationNames.REVIVE,NotificationNames.CLICKMEGIC]},t.prototype.AnimationEndByTimes=function(e,t,i,o,n,s){n||(n=this);var a=function(){o.call(n,s),e.armuture.removeEventListener(dragonBones.EventObject.COMPLETE,a,n)};e.armuture.addEventListener(dragonBones.EventObject.COMPLETE,a,this),e.play(t,i)},t.prototype.AnimationEndByLoop=function(e,t,i,o,n){n||(n=this),e.play(t,0),egret.setTimeout(o,n,i)},t.prototype.initTopview=function(){var e=new GameTopView;this.topViewMediator=new GameTopViewMediator(e),this.facade.registerMediator(this.topViewMediator),this.viewComponent.addChild(e);var t=MainFacade.getInstance().retrieveProxy(GameProxy.NAME);t.createBanner({width:.8})},t.prototype.initRole=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.role=new DragonBase,[4,this.role.initDragon(e)];case 1:return t.sent(),this.viewComponent.rolebox.addChildAt(this.role,0),this.dengpao=new DragonBase,[4,this.dengpao.initDragon("dengpao")];case 2:return t.sent(),this.viewComponent.addChild(this.dengpao),this.imageTalk=new TalkImage,this.imageTalk.alpha=0,this.viewComponent.addChild(this.imageTalk),this.initRoleComplete(),"bb"==this.role.dragonName?this.roleheight=400:"baobao"==this.role.dragonName?this.roleheight=180:this.roleheight=200,[2]}})})},t.prototype.hideAllTalk=function(){for(var e=0;10>e;e++)this.viewComponent["talk"+e]&&this.hideTalk(this.viewComponent["talk"+e])},t.prototype.disappear=function(e,t){var i=200;t&&(i=t),egret.Tween.get(e).to({alpha:0},i)},t.prototype.initRoleComplete=function(){},t.prototype.eventResult=function(e){},t.prototype.showTalk=function(e,t,i,o,n,s){var a=0;s||(s=this),e.context.text=t,i?(a=i,egret.setTimeout(function(){e.visible=!0,e.alpha=1,e.showAni.play(0)},this,i)):(e.alpha=1,e.visible=!0,e.showAni.play(0)),o&&egret.setTimeout(function(){this.hideTalk(e),n&&n.call(s)},this,a+o)},t.prototype.hideTalk=function(e){this.disappear(e,200)},t.prototype.closeMyself=function(){PopUpManager.hide(this.viewComponent);var e=MainFacade.getInstance().retrieveProxy(GameProxy.NAME);e.hideBanner()},t.prototype.showImageTalk=function(e,t){var i=this.user.level;if(this.game.templevel&&(i=this.game.templevel),!(i>=10)){var o=["mainUI_json.shengqi","mainUI_json.ku"];if(e){if(this.buglevelWin[i]&&this.buglevelWin[i][this.step])return;this.imageTalk.main.source="mainUI_json.bang"}else{if(this.buglevelFail[i]&&this.buglevelFail[i][this.step])return;this.imageTalk.main.source=o[~~(Math.random()*o.length)]}var n=this.viewComponent.rolebox.parent.localToGlobal(this.viewComponent.rolebox.x,this.viewComponent.rolebox.y);this.imageTalk.x=n.x,"baobao"==this.role.dragonName?this.imageTalk.y=n.y-this.roleheight*this.role.scaleY-this.imageTalk.height-10:this.imageTalk.y=this.dengpao.y-this.imageTalk.height-10,console.log("大拇指的y:"+this.imageTalk.y+"----"+this.viewComponent.rolebox.parent.y+"----"+this.viewComponent.rolebox.parent.parent.y),this.imageTalk.alpha=1,this.imageTalk.showAni.play(0),egret.setTimeout(function(){this&&this.imageTalk&&this.disappear(this.imageTalk,200)},this,1500)}},t.prototype.WinCompleted=function(e){var t=1500;e&&(t=e),egret.setTimeout(function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_WINVIEW,data:this.role.dragonName})},this,t)},t.prototype.FailCompleted=function(e){this.showImageTalk(!1);var t=1500;e&&(t=e),egret.setTimeout(function(){this.sendNotification(NotificationNames.SELECT_RESULT,!1),egret.setTimeout(function(){0==this.step?this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_FAILVIEW,data:{dragonName:this.role.dragonName}}):this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_REVIVE,data:{dragonName:this.role.dragonName,step:this.step}})},this,t)},this,1e3)},t.prototype.nextStep=function(){this.showImageTalk(!0),this.topViewMediator.view["step_"+this.step]&&(this.sendNotification(NotificationNames.SELECT_RESULT,!0),this.topViewMediator.view["step_"+this.step].visible=!0),this.game.templevel>0?AldUtil.aldEnd(this.game.templevel,this.step,!0):AldUtil.aldEnd(this.user.level,this.step,!0),this.step++,this.game.templevel>0?AldUtil.aldStart(this.game.templevel,this.step):AldUtil.aldStart(this.user.level,this.step)},t.prototype.initTipsMask=function(e,t,i,o){if(!this.ShapeMask){if(this.point=new egret.Point,this.ShapeMask=new egret.Sprite,o){var n=this.viewComponent.getChildIndex(this.topViewMediator.view);this.viewComponent.addChildAt(this.ShapeMask,n)}else this.viewComponent.addChild(this.ShapeMask);this.dp=new egret.Sprite;var s=250;i&&(s=i),this.dp.anchorOffsetX=0,this.dp.anchorOffsetY=0,this.dp.graphics.beginFill(16711680),this.dp.graphics.drawCircle(e,t,s),this.dp.graphics.endFill(),this.dp.blendMode=egret.BlendMode.ERASE;var a=new egret.Shape;a.graphics.beginFill(0,.7),a.graphics.drawRect(0,0,PopUpManager.STAGE_WIDTH,PopUpManager.STAGE_HEIGHT),a.graphics.endFill(),this.container=new egret.DisplayObjectContainer,this.container.addChild(a),this.container.addChild(this.dp),this.renderTexture=new egret.RenderTexture,this.renderTexture.drawToTexture(this.container),this.bitmap=new egret.Bitmap(this.renderTexture),this.ShapeMask.addChild(this.bitmap),console.log("")}},t.prototype.drawReverse=function(e,t,i,o){this.initTipsMask(e,t,i,o),this.dp.scaleX=this.dp.scaleY=1,this.renderTexture.drawToTexture(this.container),this.bitmap=new egret.Bitmap(this.renderTexture)},t.prototype.clearMask=function(){egret.Tween.get(this.ShapeMask).to({alpha:0},300).call(function(){this.ShapeMask.removeChildren(),this.ShapeMask=null,this.container=null,this.dp.graphics.clear(),this.dp=null,this.renderTexture.dispose(),this.renderTexture=null,this.bitmap.texture.dispose(),this.bitmap=null,this.point=null},this)},t.prototype.clearSheetClip=function(e){for(var t in this.sheetGroup)this.sheetGroup[t]&&(this.sheetGroup[t].stop(),this.sheetGroup[t].dispose());e||(this.sheetGroup=null)},t.prototype.reviveStepTwo=function(){console.error("reviveStepTwo 方法 子类必须强制重写")},t.prototype.reviveStepThree=function(){console.error("reviveStepThree 方法 子类必须强制重写")},t}(BaseMediator);__reflect(GameBase.prototype,"GameBase");var TalkImage=function(e){function t(){var t=e.call(this)||this;return t.skinName="TalkImageSkin",t}return __extends(t,e),t}(eui.Component);__reflect(TalkImage.prototype,"TalkImage");var GameMap=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t.prototype.createMap=function(e){var t=MainFacade.getInstance().retrieveProxy(ConfigProxy.NAME),i=t.MapConfig[e];this.creatChildrend(this,i)},t.prototype.creatChildrend=function(e,t){for(var i in t)if(Number(i)>=0){var o=t[i],n=this.createObjByType(e,o);this.creatChildrend(n,o)}},t.prototype.copyData=function(e){var t={};for(var i in e)t[i]=e[i];return t},t.prototype.createObjByType=function(e,t){var i;if("Group"==t.type)i=new eui.Group;else if("Image"==t.type){if(i=new eui.Image,t.scale9Grid){var o=t.scale9Grid.split(",");i.scale9Grid=new egret.Rectangle(Number(o[0]),Number(o[1]),Number(o[2]),Number(o[3]))}i.source=t.source,i.height=RES.getRes(t.source).textureHeight,i.width=RES.getRes(t.source).textureWidth}else"Component"==t.type&&(i=new eui.Component,i.skinName=t.skinName);return t.x&&(i.x=t.x),t.y&&(i.y=t.y),t.width&&(i.width=t.width),t.height&&(i.height=t.height),t.anchorOffsetX&&(i.height=t.height),t.anchorOffsetY&&(i.anchorOffsetY=t.anchorOffsetY),t.scaleX&&1!=t.scaleX&&(i.scaleX=t.scaleX),t.scaleY&&1!=t.scaleY&&(i.scaleY=t.scaleY),t.name&&(i.name=t.name,this[t.name]=i),t.anchorOffsetX&&(i.height=t.height),t.anchorOffsetX&&(i.height=t.height),t.anchorOffsetX&&(i.height=t.height),0==t.visible&&(i.visible=!1),(t.verticalCenter||0==t.verticalCenter)&&(i.verticalCenter=t.verticalCenter),e.addChild(i),i},t}(BaseView);__reflect(GameMap.prototype,"GameMap");var GrowView=function(e){function t(){return e.call(this,"GrowSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(GrowView.prototype,"GrowView");var OpenSingleWindowCommand=function(e){function t(){var t=e.call(this)||this;return t.user=t.facade.retrieveProxy(UserProxy.NAME),t.game=t.facade.retrieveProxy(GameProxy.NAME),t}return __extends(t,e),t.prototype.execute=function(e){console.log("open:",e.getBody());var t,i,o,n=e.getBody(),s=!0;switch(n.name){case WindowName.OPEN_HOME:t=GameHome,i=GameHomeMediator;break;case WindowName.OPEN_PREANI:t=BornView,i=BornViewMediator;break;case WindowName.OPEN_MAINGAME:return this.param="GameSkin0000",this.cls=MainFacade.registerLevel["game_"+n.data],this.mediatorcls=MainFacade.registerLevel["gameMediator_"+n.data],this.data=n,void(this.game.templevel>=0?this.loadSub(this.game.templevel):this.loadSub(this.user.level));case WindowName.OPEN_SKIN:t=SkinView,i=SkinViewMediator;break;case WindowName.OPEN_SETUP:t=SetUpView,i=SetUpViewMediator;break;case WindowName.OPEN_WINVIEW:t=WinView,i=WinViewMediator;break;case WindowName.OPEN_FAILVIEW:t=FailView,i=FailViewMediator;break;case WindowName.OPEN_PVPROOM:t=PvpRoom,i=PvpRoomMediator;break;case WindowName.OPEN_PVPLOBBY:t=PvpLobby,i=PvpLobbyMediator;break;case WindowName.OPEN_PVPPOP:t=PvpPop,i=PvpPopMediator;break;case WindowName.OPEN_SIGN:t=SignView,i=SignViewMediator;break;case WindowName.OPEN_HELPRANK:t=HelpRankView,i=HelpRankViewMediator;break;case WindowName.OPEN_CHOICE_LEVEL_VIEW:t=TestLevelView,i=TestLevelViewMediator;break;case WindowName.OPEN_FRIEND:t=FriendView,i=FriendViewMediator;break;case WindowName.OPEN_ACHIEVE:t=AchieveView,i=AchieveViewMediator;break;case WindowName.OPEN_ENERGYSHOP:t=EnergyShopView,i=EnergyShopViewMediator;break;case WindowName.OPEN_GROW:t=GrowView,i=GrowViewMediator;break;case WindowName.OPEN_REVIVE:t=ReviveView,i=ReviveViewMediator;break;case WindowName.OPEN_ANNOUNCECMENT:t=AnnouncementView,i=AnnouncementViewMediator;break;case WindowName.OPEN_RANK:t=RankView,i=RankViewMediator;break;case WindowName.UNLOCK_SKIN:t=UnlockSkinView,i=UnlockSkinViewMediator;break;case WindowName.GET_CHIPS:t=GetChipView,i=GetChipViewMediator;break;case WindowName.GET_ACHIEVE:t=GetAchieveView,i=GetAchieveViewMediator;break;case WindowName.OPEN_INVITEVIEW:t=InviteView,i=InviteViewMediator}var a;a=o?new t(o):new t;var r;r=new i(a,n.data),this.facade.registerMediator(r),PopUpManager.show(a,s,void 0!=n.alpha?n.alpha:.8,n.popType?n.popType:POP_TYPE.CENTER_QUICK)},t.prototype.loadSub=function(e){var t="scene"+e;console.log("load group:",t);var t=(Math.random(),"scene"+e),i=this;i.loadSubSuccess(t)},t.prototype.loadSubSuccess=function(e){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(o){switch(o.label){case 0:return console.log("加载资源",e),[4,RES.loadGroup(e)];case 1:return o.sent(),console.log("加载资源成功",e),t=this.param?new this.cls(this.param):new this.cls,i=new this.mediatorcls(t,this.data.data),this.facade.registerMediator(i),PopUpManager.show(t,!0,this.data.alpha?this.data.alpha:.8,this.data.popType?this.data.popType:POP_TYPE.CENTER_QUICK),[2]}})})},t}(puremvc.SimpleCommand);__reflect(OpenSingleWindowCommand.prototype,"OpenSingleWindowCommand");var OpenWindowCommand=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e){var t=e.getBody();t&&t.name?PopUpManager.getOpenWindows()>0?PopUpManager.waiting.push(t):this.sendNotification(NotificationNames.OPEN_SINGLE_WINDOW,t):this.sendNotification(NotificationNames.OPEN_SINGLE_WINDOW,{name:t})},t}(puremvc.SimpleCommand);__reflect(OpenWindowCommand.prototype,"OpenWindowCommand");var SaveDataCommand=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.execute=function(e){ToolUtil.local_storage.from_db=1;var t=this.facade.retrieveProxy(UserProxy.NAME);t.save(),ToolUtil.NEED_SAVE_DATA=!1},t}(BaseCommand);__reflect(SaveDataCommand.prototype,"SaveDataCommand");var StartUpCommand=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.execute=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,o,n,s,a,r,h;return __generator(this,function(l){return t=platform.getSystemInfoSync(),t&&(WxInfo.devWidthParam=t.screenWidth/PopUpManager.STAGE_WIDTH,WxInfo.devHeightParam=t.screenHeight/PopUpManager.STAGE_HEIGHT),ToolUtil.SPEED_SCALE=60/ToolUtil.FRAME_RATE,t&&String(t.system).indexOf("Android")>-1?(ToolUtil.isAndiord=!0,ToolUtil.renderCanvas=!1):ToolUtil.renderCanvas=!1,i=e.getBody(),t&&(o=t.pixelRatio,n=t.screenHeight,s=n/PopUpManager.STAGE_HEIGHT,ToolUtil.px=s),a=this,platform.showShareMenu({withShareTicket:!0}),Main.loadingView&&Main.loadingView.parent&&(Main.loadingView.parent.removeChild(Main.loadingView),Main.loadingView.dispose(),Main.loadingView=null),platform.onMemoryWarning(function(e){platform.gc(),console.warn("onMemoryWarningReceive=======>>>>gcgcgc")}),ToolUtil.mtadot(MTAType.REQLOGIN,1,1,2),r=Math.floor((this.user.serverTime-ToolUtil.loadTime)/1e3),ToolUtil.mtadot(MTAType.DURATION,r,1,1),t&&(h=t.SDKVersion,ToolUtil.compareVersion(h,"2.9.0")>=0&&platform.onShareMessageToFriend(function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){return t=e.success,t?(PopUpManager.toast("分享成功!"),a.sendNotification(NotificationNames.SELECT_SHARE_SUCCESS)):(PopUpManager.toast("分享取消了呢!"),a.sendNotification(NotificationNames.SELECT_SHARE_FAIL)),[2]})})}),ToolUtil.compareVersion(h,"2.0.2")>=0&&platform.onMemoryWarning(function(e){platform.gc(),console.warn("onMemoryWarningReceive=======>>>>gcgcgc")})),this.sendNotification(NotificationNames.START_INIT_UP,i),[2]})})},t.prototype.homead=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,o,n,s,a;return __generator(this,function(r){switch(r.label){case 0:e=this,t=new HttpSender,t.sender.withCredentials=!1,r.label=1;case 1:return r.trys.push([1,3,,4]),(i=platform.getSystemInfoSync())?(o="xiaoyouxi_cfg_json/"+ToolUtil.APPID+"/myadv_ios.json",i.system.match("iOS")||(o="xiaoyouxi_cfg_json/"+ToolUtil.APPID+"/myadv_android.json"),[4,t.send(o+"?v="+Math.random())]):[2];case 2:return n=r.sent(),s=JSON.parse(n),ToolUtil.ads=s,ToolUtil.ad=s,s&&s.shouye,[3,4];case 3:return a=r.sent(),console.log("rrrrrrrrrr:"+a),[3,4];case 4:return[2]}})})},t}(BaseCommand);__reflect(StartUpCommand.prototype,"StartUpCommand");var StartUpCommuCommand=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.loadTheme=function(e){var t=this;return new Promise(function(i,o){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){i()},t)})},t.prototype.execute=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,o,n,s,a,r,h,l,c,u,p,d,g,t;return __generator(this,function(f){switch(f.label){case 0:return t=e.getBody(),i="",o="",n="",s=this.facade.retrieveProxy(UserProxy.NAME),a=this.facade.retrieveProxy(GameProxy.NAME),[4,NativeManager.getDeviceId()];case 1:return f.sent(),console.log("qudao："+i+" ,from_uid: "+o),r=new HttpSender,[4,r.sendData(InterfaceIO.LOGIN,{appId:ToolUtil.APPID,uuid:NativeManager.uuid})];case 2:return h=f.sent(),l=JSON.parse(h),console.log("=================登录结果",JSON.stringify(h)),c=l.user,s.uid=c.id,s.server_time=l.curTime,s.createTime=c.createTime,s.isNew=1==c.isNewUser,s.needDot=s.calDay()<2,s.createTime=Number(c.createTime),s.qudao=c.qudao,s.energy=c.energy,s.diamond=c.diamond,s.gold=c.gold,s.energy_time=1e3*c.energy_time,ToolUtil.videoId=c.videoId,ToolUtil.blast=c.blast,u=String(s.uid),ToolUtil.uid=s.uid+"",ToolUtil.token=c.userToken,ToolUtil.SESSION_KEY=l.session_key,ToolUtil.max_share_count=c.max_share_count?c.max_share_count:3,ToolUtil.max_video_count=c.max_video_count?c.max_video_count:2,ToolUtil.announcement=c.notice?c.notice:"无公告",ToolUtil.noticetime=c.noticetime?c.noticetime:0,a.cd=c.cd?c.cd:0,[4,NativeManager.getPlatform()];case 3:return f.sent(),p=NativeManager.platform,console.log("plat:"+p),platform.talogin(ToolUtil.uid),platform.initTrack(),1==c.isNewUser&&(platform.tatrack("register",{user_id:ToolUtil.uid,account_id:ToolUtil.uid,device_id:ToolUtil.uid,channel:p,server_id:1,vip_level:1,level:1,extend_id:""}),platform.userSet({level:0==s.level?1:s.level,vip_level:0==s.level?1:s.level,device_id:ToolUtil.uid,account_id:ToolUtil.uid,user_id:ToolUtil.uid,channel:p,server_id:1,user_name:"NoBody",register_time:d,power_value:0,extend_id:""})),platform.tatrack("login",{user_id:ToolUtil.uid,account_id:ToolUtil.uid,device_id:ToolUtil.uid,channel:p,server_id:1,extend_id:""}),d=new Date,d.setTime(1e3*s.createTime),g=new Date,platform.userSet({lastlogin_time:g,lastlogin_extend_id:""}),ToolUtil.loadTime=s.serverTime,ToolUtil.mtadot(MTAType.LOADMAIN,1,1,2),t=e.getBody(),this.sendNotification(NotificationNames.START_RESOURCE_UP,t),[2]}})})},t}(puremvc.SimpleCommand);__reflect(StartUpCommuCommand.prototype,"StartUpCommuCommand");var StartUpInitCommand=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.execute=function(e){var t=(this.facade.retrieveProxy(UserProxy.NAME),this.facade.retrieveProxy(GameProxy.NAME),e.getBody()),i=new GameView;t.addChild(i);var o=new GameViewMediator(i);this.facade.registerMediator(o)},t}(BaseCommand);__reflect(StartUpInitCommand.prototype,"StartUpInitCommand");var StartUpLoadResourceCommand=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.execute=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return t=e.getBody(),[4,this.loadResource(t)];case 1:return i.sent(),[4,RES.getResAsync("description_json")];case 2:return i.sent(),this.start(t),[2]}})})},t.prototype.start=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return t=this.facade.retrieveProxy(UserProxy.NAME),[4,t.init()];case 1:return i.sent(),console.log("startstart"),this.container=e,this.loadSub(0),[2]}})})},t.prototype.loadResource=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return console.log("加载素材"),console.log("loadResource start"),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,function(e){},this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,function(e){},this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,function(e){console.log("error"),console.log(e)},this),RES.addEventListener(RES.ResourceEvent.CONFIG_LOAD_ERROR,function(e){console.log("pre loader error"),console.log(e)},this),Main.loadingView.setMax(0,3),[4,RES.loadGroup("preload",0,Main.loadingView)];case 1:return e.sent(),console.log("loadResource second"),[4,RES.loadGroup("main",0,Main.loadingView)];case 2:return e.sent(),console.log("loadResource third"),Main.loadingView.setMax(1,3),[4,RES.loadGroup("Item",0,Main.loadingView)];case 3:return e.sent(),[4,RES.loadGroup("skin",0,Main.loadingView)];case 4:return e.sent(),Main.loadingView.setMax(2,3),RES.loadGroup("window",0,Main.loadingView),[4,this.config.loadJson()];case 5:return e.sent(),[2]}})})},t.prototype.loadTheme=function(e){var t=this;return new Promise(function(i,o){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){i()},t)})},t.prototype.loadSub=function(e){var t="scene"+e;console.log("load group:",t);var t=(Math.random(),"scene"+e),i=this;i.loadSubSuccess(t)},t.prototype.loadSubSuccess=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return console.log("加载资源",e),[4,RES.loadGroup(e)];
case 1:return i.sent(),t=this.facade.retrieveProxy(UserProxy.NAME),t.uid>=0?(console.log("加载资源成功",e),this.sendNotification(NotificationNames.START_UP,this.container)):PopUpManager.toast("网络异常登录失败，请重启游戏"),[2]}})})},t}(BaseCommand);__reflect(StartUpLoadResourceCommand.prototype,"StartUpLoadResourceCommand");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function o(o){t.call(i,o,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?o(n):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,o){function n(e){t.call(o,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(o))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(o,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(o,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var r=e.split("/");r.pop();var h=r.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(o,generateJSON.paths[e])},this):RES.getResByUrl(h,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){t.call(o,generateJSON.paths[e])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(o,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var TrackUtil=function(){function e(){}return e.prototype.authorizeOpenID=function(e){},e.prototype.login=function(e){},e.prototype.track=function(e,t){},e}();__reflect(TrackUtil.prototype,"TrackUtil",["ITrackUtil"]),window.platform||(window.trackUtil=new TrackUtil);var achievementCFG=function(){function e(e){for(var t in e)this[t]=e[t]}return e}();__reflect(achievementCFG.prototype,"achievementCFG");var CommuLoading=function(e){function t(){var t=e.call(this)||this;t.rect=new egret.Sprite,t.rect.graphics.beginFill(0,0),t.rect.graphics.drawRect(0,0,PopUpManager.STAGE_WIDTH,PopUpManager.STAGE_HEIGHT),t.rect.graphics.endFill(),t.addChild(t.rect);var i=new eui.Component;return i.skinName="WifiSkin",i.x=PopUpManager.STAGE_WIDTH-i.width>>1,i.y=PopUpManager.STAGE_HEIGHT-i.height>>1,t.com=i,t.addChild(t.com),Wifi.setRot(i),t}return __extends(t,e),t.prototype.dispose=function(){Wifi.release(this.com),DisplayUtil.removeAll(this),this.rect=null,this.com=null},t}(egret.Sprite);__reflect(CommuLoading.prototype,"CommuLoading");var Wifi=function(){function e(){}return e.setRot=function(e){var t=e.getChildAt(2);egret.Tween.get(t,{loop:!0}).to({rotation:360},1e3)},e.release=function(e){if(e){var t=e.getChildAt(2);egret.Tween.removeTweens(t)}},e}();__reflect(Wifi.prototype,"Wifi");var DragonAnim=function(){function e(e,t){void 0===t&&(t=0),this._anim_name="",this._index=0,this._total_frames=0,this.gspeed=1e3/60,this.passtime=0,this.cd=0,this.inCd=!1,this._target=e,this.cd=t}return e.prototype.updateTarget=function(e){this._target=e},e.prototype.changeState=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=1),this._anim_name=e,this._target.animation.timeScale=t?1:2,this._target.animation.gotoAndPlayByFrame(this._anim_name,i,0)},Object.defineProperty(e.prototype,"timeScale",{set:function(e){this._target.animation.timeScale=e},enumerable:!0,configurable:!0}),e.prototype.showBack=function(){},e.prototype.timeHandler=function(e){},Object.defineProperty(e.prototype,"animName",{get:function(){return this._anim_name},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._target&&(this._target.animation.stop(),this._target.dbClear(),this._target.dispose()),this.stopTimer(),this._target=null},e.prototype.startTimer=function(){},e.prototype.stopTimer=function(){},e.prototype.resetDelay=function(e){},e.COMPLETE="complete",e.ATTACK="attack",e.ATTACK_END="atkComplete",e.PAUSE="pause",e}();__reflect(DragonAnim.prototype,"DragonAnim");var ImgToast=function(e){function t(t,i){var o=e.call(this)||this;o.icon=new eui.Image,o.label=new eui.Label,o.back=new egret.Shape,o.touchEnabled=!1,o.touchChildren=!1,o.addChild(o.back),o.icon=new eui.Image;var n="";switch(t){case ITEM_REWARD_TYPE.COIN:n="main_json.icon_huobi1";break;case ITEM_REWARD_TYPE.ENERGY:n="main_json.icon_huobi2"}var s=RES.getRes(n);return o.addChild(o.icon),o.icon.texture=s,o.icon.x=40,o.icon.y=40,o.label.textColor=16777215,o.label.text=i,o.label.width=o.label.textWidth+5,o.label.x=o.icon.x+s.textureWidth+5,o.label.y=50,o.addChild(o.label),o.back.graphics.beginFill(0,.8),o.back.graphics.drawRoundRect(0,0,s.textureWidth+o.label.textWidth+80,o.label.textHeight+80,20,20),o.back.graphics.endFill(),o}return __extends(t,e),t}(egret.Sprite);__reflect(ImgToast.prototype,"ImgToast");var Loading=function(e){function t(t){var i=e.call(this,"SubLoadingSkin")||this;return i.back=new egret.Shape,i.label=new eui.Label,i.text="",i.rect=new egret.Shape,egret.Tween.get(i.role,{loop:!0}).to({y:40},600).to({x:48.48},600),i.initView(),i}return __extends(t,e),t.prototype.initView=function(){this.touchEnabled=!1,this.touchChildren=!1,this.rect.graphics.beginFill(0,0),this.rect.graphics.drawRect(0,0,PopUpManager.STAGE_WIDTH,PopUpManager.STAGE_HEIGHT),this.rect.graphics.endFill(),this.label.textColor=16777215,this.label.text=this.text,this.label.wordWrap=!1,this.label.multiline=!1,this.label.width=this.label.textWidth+25},t.prototype.updateBack=function(){this.back.graphics.clear(),this.back.graphics.beginFill(0,.5),this.back.graphics.drawRoundRect(0,0,this.label.textWidth+80,this.label.textHeight+80,20,20),this.back.graphics.endFill(),this.back.x=.5*(PopUpManager.STAGE_WIDTH-this.back.width),this.back.y=.5*(PopUpManager.STAGE_HEIGHT-this.back.height),this.label.x=this.back.x+40,this.label.y=this.back.y+40},Object.defineProperty(t.prototype,"ulabel",{set:function(e){this.label.text=e,this.label.width=this.label.textWidth+25,this.updateBack()},enumerable:!0,configurable:!0}),t.prototype.onDestory=function(){egret.Tween.removeTweens(this.role)},t}(BasePopupWindow);__reflect(Loading.prototype,"Loading");var MoveTip=function(e){function t(t,i){void 0===i&&(i=2e3);var o=e.call(this)||this;o.label=new eui.Label,o.touchEnabled=!1,o.touchChildren=!1,o.label.textColor=16777215,o.label.size=36,o.label.bold=!0,o.label.text=t,o.label.width=o.label.textWidth+5,o.label.textAlign="center",o.addChild(o.label);var n=o;return egret.setTimeout(function(){egret.Tween.get(n).to({alpha:0,y:this.y-100},300).call(function(){n.parent&&n.parent.removeChild(n)})},o,i),o}return __extends(t,e),t}(egret.Sprite);__reflect(MoveTip.prototype,"MoveTip");var MoveToast=function(e){function t(t){var i=e.call(this)||this;i.label=new eui.Label,i.back=new egret.Shape,i.touchEnabled=!1,i.touchChildren=!1,i.addChild(i.back),i.label.textColor=16777215,i.label.text=t,i.label.width=i.label.textWidth+5,i.label.x=40,i.label.y=40,i.addChild(i.label),i.back.graphics.beginFill(0,.8),i.back.graphics.drawRoundRect(0,0,i.label.textWidth+80,i.label.textHeight+80,20,20),i.back.graphics.endFill();var o=i;i.x=.5*(PopUpManager.STAGE_WIDTH-i.width);var n=.5*(PopUpManager.STAGE_HEIGHT-i.height);return i.y=n,egret.Tween.get(i).to({alpha:0,y:n-100},1e3).call(function(){egret.Tween.removeTweens(o),o.parent&&o.parent.removeChild(o)}),i}return __extends(t,e),t}(egret.Sprite);__reflect(MoveToast.prototype,"MoveToast");var Toast=function(e){function t(t,i){void 0===i&&(i=2e3);var o=e.call(this)||this;o.label=new eui.Label,o.back=new egret.Shape,o.touchEnabled=!1,o.touchChildren=!1,o.addChild(o.back),o.label.textColor=16777215,o.label.text=t,o.label.width=o.label.textWidth+5,o.label.x=40,o.label.y=40,o.addChild(o.label),o.back.graphics.beginFill(0,.8),o.back.graphics.drawRoundRect(0,0,o.label.textWidth+80,o.label.textHeight+80,20,20),o.back.graphics.endFill();var n=o;return egret.setTimeout(function(){egret.Tween.get(n).to({alpha:0},300).call(function(){n.parent&&n.parent.removeChild(n)})},o,i),o}return __extends(t,e),t}(egret.Sprite);__reflect(Toast.prototype,"Toast");var ToastFactory=function(){function e(){this.arr=[]}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.startTimer=function(e){null==this.timer&&(this.timer=new RealTimer(500),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timeHandler,this)),this.arr=e.concat(),this.timer.start()},e.prototype.stopTimer=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timeHandler,this),this.timer=null)},e.prototype.timeHandler=function(){var e=this.arr.pop();PopUpManager.moveToast(e),this.arr.length<=0&&this.stopTimer()},e}();__reflect(ToastFactory.prototype,"ToastFactory");var Camera=function(){function e(){}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e}();__reflect(Camera.prototype,"Camera");var HttpSender=function(){function e(){this.sender=new egret.HttpRequest,this.sender.withCredentials=!0,this.sender.responseType=egret.HttpResponseType.TEXT,this.sender.setRequestHeader("Content-Type","text/plain")}return e.prototype.send=function(e){var t=this;return this.sender.setRequestHeader("Content-Type","application/json"),new Promise(function(i,o){t.sender.open(InterfaceIO.ASSET_HEAD+e,egret.HttpMethod.GET),t.sender.addEventListener(egret.Event.COMPLETE,function(e){i(t.sender.response)},t),t.sender.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){o(null)},t),t.sender.send({})})},e.prototype.sendBin=function(e,t){var i=this;return this.sender.setRequestHeader("Content-Type","application/octet-stream"),new Promise(function(o,n){i.sender.open(InterfaceIO.ASSET_HEAD+e,egret.HttpMethod.GET),i.sender.addEventListener(egret.Event.COMPLETE,function(e){o(i.sender.response)},i),i.sender.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){n(null)},i),i.sender.send(t)})},e.prototype.sendURL=function(e,t){var i=this;return this.sender.setRequestHeader("Content-Type","application/json"),new Promise(function(o,n){i.sender.open(e,egret.HttpMethod.GET),i.sender.addEventListener(egret.Event.COMPLETE,function(e){o(i.sender.response)},i),i.sender.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){n(null)},i),i.sender.send(t)})},e.prototype.getData=function(e,t){var i=this;return this.sender.withCredentials=!1,new Promise(function(o,n){i.sender.open(InterfaceIO.HEAD+e,egret.HttpMethod.GET),i.sender.addEventListener(egret.Event.COMPLETE,function(e){o(i.sender.response)},i),i.sender.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){n(null)},i),i.sender.send(t)})},e.prototype.sendData=function(e,t){var i=this;return this.sender.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),new Promise(function(o,n){i.sender.open(InterfaceIO.HEAD+e,egret.HttpMethod.POST),i.sender.addEventListener(egret.Event.COMPLETE,function(e){o(i.sender.response)},i),i.sender.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){n(null)},i),console.log("sendData:==>"+JSON.stringify(t)),i.sender.send(JSON.stringify(t))})},e}();__reflect(HttpSender.prototype,"HttpSender");var POP_TYPE;!function(e){e[e.NONE=0]="NONE",e[e.CENTER_SLOW=1]="CENTER_SLOW",e[e.CENTER_QUICK=2]="CENTER_QUICK",e[e.LEFT_TO_RIGHT=3]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=4]="RIGHT_TO_LEFT",e[e.DOWN_TO_UP=5]="DOWN_TO_UP",e[e.UP_TO_DOWN=6]="UP_TO_DOWN"}(POP_TYPE||(POP_TYPE={}));var PopUpManager=function(){function e(){}return e.show=function(t,i,o,n){void 0===i&&(i=!0),void 0===o&&(o=.5),void 0===n&&(n=POP_TYPE.NONE);var s=new WindowWithModel(t,e.STAGE_WIDTH,e.STAGE_HEIGHT,i,o,n);s.width=e.STAGE_WIDTH,ToolUtil.showAchieve?this.container.addChildAt(s,this.container.numChildren-1):this.container.addChild(s),t.name=this.getName(),e.usewindow[t.name]=s},e.topShow=function(t,i,o,n,s,a){void 0===o&&(o=!0),void 0===n&&(n=!0),void 0===s&&(s=.5),void 0===a&&(a=POP_TYPE.NONE);var r=new WindowWithModel(t,e.STAGE_WIDTH,e.STAGE_HEIGHT,o,s,a);i.addChild(r),e.usewindow[t.name]=r},e.prototype.addQueue=function(){},e.hide=function(t){var i=e.usewindow[t.name];i&&(i.dispose(),i.parent.removeChild(i),delete e.usewindow[t.name]),i&&this.waiting.length>0&&i.isSolo&&MainFacade.getInstance().sendNotification(NotificationNames.OPEN_SINGLE_WINDOW,this.waiting.shift())},e.hideWindow=function(e){this.hide(e)},e.showTip=function(t,i){void 0===i&&(i=0),this.container.addChild(t),t.name=this.getName(),e.tip[t.name]=t,t.anchorOffsetX=.5*t.width,t.anchorOffsetY=.5*t.height,t.x=.5*e.STAGE_WIDTH,t.y=.5*e.STAGE_HEIGHT+50,t.alpha=0,egret.Tween.get(t).to({y:.5*e.STAGE_HEIGHT-50,alpha:1},500,egret.Ease.sineIn),this.moveAllTips(t.name)},e.moveAllTips=function(t){for(var i in e.tip)if(i.toString()!=t){var o=e.tip[i];egret.Tween.get(o).to({y:o.y-o.height,alpha:1},500)}},e.hideTip=function(t){e.tip[t.name]&&(t.parent.removeChild(t),delete e.tip[t.name])},e.showLoading=function(t){void 0===t&&(t="加载中..."),e.loading||(e.loading=new Loading(t)),e.loading.ulabel=t,e.show(e.loading,!0)},e.hideLoading=function(){e.hide(e.loading)},e.showCommuLoading=function(){e.commuLoading||(e.commuLoading=new CommuLoading),this.usewindow[e.commuLoading.name]||e.show(e.commuLoading,!0,0)},e.hideCommuLoading=function(){e.hide(e.commuLoading)},e.moveUpTip=function(t,i){void 0===i&&(i=3e3);var o=new MoveTip(t,i);o.x=.5*(e.STAGE_WIDTH-o.width),o.y=.3*(e.STAGE_HEIGHT-o.height),e.container.stage.addChild(o)},e.showPopCommon=function(t,i,o,n,s){var a=new PopWindows(t,i,o,n,s);e.container.stage.addChild(a),a.show()},e.toast=function(t,i){void 0===i&&(i=2e3);var o=new Toast(t,i);o.x=.5*(e.STAGE_WIDTH-o.width),o.y=.5*(e.STAGE_HEIGHT-o.height),e.container.stage.addChild(o)},e.moveToast=function(t){var i=new MoveToast(t);e.container.stage.addChild(i)},e.imgToast=function(t,i){var o=new ImgToast(t,i);o.x=.5*(e.STAGE_WIDTH-o.width),o.y=.5*(e.STAGE_HEIGHT-o.height),e.container.stage.addChild(o);var n=o.y-100;egret.Tween.get(o).to({y:n,alpha:0},1e3).call(function(){egret.Tween.removeTweens(o)})},e.hideAll=function(){var t,i;for(var o in e.usewindow)t=e.usewindow[o],i=t.getChildByName(o),i&&e.hide(i)},e.getOpenWindows=function(){var e=0;for(var t in this.usewindow)try{1==this.usewindow[t].isSolo&&e++}catch(i){}return e},e.getName=function(){return this.index++,this.index.toString()},e.usewindow=new Object,e.tip=new Object,e.index=1,e.waiting=[],e}();__reflect(PopUpManager.prototype,"PopUpManager");var WindowWithModel=function(e){function t(t,i,o,n,s,a){var r=e.call(this)||this;return r.isSolo=!1,r.isSolo=t.isSolo?!0:!1,n&&(r.shape=new egret.Shape,r.shape.graphics.beginFill(0,s),r.shape.graphics.drawRect(0,0,i,o),r.shape.graphics.endFill(),r.addChild(r.shape),r.shape.touchEnabled=!0),egret.callLater(function(){this.popUp(t,a)},r),r}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t.prototype.popUp=function(e,t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),!this.contains(e)){this.addChild(e);var n=PopUpManager.STAGE_WIDTH,s=PopUpManager.STAGE_HEIGHT,a=0!=i?i:(n-e.width)/2,r=0!=o?o:(s-e.height)/2,h=egret.Tween.get(e);switch(t){case POP_TYPE.CENTER_QUICK:e.alpha=0,e.scaleX=1.2,e.scaleY=1.2,e.x=a-.1*e.width,e.y=r-.1*e.height,h=h.to({alpha:1,scaleX:1,scaleY:1,x:e.x+.1*e.width,y:e.y+.1*e.height},150,egret.Ease.backIn);break;case POP_TYPE.CENTER_SLOW:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=a+e.width/4,e.y=r+e.height/4,h=h.to({alpha:1,scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},600,egret.Ease.elasticOut);break;case POP_TYPE.LEFT_TO_RIGHT:e.y=r,e.x=-e.width,h=h.to({x:a},500,egret.Ease.cubicOut);break;case POP_TYPE.RIGHT_TO_LEFT:e.y=r,e.x=e.width,h=h.to({x:a},500,egret.Ease.cubicOut);break;case POP_TYPE.DOWN_TO_UP:e.x=a,e.y=s,h=h.to({y:r},500,egret.Ease.cubicOut);break;case POP_TYPE.UP_TO_DOWN:e.x=a,e.y=-e.height,h=h.to({y:r},500,egret.Ease.cubicOut);break;default:e.x=a,e.y=r}}},t}(egret.DisplayObjectContainer);__reflect(WindowWithModel.prototype,"WindowWithModel");var RealTimer=function(e){function t(t,i,o){void 0===i&&(i=0),void 0===o&&(o=!1);var n=e.call(this)||this;return n.currentCount=0,n.isRunning=!1,n._force=!1,n.delay=t,n.repeatCount=i,n._force=o,n}return __extends(t,e),t.prototype.start=function(){this.isRunning=!0,this.previous=egret.getTimer(),this.accTime=0,this._force?egret.startTick(this.forceupdate,this):egret.startTick(this.update,this)},t.prototype.reset=function(){this.isRunning=!1,this.previous=egret.getTimer(),this.accTime=0,this.currentCount=0,this._force?egret.stopTick(this.forceupdate,this):egret.stopTick(this.update,this)},t.prototype.forceBack=function(){this.previous=egret.getTimer()},t.prototype.stop=function(){this.isRunning=!1,this._force?egret.stopTick(this.forceupdate,this):egret.stopTick(this.update,this)},t.prototype.update=function(){return this.curTime=egret.getTimer(),this.passTime=this.curTime-this.previous,this.previous=this.curTime,this.accTime+=this.passTime,this.accTime>=this.delay&&(this.accTime=0,this.currentCount++,this.repeatCount>0&&this.currentCount==this.repeatCount&&(this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER_COMPLETE)),this.stop()),this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER))),!1},t.prototype.forceupdate=function(){for(this.curTime=egret.getTimer(),this.passTime=this.curTime-this.previous,this.previous=this.curTime,this.accTime+=this.passTime;this.accTime>=this.delay;)this.accTime-=this.delay,this.currentCount++,this.repeatCount>0&&this.currentCount==this.repeatCount&&(this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER_COMPLETE)),this.stop()),this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER));return!1},t.prototype.resetDelay=function(e){this.delay=e},t}(egret.EventDispatcher);__reflect(RealTimer.prototype,"RealTimer");var SheetMovieClip=function(e){function t(t,i){var o=e.call(this)||this;return o.frame=0,o.max=0,o.num=0,o.target_num=0,o.type="",o.type=i[0],o.data=i,o.max=i.length,o.time=new RealTimer(t,0,!0),o.time.addEventListener(egret.TimerEvent.TIMER,o.timeHandler,o),o.bitmap=new egret.Bitmap,o.addChild(o.bitmap),o}return __extends(t,e),t.prototype.setList=function(e,t,i){for(var o=[],n=e;t>=n;n++){var s=i;10>n&&(s+="0"),s+=n,o.push(s)}this.type=o[0],this.data=o,this.max=o.length},t.prototype.timeHandler=function(e){this.frame>=this.max&&(this.frame=0),this.bitmap.texture=RES.getRes(this.data[this.frame]),this.nextFrame()},t.prototype.nextFrame=function(){if(this.frame++,this.frame>=this.max){if(this.num++,this.num==this.target_num)return this.stop(),this.dispose(),void this.dispatchEvent(new egret.Event(egret.Event.COMPLETE));this.frame=0}},t.prototype.start=function(e){void 0===e&&(e=0),this.target_num=e,this.time.start(),this.timeHandler(null)},t.prototype.reset=function(){this.frame=0,this.num=0,this.target_num=0},t.prototype.stop=function(){this.time&&this.time.stop()},t.prototype.dispose=function(){this.bitmap&&(this.bitmap.texture=null),this.bitmap=null,this.data=null,this.time&&this.time.removeEventListener(egret.TimerEvent.TIMER,this.timeHandler,this),this.time=null,null!=this.parent&&this.parent.removeChild(this)},t.WEAPON_EFF=["composeEff_json.hc0001","composeEff_json.hc0002","composeEff_json.hc0003","composeEff_json.hc0004","composeEff_json.hc0005","composeEff_json.hc0006","composeEff_json.hc0007","composeEff_json.hc0008","composeEff_json.hc0009","composeEff_json.hc0010","composeEff_json.hc0011"],t.WEAPON_COMPOSE=["compose_json.hc0001","compose_json.hc0002","compose_json.hc0003","compose_json.hc0004","compose_json.hc0005","compose_json.hc0006","compose_json.hc0007","compose_json.hc0008","compose_json.hc0009","compose_json.hc0010","compose_json.hc0011"],t}(egret.Sprite);__reflect(SheetMovieClip.prototype,"SheetMovieClip");var SoundManager=function(){function e(){this.effect_lib={},this.isMain=!1}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.startSound=function(t){if(t=t==e.NERVOUS?e.NERVOUS:InterfaceIO.ASSET_HEAD+t,this.nowSound!=t&&ToolUtil.music&&ToolUtil.isMusicOpen){var i=this;this.audio&&(this.audio.stop(),this.audio=null),this.nowSound=t,RES.getResByUrl(t,function(e){var t=e;i.audio=t.play(0,0),i.audio.volume=1})}},e.prototype.stopSound=function(){this.audio&&(this.audio.volume=0)},e.prototype.resumeSound=function(){ToolUtil.isMusicOpen&&this.audio&&(this.audio.volume=1)},e.prototype.playEffect=function(e){if(ToolUtil.music&&ToolUtil.isEffectOpen){console.log("播放");RES.getResByUrl("resource/assets/sound/"+e+".mp3",function(e){var t=e;if(t){var i=void 0;i=t.play(0,1),i.volume=1}})}},e.prototype.playNewEffect=function(e){if(ToolUtil.music&&ToolUtil.isEffectOpen){console.log("播放");RES.getResByUrl(e,function(e){var t,i=e;t=i.play(0,1),t.volume=1})}},e.prototype.createInnerAudioContext=function(){return window.wx?window.wx.createInnerAudioContext():null},e.prototype.playBGM=function(){ToolUtil.music&&(this.InnerAudioContext=platform.createInnerAudioContext(),this.InnerAudioContext.src="resource/assets/sound/bgsound.mp3",this.InnerAudioContext.autoplay=!0,this.InnerAudioContext.loop=!0,this.InnerAudioContext.obeyMuteSwitch=!0)},e.prototype.stopEffect=function(e,t){var i=t+"_"+e;try{this.effect_lib[i]&&(this.effect_lib[i].stop(),delete this.effect_lib[i])}catch(o){}},e.prototype.stopBGM=function(){try{this.InnerAudioContext&&this.InnerAudioContext.stop()}catch(e){}},e.BGM="xiaoyouxi/runhit/sound/bgm.mp3",e.NERVOUS="resource/assets/sound/nervous.mp3",e.CHAPTER_ONE="xiaoyouxi/runhit/sound/chapter1.mp3",e.CORRECT="win",e.WINVIEW="resource/assets/scene0/success.mp3",e.FAILVIEW="resource/assets/scene0/fail.mp3",e.BIU="resource/assets/scene0/biu.mp3",e.DIDA="resource/assets/scene0/dida.mp3",e.PLOLICE="resource/assets/scene0/police.mp3",e.WANG="resource/assets/scene0/wang.mp3",e.HEART="resource/assets/scene0/heart.mp3",e.YIWEN="resource/assets/scene0/yiwen.mp3",e.JINGKONG="resource/assets/scene0/jingkong.mp3",e.DING="resource/assets/scene0/ding.mp3",e.BUTTON="resource/assets/scene0/button.mp3",e}();__reflect(SoundManager.prototype,"SoundManager");var VideoManager=function(){function e(){this.isInPlaying=!1}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.playVideo=function(e,t,i,o){var n=this;if(void 0===e&&(e=null),void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=""),!this.isInPlaying){if(this.isInPlaying=!0,""==o&&(o=ToolUtil.videoId),o=ToolUtil.videoId,""==o){this.isInPlaying=!1,t.call(e);var s=MainFacade.getInstance().retrieveProxy(UserProxy.NAME);return void s.todayVideo++}this.videoAd=platform.createRewardedVideoAd({adUnitId:"adunit-e92f3e79581e503f"}),this.videoAd.onClose(this.closeAD),this.videoAd.onError(this.errorAd),this.videocallobj=e,this.videosucceedCallback=t,this.videofailCallback=i,this.videoAd.load().then(function(){return n.videoAd.show()})["catch"](function(e){})}},e.prototype.failVideoAdFun=function(t){var i=e.getInstance();i.isInPlaying=!1,i.videoAd.offClose(i.closeAD),i.videoAd.offError(i.errorAd),PopUpManager.toast(t.errMsg+":"+t.errCode),i.videofailCallback&&i.videocallobj&&i.videofailCallback.call(i.videocallobj),i.videosucceedCallback=null,i.videocallobj=null,i.videofailCallback=null},e.prototype.closeAD=function(t){var i=e.getInstance();if(i.isInPlaying=!1,t&&t.isEnded||void 0==t){if(i.videocallobj&&i.videosucceedCallback){i.videosucceedCallback.call(i.videocallobj);var o=MainFacade.getInstance().retrieveProxy(UserProxy.NAME);o.todayVideo++,MainFacade.getInstance().sendNotification(NotificationNames.UPDATEICON),AldUtil.adldot("video_success")}}else{PopUpManager.toast("广告播放失败，要看完哦~");var n=MainFacade.getInstance().retrieveProxy(UserProxy.NAME);n.videobreak++,i.videofailCallback&&i.videocallobj&&i.videofailCallback.call(i.videocallobj),AldUtil.adldot("video_fail")}i.videosucceedCallback=null,i.videocallobj=null,i.videofailCallback=null,i.videoAd.offClose(i.closeAD),i.videoAd.offError(i.errorAd),SoundManager.getInstance().resumeSound()},e.prototype.errorAd=function(t){var i=e.getInstance();i.isInPlaying=!1,i.failVideoAdFun(t)},e}();__reflect(VideoManager.prototype,"VideoManager");var ITEM_REWARD_TYPE;!function(e){e[e.COIN=0]="COIN",e[e.ENERGY=1]="ENERGY"}(ITEM_REWARD_TYPE||(ITEM_REWARD_TYPE={}));var InterfaceIO=function(){function e(){}return e.HEAD="https://api.xyx.bkdau.cn/",e.LOGIN="?c=app&a=xyxAppLogin",e.ASSET_HEAD="https://www.bkdau.cn/",e.SET_USER_STORAGE="?c=app&a=setUserData",e.GET_USER_STORAGE="?c=app&a=getUserData",e}();__reflect(InterfaceIO.prototype,"InterfaceIO");var LevelName=function(){function e(){}return e.LEVEL_1="0000",e.LEVEL_2="0001",e.LEVEL_3="0002",e.LEVEL_4="0003",e.LEVEL_5="0004",e.LEVEL_6="0005",e.LEVEL_7="0006",e.LEVEL_8="0007",e.LEVEL_9="0008",e.LEVEL_10="0009",e.LEVEL_11="0010",e.LEVEL_12="0011",e.LEVEL_13="0012",e.LEVEL_14="0013",e.LEVEL_15="0014",e.LEVEL_16="0015",e.LEVEL_17="0016",e.LEVEL_18="0017",e.LEVEL_19="0018",e.LEVEL_20="0019",e.LEVEL_21="0020",e.LEVEL_22="0021",e.LEVEL_23="0022",e.LEVEL_24="0023",e}();__reflect(LevelName.prototype,"LevelName");var LevelCorrect=function(){function e(){}return e.ITEM_1=[1,11,12],e.ITEM_2=[11,15],e.ITEM_3=[19,7,5],e.ITEM_4=[35,51],e.ITEM_5=[38,32,34],e.ITEM_6=[20,36,32],e.ITEM_7=[23,26,28],e.ITEM_8=[39,62,61],e.ITEM_9=[54,19,43],e.ITEM_10=[57,58,47],e.ITEM_11=[66,69,70],e.ITEM_12=[73,74,68],e.ITEM_13=[86,88,77],e.ITEM_14=[81,22,84],e.ITEM_15=[89,93,91],e.ITEM_16=[97,99,100],e.ITEM_17=[44,103,104],e.ITEM_18=[106,107,109],e.ITEM_19=[111,26,62],e.ITEM_20=[112,78,15],e.ITEM_21=[115,116,118],e.ITEM_22=[121,122,124],e.ITEM_23=[128,130,133],e}();__reflect(LevelCorrect.prototype,"LevelCorrect");var MTAType=function(){function e(){}return e.LOADMAIN="loadMain",e.REQLOGIN="reqLogin",e.DURATION="duration",e.ENTERGAME="enterGame",e.STARTCHALLENGE="startChallenge",e.STARTNEW="startNew",e.FINISHNEW="finishNew",e.ADDPOWER="addPower",e.TWENTYPOWER="20Power",e.FIVEPOWER="5Power",e.COIN="coin",e.DIAMOND="diamond",e.SHOP="shop",e.GOLDBOX="goldBox",e.BLACKBOX="blackBox",e.THIRTYDIAMOND="30diamond",e.EIGHTDIAMOND="80diamond",e.HUNDREDDIAMOND="200diamond",e.OPEN="open",e.SETTING="setting",e.COMPOSE="compose",e.OPENTALENT="openTalent",e.ADDTALENT="addTalent",e.TALENT1="talent1",e.TALENT2="talent2",e.TALENT3="talent3",e.TALENT4="talent4",e.TALENT5="talent5",e.TALENT6="talent6",e.TALENT7="talent7",e.TALENT8="talent8",e.TALENT9="talent9",e.CHOOSEPOWER="chosePower",e.REBORN="reborn",e.ANGELGIFT="angelGift",e.HIGHLEVEL="highLevel",e.HIGHLEVELFLOOR="highLevelFloor",e.ADVENTURE="adventure",e.FLOORLOSE="floorLose",e.GUIDE_MOVE="finishMove",e.GUIDE_ATTACK="finishAttack",e.GUIDE_ENTER_BOSS="finishBoss",e.GUIDE_KILL_BOSS="finishBossKill",e.GUIDE_EQUIP="equipClick",e.GUIDE_PREPARE="equipFinish",e.GUIDE_ZERO_CHALLENGE="startIntro",e.GUIDE_FINISH_ZERO="finishIntro",e.ANGLE_BACK="backCity",e.BACK_GAME="backMenu",e.RESULT_VIDEO_CLICK="finalRewardClick",e.RESULT_VIDEO_FINISH="finalRewardGet",e.DEMON_VIDEO_CLICK="devilClick",e.DEMON_VIDEO_FINISH="devilGet",e.CHAPTER_REWARD_VIDEO_CLICK="levelRewardClick",e.CHAPTER_REWARD_VIDEO_FINISH="levelRewardGet",e.BUFF_VIDEO_CLICK="refreshClick",e.BUFF_VIDEO_FINISH="refreshGet",e.PULL="pull",e.RELEASE="release",e.PASS_TIME="passTime",e.POWER_LESS="powerLess",e.POWER_GET="powerGet",e.LOSE="lose",e.NEW_PASS_1="newPassTime1",e.NEW_PASS_2="newPassTime2",e.NEW_PASS_3="newPassTime3",e.NEW_PASS_4="newPassTime4",e.NEW_PASS_5="newPassTime5",e.NEW_PASS_6="newPassTime6",e.NEW_PASS_7="newPassTime7",e.PASS_TIME_1="PassTime1",e.PASS_TIME_2="PassTime2",e.PASS_TIME_3="PassTime3",e.PASS_TIME_4="PassTime4",e.PASS_TIME_5="PassTime5",e.PASS_TIME_6="PassTime6",e.PASS_TIME_7="PassTime7",e.PASS_TIME_8="PassTime8",e.PASS_TIME_9="PassTime9",e.PASS_TIME_10="PassTime10",e.OTHER_DIE="otherdie",e.FIRST_DIE="floor1_die1",e.SECOND_DIE="floor2_die1",e.THIRD_DIE="floor3_die1",e.FORTH_DIE="floor4_die1",e.FIFTH_DIE="floor5_die1",e.SIX_DIE="floor6_die1",e.SEVEN_DIE="floor7_die1",e.EIGHT_DIE="floor8_die1",e.NINE_DIE="floor9_die1",e.TEN_DIE="floor10_die1",e.N_FIRST_DIE="floor1_die2",e.N_SECOND_DIE="floor2_die2",e.N_THIRD_DIE="floor3_die2",e.N_FORTH_DIE="floor4_die2",e.N_FIFTH_DIE="floor5_die2",e.N_SIX_DIE="floor6_die2",e.N_SEVEN_DIE="floor7_die2",e.N_EIGHT_DIE="floor8_die2",e.N_NINE_DIE="floor9_die2",e.N_TEN_DIE="floor10_die2",e.FIRST_DIE_R="floor1_revive",e.SECOND_DIE_R="floor2_revive",e.THIRD_DIE_R="floor3_revive",e.FORTH_DIE_R="floor4_revive",e.FIFTH_DIE_R="floor5_revive",e.SIX_DIE_R="floor6_revive",e.SEVEN_DIE_R="floor7_revive",e.EIGHT_DIE_R="floor8_revive",e.NINE_DIE_R="floor9_revive",e.TEN_DIE_R="floor10_revive",e.START_PLAY_ICON="startPlayIcon",e.START_PLAY="startPlay",e.END_PLAY="endPlay",e.PLAY_PASS_TIME="PlayPassTime",e.PLAY_DIE="playDie",e.PLAY_REVIVE="playRevive",e.new_1_enter="new_1_enter",e.new_2_enter="new_2_enter",e.new_3_enter="new_3_enter",e.new_4_enter="new_4_enter",e.new_5_enter="new_5_enter",e.new_6_enter="new_6_enter",e.new_7_enter="new_7_enter",e.new_1_tip="new_1_tip",e.new_1_move="new_1_move",e.new_1_end="new_1_end",e.new_1_monster_die="new_1_monster_die",e.new_1_door="new_1_door",e.new_2_monster_die="new_2_monster_die",e.new_2_buff="new_2_buff",e.new_4_buff="new_4_buff",e.new_6_buff="new_6_buff",e.new_2_buff_enter="new_2_buff_enter",e.new_2_buff_close="new_2_buff_close",e.new_4_buff_close="new_4_buff_close",e.new_6_buff_close="new_6_buff_close",e.new_2_monster_die_2="new_2_monster_die_2",e.new_3_monster_die_2="new_3_monster_die_2",e.new_3_monster_die="new_3_monster_die",e.new_4_monster_die="new_4_monster_die",e.new_4_monster_die_2="new_4_monster_die_2",e.new_5_monster_die="new_5_monster_die",e.new_5_monster_die_2="new_5_monster_die_2",e.new_6_monster_die="new_6_monster_die",e.new_6_monster_die_2="new_6_monster_die_2",e.new_7_monster_die="new_7_monster_die",e.new_7_monster_die_2="new_7_monster_die_2",e.new_7_equip="new_7_equip",e.new_7_equip_close="new_7_equip_close",e.new_result_1="new_result_1",e.new_result_btn="new_result_btn",e.new_result_close="new_result_close",e.new_2_gold="new_2_gold",e.new_2_door="new_2_door",e.highLevelB="highLevelB",e.event_challenge="event_challenge",e.event_revenge="event_revenge",e}();__reflect(MTAType.prototype,"MTAType");var NotificationNames=function(){function e(){}return e.SKIN_LOADED="SKIN_LOADED",e.START_UP="START_UP",e.START_INIT_UP="START_INIT_UP",e.SHARE="SHARE",e.OPEN_WINDOW="OPEN_WINDOW",e.OPEN_BOX="OPEN_BOX",e.START_COMMU_UP="START_COMMU_UP",e.START_RESOURCE_UP="START_RESOURCE_UP",e.SAVE_DATA_COMMAND="SAVE_DATA_COMMAND",e.OPEN_SINGLE_WINDOW="OPEN_SINGLE_WINDOW",e.CLOSE_HOME="CLOSE_HOME",e.CLOSE_MAINGAME="CLOSE_MAINGAME",e.RESUME_FROM="RESUME_FROM",e.BATTLE_PAUSE="BATTLE_PAUSE",e.SHOW_SELECT="SHOWSELECT",e.SELECT_RESULT="SELECT_RESULT",e.CHOSEEVENT="CHOSEEVENT",e.CLICKMEGIC="CLICKMEGIC",e.MEGICCOMPLETE="MEGICCOMPLETE",e.REVIVE="REVIVE",e.GOLD_CHANGE="GOLD_CHANGE",e.GOLD_TEMP_CHANGE="GOLD_TEMP_CHANGE",e.ENERGY_CHANGE="ENERGY_CHANGE",e.DIAMOND_CHANGE="DIAMOND_CHANGE",e.CHOSE_SKIN="CHOSE_SKIN",e.SKIN_BACK="SKIN_BACK",e.CHANGE_SKIN="CHANGE_SKIN",e.SHOW_FLY_EFF="SHOW_FLY_EFF",e.UPDATEICON="UPDATEICON",e.UPDATEACHIEVEICON="UPDATEACHIEVEICON",e.SELECT_SHARE_SUCCESS="SELECT_SHARE_SUCCESS",e.SELECT_SHARE_FAIL="SELECT_SHARE_FAIL",e}();__reflect(NotificationNames.prototype,"NotificationNames");var StorageType=function(){function e(){}return e.LEVEL="level",e.COIN="coin",e.SIGN_WEEK="signWeek",e.GOLD="gold",e.ENERGY="energy",e.DIAMOND="diamond",e.LAST_RECOVER_ENERGY_TIME="laEnergyReTi",e.GROW1="grow1",e.GROW2="grow2",e.USED_ENERGY="usedenergy",e.USED_GOLD="usedgold",e.ISGETACHIEVE="isgetachieve",e.ISARRIVEACHIEVE="isarriveachieve",e.TODAY_VIDEO="todayVideo",e.TODAY_SHARE="today_share",e.VIDEO_BREAK="video_break",e.NOTICE_TIME="notice_time",e.MEGIC_NUM="megic_num",e.SKIN_LIST="skin_list",e.NOW_SKIN="now_skin",e.SHARE_FRIEND_NUM="SHARE_FRIEND_NUM",e.SHARE_PROGRESS="SHARE_PROGRESS",e
}();__reflect(StorageType.prototype,"StorageType");var WindowName=function(){function e(){}return e.OPEN_HOME="OPEN_HOME",e.OPEN_PREANI="OPEN_PREANI",e.OPEN_SKIN="OPEN_SKIN",e.OPEN_SETUP="OPEN_SETUP",e.OPEN_ANNOUNCECMENT="OPEN_ANNOUNCECMENT",e.OPEN_HELPRANK="OPEN_HELPRANK",e.OPEN_FRIEND="OPEN_FRIEND",e.OPEN_ACHIEVE="OPEN_ACHIEVE",e.OPEN_GROW="OPEN_GROW",e.OPEN_ENERGYSHOP="OPEN_ENERGYSHOP",e.OPEN_MAINGAME="OPEN_MAINGAME",e.OPEN_EVENTSELECT="OPEN_EVENTSELECT",e.OPEN_WINVIEW="OPEN_WINVIEW",e.OPEN_FAILVIEW="OPEN_FAILVIEW",e.OPEN_REVIVE="OPEN_REVIVE",e.OPEN_RANK="OPEN_RANK",e.OPEN_PVPLOBBY="OPEN_PVPLOBBY",e.OPEN_PVPROOM="OPEN_PVPROOM",e.OPEN_PVPPOP="OPEN_PVPPOP",e.OPEN_SIGN="OPEN_SIGN",e.UNLOCK_SKIN="UNLOCK_SKIN",e.GET_CHIPS="GET_CHIPS",e.GET_ACHIEVE="GET_ACHIEVE",e.OPEN_INVITEVIEW="OPEN_INVITEVIEW",e.OPEN_CHOICE_LEVEL_VIEW="OPEN_CHOICE_LEVEL_VIEW",e}();__reflect(WindowName.prototype,"WindowName");var MainFacade=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return puremvc.Facade.instance||(puremvc.Facade.instance=new t),puremvc.Facade.instance},t.prototype.startup=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return t=e,[4,this.loadTheme(e)];case 1:return i.sent(),[4,RES.loadGroup("preload",0,Main.loadingView)];case 2:return i.sent(),Main.loadingView=new LoadingUI,e.addChild(Main.loadingView),this.sendNotification(NotificationNames.START_COMMU_UP,e),[2]}})})},t.prototype.loadTheme=function(e){var t=this;return new Promise(function(i,o){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){i()},t)})},t.prototype.initializeController=function(){e.prototype.initializeController.call(this),this.registerProxy(new ConfigProxy),this.registerProxy(new UserProxy),this.registerProxy(new GameProxy),this.registerCommand(NotificationNames.START_UP,StartUpCommand),this.registerCommand(NotificationNames.START_RESOURCE_UP,StartUpLoadResourceCommand),this.registerCommand(NotificationNames.START_COMMU_UP,StartUpCommuCommand),this.registerCommand(NotificationNames.START_INIT_UP,StartUpInitCommand),this.registerCommand(NotificationNames.OPEN_WINDOW,OpenWindowCommand),this.registerCommand(NotificationNames.SAVE_DATA_COMMAND,SaveDataCommand),this.registerCommand(NotificationNames.OPEN_SINGLE_WINDOW,OpenSingleWindowCommand),t.registerLevel={},t.registerLevel["gameMediator_"+LevelName.LEVEL_1]=GameMediator0000,t.registerLevel["game_"+LevelName.LEVEL_1]=Game0000,t.registerLevel["gameMediator_"+LevelName.LEVEL_2]=GameMediator0001,t.registerLevel["game_"+LevelName.LEVEL_2]=Game0001,t.registerLevel["gameMediator_"+LevelName.LEVEL_3]=GameMediator0002,t.registerLevel["game_"+LevelName.LEVEL_3]=Game0002,t.registerLevel["gameMediator_"+LevelName.LEVEL_4]=GameMediator0003,t.registerLevel["game_"+LevelName.LEVEL_4]=Game0003,t.registerLevel["gameMediator_"+LevelName.LEVEL_5]=GameMediator0004,t.registerLevel["game_"+LevelName.LEVEL_5]=Game0004,t.registerLevel["gameMediator_"+LevelName.LEVEL_6]=GameMediator0005,t.registerLevel["game_"+LevelName.LEVEL_6]=Game0005,t.registerLevel["gameMediator_"+LevelName.LEVEL_7]=GameMediator0006,t.registerLevel["game_"+LevelName.LEVEL_7]=Game0006,t.registerLevel["gameMediator_"+LevelName.LEVEL_8]=GameMediator0007,t.registerLevel["game_"+LevelName.LEVEL_8]=Game0007,t.registerLevel["gameMediator_"+LevelName.LEVEL_9]=GameMediator0008,t.registerLevel["game_"+LevelName.LEVEL_9]=Game0008,t.registerLevel["gameMediator_"+LevelName.LEVEL_10]=GameMediator0009,t.registerLevel["game_"+LevelName.LEVEL_10]=Game0009,t.registerLevel["gameMediator_"+LevelName.LEVEL_11]=GameMediator0010,t.registerLevel["game_"+LevelName.LEVEL_11]=Game0010,t.registerLevel["gameMediator_"+LevelName.LEVEL_12]=GameMediator0011,t.registerLevel["game_"+LevelName.LEVEL_12]=Game0011,t.registerLevel["gameMediator_"+LevelName.LEVEL_13]=GameMediator0012,t.registerLevel["game_"+LevelName.LEVEL_13]=Game0012,t.registerLevel["gameMediator_"+LevelName.LEVEL_14]=GameMediator0013,t.registerLevel["game_"+LevelName.LEVEL_14]=Game0013,t.registerLevel["gameMediator_"+LevelName.LEVEL_15]=GameMediator0014,t.registerLevel["game_"+LevelName.LEVEL_15]=Game0014,t.registerLevel["gameMediator_"+LevelName.LEVEL_16]=GameMediator0015,t.registerLevel["game_"+LevelName.LEVEL_16]=Game0015,t.registerLevel["gameMediator_"+LevelName.LEVEL_17]=GameMediator0016,t.registerLevel["game_"+LevelName.LEVEL_17]=Game0016,t.registerLevel["gameMediator_"+LevelName.LEVEL_18]=GameMediator0017,t.registerLevel["game_"+LevelName.LEVEL_18]=Game0017,t.registerLevel["gameMediator_"+LevelName.LEVEL_19]=GameMediator0018,t.registerLevel["game_"+LevelName.LEVEL_19]=Game0018,t.registerLevel["gameMediator_"+LevelName.LEVEL_20]=GameMediator0019,t.registerLevel["game_"+LevelName.LEVEL_20]=Game0019,t.registerLevel["gameMediator_"+LevelName.LEVEL_21]=GameMediator0020,t.registerLevel["game_"+LevelName.LEVEL_21]=Game0020,t.registerLevel["gameMediator_"+LevelName.LEVEL_22]=GameMediator0021,t.registerLevel["game_"+LevelName.LEVEL_22]=Game0021,t.registerLevel["gameMediator_"+LevelName.LEVEL_23]=GameMediator0022,t.registerLevel["game_"+LevelName.LEVEL_23]=Game0022,t.registerLevel["gameMediator_"+LevelName.LEVEL_24]=GameMediator0023,t.registerLevel["game_"+LevelName.LEVEL_24]=Game0023},t.registerLevel={},t}(puremvc.Facade);__reflect(MainFacade.prototype,"MainFacade");var ConfigProxy=function(e){function t(){var i=e.call(this,t.NAME)||this;return i.libs={},i.lib_arrays={},i}return __extends(t,e),t.prototype.loadMapZip=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,o,n=this;return __generator(this,function(s){return e=ToolUtil.VERSION.split(".").join(""),t="save",i=t+".json",o=this,[2,new Promise(function(e,o){var s=n,a=RES.getRes(t+"_zip");JSZip.loadAsync(a).then(function(e){var t=e.file(i).async("text");return t}).then(function(t){s.MapConfig=JSON.parse(t),e()})})]})})},t.prototype.loadJson=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(i){return e=this,[2,new Promise(function(i,o){RES.getResAsync("excel_202057171644_json",function(o){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(t){return console.log("获取json",o),i(),e.parse(o),[2]})})},t)})]})})},t.prototype.parse=function(e){var i,o=e;for(var n in o)switch(i=o[n],n){case t.ACHIEVE:this.libs[t.ACHIEVE]=this.parseVO(i,achievementCFG,t.ACHIEVE);break;case t.CHIPS:this.libs[t.CHIPS]=this.parseVO(i,chipCFG,t.CHIPS);break;case t.SKIN:this.libs[t.SKIN]=this.parseVO(i,skinCFG,t.SKIN)}},t.prototype.parseVO=function(e,t,i){void 0===i&&(i="");var o,n={},s=[];for(var a in e)o=new t(e[a]),o.hasOwnProperty("id")?n[o.id]=o:n[o.level]=o,s.push(o);return""!=i&&(this.lib_arrays[i]=s),n},t.prototype.getTable=function(e){return this.lib_arrays[e]},t.prototype.getItemByID=function(e,t){for(var i in this.lib_arrays[e])if(this.lib_arrays[e][i].id==t)return this.lib_arrays[e][i]},t.prototype.getChipByID=function(e){for(var i in this.lib_arrays[t.CHIPS])if(this.lib_arrays[t.CHIPS][i].id==e)return this.lib_arrays[t.CHIPS][i]},t.NAME="ConfigProxy",t.ACHIEVE="achievement_config",t.CHIPS="chip_config",t.SKIN="skins_config",t}(puremvc.Proxy);__reflect(ConfigProxy.prototype,"ConfigProxy");var GameProxy=function(e){function t(){var i=e.call(this,t.NAME)||this;return i.fps=0,i.save_timer=new RealTimer(3e3),i.energy_timer=new RealTimer(1e3),i.cd=0,i.times=0,i.clickNum=0,i.clickTime=0,i.bannerHeight=0,i.bannerWidth=0,i}return __extends(t,e),t.prototype.createBanner=function(e){void 0===e&&(e={bottom:0,width:1,top:0,left:0});var t=1,i=.25*PopUpManager.STAGE_WIDTH/PopUpManager.STAGE_HEIGHT,o=(PopUpManager.STAGE_HEIGHT-.25*PopUpManager.STAGE_WIDTH)/PopUpManager.STAGE_HEIGHT,n=0;console.log("banner: "+n+","+o+","+t+","+i),NativeManager.showBannerAdForFrame(n+","+o+","+t+","+i)},t.prototype.createNewBanner=function(e){var t=platform.getSystemInfoSync(),i="adunit-1e37ffc90b844ca4",o=1;if(e.hasOwnProperty("width")&&(o=e.width),console.log("width:",o),console.log("style:",e),this.bannerAd=platform.createBannerAd({adUnitId:i,style:{left:0,top:t.screenHeight-105,width:t.screenWidth*o}}),this.bannerAd.show(),this.bannerAd){var n=this,s=function(e){n.bannerAd.offResize(s),n.bannerAd.style.left=.5*(t.windowWidth-e.width),n.bannerHeight=e.height,n.bannerWidth=e.width,console.log("res:"+JSON.stringify(e)),n.bannerAd.style.top=t.windowHeight-e.height},a=function(e){console.log("banner on error:"+e.errMsg)};this.bannerAd.onError(a),this.bannerAd.onResize(s)}},t.prototype.showBanner=function(e){if(void 0===e&&(e={bottom:0}),this.bannerAd){console.log("showBannershowBanner");var t=platform.getSystemInfoSync();this.bannerAd.style.top=t.windowHeight-this.bannerHeight,e.hasOwnProperty("left")&&(this.bannerAd.style.left=e.left),this.bannerAd.show()}},t.prototype.hideBanner=function(){NativeManager.closeBanner()},t.prototype.bannerAdError=function(e){console.log("bannerErrorMsgStart"),console.log(e.errMsg),console.log(e.errCode),console.log("bannerErrorMsgEnd")},t.prototype.bannerAdDestroy=function(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},t.NAME="GameProxy",t}(puremvc.Proxy);__reflect(GameProxy.prototype,"GameProxy");var UserProxy=function(e){function t(){var i=e.call(this,t.NAME)||this;return i.server_time=0,i.energy_time=0,i._isgrow1=!1,i._isgrow2=!1,i.isNew=!1,i.needDot=!1,i.level=0,i._today_video=0,i._today_share=0,i._gold=0,i._energy=0,i._diamond=0,i._noticetime=0,i._megicnum=2,i.skinList={},i}return __extends(t,e),t.prototype.calDay=function(){var e=new Date(1e3*this.createTime),t=new Date(this.serverTime),i=Math.abs(t.getTime()-e.getTime());return Math.floor(i/864e5)},t.prototype.win=function(){this.level++;var e=this.checkAchieve()[1];e.length>0&&egret.setTimeout(function(){MainFacade.getInstance().sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.GET_ACHIEVE,data:e})},this,300),NativeManager.umengLevelUp(this.level+""),this.setStorageSync(StorageType.LEVEL,this.level)},t.prototype.getCurrentLevelStr=function(){return this.level<10?"000"+this.level:"00"+this.level},t.prototype.getRestasrtLevelStr=function(){return this.level<10?"000"+(this.level-1):"00"+(this.level-1)},t.prototype.getTempLevelStr=function(e){return 10>e?"000"+e:"00"+e},t.prototype.save=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,o;return __generator(this,function(n){switch(n.label){case 0:return e=this.serverTime,ToolUtil.local_storage.time=e,platform.setStorageSync("data",ToolUtil.local_storage),t=ToolUtil.local_storage,console.log(ToolUtil.local_storage),i=new HttpSender,[4,i.sendData(InterfaceIO.SET_USER_STORAGE,{appId:ToolUtil.APPID,uid:ToolUtil.uid,userData:JSON.stringify(ToolUtil.local_storage)})];case 1:return o=n.sent(),console.log("result====>",o),[2]}})})},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,o,n,s,a,r,h,l,c,u,p,d,g,f,v,m,w,y,_,E;return __generator(this,function(T){switch(T.label){case 0:return T.trys.push([0,2,,3]),[4,this.getUserData()];case 1:return T.sent(),[3,3];case 2:return e=T.sent(),console.log("getUserData error:"),AldUtil.adldot("get_user_data_err",{}),[3,3];case 3:return console.log("玩家数据为："+ToolUtil.local_storage),t=ToolUtil.local_storage[StorageType.LEVEL],this.level=t?t:0,console.log("拿关卡数据"+this.level),i=ToolUtil.local_storage[StorageType.SIGN_WEEK],i?this.signWeek=i:this.signWeek={time:0,cnt:0},this.resetSign(),o=ToolUtil.local_storage[StorageType.LAST_RECOVER_ENERGY_TIME],this._lastRecoverEnergyTime=o?o:0,n=ToolUtil.local_storage[StorageType.ENERGY],this._energy=n?n:GameDefine.MAX_ENERGY,s=ToolUtil.local_storage[StorageType.ISGETACHIEVE],this.isgetachieve=s?s:[],a=ToolUtil.local_storage[StorageType.ISARRIVEACHIEVE],this.arriveachieve=a?a:[],this.recoverEnergy(),r=ToolUtil.local_storage[StorageType.USED_ENERGY],this._usedenergy=r?r:0,h=ToolUtil.local_storage[StorageType.USED_GOLD],this._usedgold=h?h:0,l=ToolUtil.local_storage[StorageType.GOLD],this._gold=l?l:0,c=ToolUtil.local_storage[StorageType.DIAMOND],this._diamond=c?c:0,u=ToolUtil.local_storage[StorageType.TODAY_SHARE],this._today_share=u?u:0,p=ToolUtil.local_storage[StorageType.TODAY_VIDEO],this.todayVideo=p?p:0,d=ToolUtil.local_storage[StorageType.GROW1],this._isgrow1=d?d:!1,g=ToolUtil.local_storage[StorageType.GROW2],this._isgrow2=g?g:!1,f=ToolUtil.local_storage[StorageType.VIDEO_BREAK],this._videobreak=f?f:0,v=ToolUtil.local_storage[StorageType.NOTICE_TIME],this._noticetime=v?v:0,m=ToolUtil.local_storage[StorageType.MEGIC_NUM],this._megicnum=m>=0?m:2,w=ToolUtil.local_storage[StorageType.SKIN_LIST],this.skinList=w?w:{},y=ToolUtil.local_storage[StorageType.NOW_SKIN],this._nowSkinId=y>=0?y:-1,_=ToolUtil.local_storage[StorageType.SHARE_FRIEND_NUM],this._share_friend_num=_?_:0,E=ToolUtil.local_storage[StorageType.SHARE_PROGRESS],this._shareProgress=E?E:0,this.level>0&&(this.isNew=!1),this.level>1&&(this.isgrow1=!0),this.level>3&&(this.isgrow2=!0),[2]}})})},t.prototype.setStorageSync=function(e,t){try{ToolUtil.local_storage[e]=t,ToolUtil.NEED_SAVE_DATA=!0}catch(i){}},t.prototype.getUserData=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,o,n,s,a,r;return __generator(this,function(h){switch(h.label){case 0:return e=new HttpSender,console.log("调取拉取数据接口"),[4,e.sendData(InterfaceIO.GET_USER_STORAGE,{appId:ToolUtil.APPID,uid:ToolUtil.uid})];case 1:t=h.sent(),i=platform.getStorageSync("data"),t||(console.log("prase result data error:"),t="{ret:{userInfo:{userData:{}}}}",AldUtil.adldot("result_get_err",{s:t}));try{o=JSON.parse(t)}catch(l){AldUtil.adldot("user_obj_err",{s:t}),console.log("prase user data error:"+t)}console.log("local:",i),console.log("user:",o),n=o.ret.userInfo.userData;try{s=JSON.parse(n)}catch(l){AldUtil.adldot("result_str_err",{s:n}),console.log("prase result_obj data error:"+n)}return s?s.hasOwnProperty("time")&&(a=Number(s.time),i&&i.hasOwnProperty("time")?(r=Number(i.time),r>a?ToolUtil.local_storage=i:ToolUtil.local_storage=s):ToolUtil.local_storage=s):(ToolUtil.local_storage=i,ToolUtil.local_storage||(ToolUtil.local_storage={})),[2]}})})},Object.defineProperty(t.prototype,"serverTime",{get:function(){return egret.getTimer()+1e3*this.server_time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpenSkin",{get:function(){return this.level>3},enumerable:!0,configurable:!0}),t.prototype.resetSign=function(){var e=ToolUtil.isSameDay(this.signWeek.time,this.serverTime);e||7!=this.signWeek.cnt||(this.signWeek.cnt=0)},t.prototype.updateSevenSign=function(e,t){7==t&&(t=0),this.signWeek.time=e,this.signWeek.cnt=t,this.setStorageSync(StorageType.SIGN_WEEK,this.signWeek)},Object.defineProperty(t.prototype,"share_friend_num",{get:function(){return this._share_friend_num},set:function(e){this._share_friend_num=e,this.setStorageSync(StorageType.SHARE_FRIEND_NUM,this._share_friend_num)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shareProgress",{get:function(){return this._shareProgress},set:function(e){this._shareProgress=e,this.setStorageSync(StorageType.SHARE_PROGRESS,this._shareProgress)},enumerable:!0,configurable:!0}),t.prototype.recoverEnergy=function(){for(;this._energy<GameDefine.MAX_ENERGY&&this.serverTime-this._lastRecoverEnergyTime>=GameDefine.ENERGY_RECOVER_TIME;)this.energy++,this.lastRecoverEnergyTime+=GameDefine.ENERGY_RECOVER_TIME;this._energy>=GameDefine.MAX_ENERGY&&(this.lastRecoverEnergyTime=this.serverTime)},t.prototype.subEnergy=function(e){return void 0===e&&(e=1),this._energy<e?!1:(this._energy>=GameDefine.MAX_ENERGY&&this._energy-e<GameDefine.MAX_ENERGY&&(this.lastRecoverEnergyTime=this.serverTime),this.energy-=e,!0)},t.prototype.addEnergy=function(e){void 0===e&&(e=1),this.energy+=e,this.energy<GameDefine.MAX_ENERGY?this.lastRecoverEnergyTime+=GameDefine.ENERGY_RECOVER_TIME:this.lastRecoverEnergyTime=this.serverTime},Object.defineProperty(t.prototype,"noticetime",{get:function(){return this._noticetime},set:function(e){this._noticetime=e,this.setStorageSync(StorageType.NOTICE_TIME,this._noticetime)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"megicnum",{get:function(){return this._megicnum},set:function(e){this._megicnum=e,this.setStorageSync(StorageType.MEGIC_NUM,this._megicnum)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nowSkinId",{get:function(){return this._nowSkinId},set:function(e){this._nowSkinId=e,this.setStorageSync(StorageType.NOW_SKIN,this._nowSkinId)},enumerable:!0,configurable:!0}),t.prototype.addisgetachieve=function(e){this.isgetachieve.push(e),this.setStorageSync(StorageType.ISGETACHIEVE,this.isgetachieve)},t.prototype.addarriveachieve=function(e){this.arriveachieve.push(e),this.setStorageSync(StorageType.ISARRIVEACHIEVE,this.arriveachieve)},Object.defineProperty(t.prototype,"videobreak",{get:function(){return this._videobreak},set:function(e){this._videobreak=e,this.setStorageSync(StorageType.VIDEO_BREAK,this._videobreak)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"energy",{get:function(){return this._energy},set:function(e){e<this._energy&&(this.usedenergy+=this._energy-e),this._energy=e,this.sendNotification(NotificationNames.ENERGY_CHANGE),this.setStorageSync(StorageType.ENERGY,this._energy)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"usedenergy",{get:function(){return this._usedenergy},set:function(e){this._usedenergy=e;var t=this.checkAchieve()[1];t.length>0&&egret.setTimeout(function(){MainFacade.getInstance().sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.GET_ACHIEVE,data:t})},this,300),this.setStorageSync(StorageType.USED_ENERGY,this._usedenergy)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"usedgold",{get:function(){return this._usedgold},set:function(e){this._usedgold=e;var t=this.checkAchieve()[1];t.length>0&&egret.setTimeout(function(){MainFacade.getInstance().sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.GET_ACHIEVE,data:t})},this,300),this.setStorageSync(StorageType.USED_GOLD,this._usedgold)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isgrow1",{get:function(){return this._isgrow1},set:function(e){this._isgrow1=e,this.setStorageSync(StorageType.GROW1,this._isgrow1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isgrow2",{get:function(){return this._isgrow2},set:function(e){this._isgrow2=e,this.setStorageSync(StorageType.GROW2,this._isgrow2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gold",{get:function(){return this._gold},set:function(e){e<this._gold&&(this.usedgold+=this._gold-e),this._gold=e,this.sendNotification(NotificationNames.GOLD_CHANGE),this.setStorageSync(StorageType.GOLD,this._gold)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"diamond",{get:function(){return this._diamond},set:function(e){this._diamond=e,this.sendNotification(NotificationNames.DIAMOND_CHANGE),this.setStorageSync(StorageType.DIAMOND,this._diamond)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastRecoverEnergyTime",{get:function(){return this._lastRecoverEnergyTime},set:function(e){this._lastRecoverEnergyTime=e,this.setStorageSync(StorageType.LAST_RECOVER_ENERGY_TIME,this._lastRecoverEnergyTime)},enumerable:!0,configurable:!0}),t.prototype.saveSkinList=function(){this.setStorageSync(StorageType.SKIN_LIST,this.skinList)},t.prototype.resetData=function(){this.todayVideo=0,this.todayShare=0},Object.defineProperty(t.prototype,"todayVideo",{get:function(){return this._today_video},set:function(e){this._today_video=e,this.setStorageSync(StorageType.TODAY_VIDEO,this._today_video)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"todayShare",{get:function(){return this._today_share},set:function(e){this._today_share=e,this.setStorageSync(StorageType.TODAY_SHARE,this._today_share)},enumerable:!0,configurable:!0}),t.prototype.checkAchieve=function(){for(var e=MainFacade.getInstance().retrieveProxy(ConfigProxy.NAME),t=e.getTable(ConfigProxy.ACHIEVE),i=!1,o=[],n=0;n<t.length;n++){var s=t[n];-1==this.isgetachieve.indexOf(s.id)&&(1==s.type?this.level+1>=s.aim&&(i=!0,-1==this.arriveachieve.indexOf(s.id)&&o.push(s.id)):2==s.type&&this.usedenergy>=s.aim&&(i=!0,-1==this.arriveachieve.indexOf(s.id)&&o.push(s.id)))}return[i,o]},t.NAME="UserProxy",t}(puremvc.Proxy);__reflect(UserProxy.prototype,"UserProxy");var AldUtil=function(){function e(){}return e.adldot=function(e,t){},e.getUser=function(){return MainFacade.getInstance().retrieveProxy(UserProxy.NAME)},e.aldStart=function(e,t){NativeManager.umengStartGate("第"+e+"章")},e.aldRunBuff=function(e,t,i){window.wx&&this.getUser().needDot&&window.wx.aldStage.onRunning({stageId:e+"."+t,stageName:"第"+e+"章-第"+t+"关",userId:ToolUtil.uid,event:"tools",params:{itemName:i}})},e.aldRunRevive=function(e,t){window.wx&&this.getUser().needDot&&window.wx.aldStage.onRunning({stageId:e+"."+t,stageName:"第"+e+"章-第"+t+"关",userId:ToolUtil.uid,event:"revive",params:{itemName:"复活"}})},e.aldEnd=function(e,t,i){i?NativeManager.umengFinishGate("第"+e+"章"):NativeManager.umengFailGate("第"+e+"章-第"+t+"关")},e}();__reflect(AldUtil.prototype,"AldUtil");var DisplayUtil=function(){function e(){}return e.removeAll=function(e){for(;e.numChildren>0;)e.removeChildAt(0)},e.createBone=function(e,t){var i=this;void 0===t&&(t=!1);var o=this;return new Promise(function(t,n){return __awaiter(i,void 0,void 0,function(){var i,n=this;return __generator(this,function(s){return i=dragonBones.EgretFactory.factory,null!=i.getDragonBonesData(e)?t(i):RES.getResAsync(e+"_zip",function(s){return __awaiter(n,void 0,void 0,function(){var n,a,r,h,l;return __generator(this,function(c){switch(c.label){case 0:return[4,JSZip.loadAsync(s)];case 1:return n=c.sent(),console.log(n),[4,n.file(e+"_ske.json").async("text")];case 2:return a=c.sent(),a=JSON.parse(a),[4,n.file(e+"_tex.json").async("text")];case 3:return r=c.sent(),[4,n.file(e+"_tex.png").async("base64")];case 4:return h=c.sent(),l="data:image/png;base64,"+h,o.loadBase64(l).then(function(o){if(o){var n=new egret.Texture;n._setBitmapData(o),i.parseDragonBonesData(a,e),i.parseTextureAtlasData(JSON.parse(r),n,e),t(i)}}),[3,5];case 5:return[2]}})})},this),[2]})})})},e.clearAnimBones=function(e){if(e){dragonBones.WorldClock.clock.remove(e.armature),e.parent&&e.parent.removeChild(e);for(var t in e.animation.animations)delete e.animation.animations[t];e.animation.stop(),e.animation.reset(),e.armature.clock.remove(e.armature),e.armature.dispose(),e.dbClear(),e.dispose(!0),e.dispose(!1)}},e.loadBase64=function(e){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(o){return t=new egret.ImageLoader,t.load(e),i=this,[2,new Promise(function(o,n){var s=function(){var e=t.data?t.data:t.response;t.removeEventListener(egret.Event.COMPLETE,s,i),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,a,i),o(e)},a=function(){var t=new RES.ResourceManagerError(1001,e);n(t)};t.addEventListener(egret.Event.COMPLETE,s,i),t.addEventListener(egret.IOErrorEvent.IO_ERROR,a,i)})]})})},e.clear=function(e){for(var t in e.boneTimelines){for(var i=0,o=e.boneTimelines[t];i<o.length;i++){var n=o[i];n.returnToPool()}delete e.boneTimelines[t]}for(var t in e.surfaceTimelines){for(var s=0,a=e.surfaceTimelines[t];s<a.length;s++){var n=a[s];n.returnToPool()}delete e.surfaceTimelines[t]}for(var t in e.slotTimelines){for(var r=0,h=e.slotTimelines[t];r<h.length;r++){var n=h[r];n.returnToPool()}delete e.slotTimelines[t]}for(var t in e.constraintTimelines){for(var l=0,c=e.constraintTimelines[t];l<c.length;l++){var n=c[l];n.returnToPool()}delete e.constraintTimelines[t]}for(var t in e.animationTimelines){for(var u=0,p=e.animationTimelines[t];u<p.length;u++){var n=p[u];n.returnToPool()}delete e.animationTimelines[t]}for(var t in e.boneCachedFrameIndices)delete e.boneCachedFrameIndices[t];for(var t in e.slotCachedFrameIndices)delete e.slotCachedFrameIndices[t];null!==e.actionTimeline&&e.actionTimeline.returnToPool(),null!==e.zOrderTimeline&&e.zOrderTimeline.returnToPool(),e.frameIntOffset=0,e.frameFloatOffset=0,e.frameOffset=0,e.frameCount=0,e.playTimes=0,e.duration=0,e.scale=1,e.fadeInTime=0,e.cacheFrameRate=0,e.name="",e.cachedFrames.length=0,e.actionTimeline=null,e.zOrderTimeline=null,e.parent=null},e.logTime=function(e,t){var i=egret.getTimer()-e;console.log(t+": cost:"+i)},e.log=function(e){},e.add=function(e){},e.remove=function(e){},e.print=function(){for(var e in this._items)console.log(this._items[e])},e.printArray=function(e){console.log("array length:"+e.length),console.log(e)},e.drawObb=function(e,t){null==e.parent&&Camera.getInstance()._view.addChild(e),e.graphics.clear(),e.graphics.beginFill(0,1),e.graphics.lineStyle(3,16711680);for(var i in t)"0"==i?e.graphics.moveTo(t[i].x,t[i].y):e.graphics.lineTo(t[i].x,t[i].y);e.graphics.lineTo(t[0].x,t[0].y),e.graphics.endFill()},e.clearTexture=function(e){e&&e.texture&&e.texture.dispose()},e.clearLightInfo=function(e){var t=e;t.fEnemy=null,t.tEnemy=null},e._items=[],e.bb="resource/assets/RoleDragon/bb",e.zhizhu="resource/assets/scene0/zhizhu",e.baobao="resource/assets/scene0/baobao",e}();__reflect(DisplayUtil.prototype,"DisplayUtil");var GameDefine=function(){function e(){}return e.MAX_ENERGY=10,e.MAX_LEVEL=23,e.ENERGY_RECOVER_TIME=3e5,e.SIGN_REWARD_COUNTS=[500,1e3,3,500,500,500,5],e.SIGN_REWARD_TYPE=[0,0,1,0,0,0,1],e}();__reflect(GameDefine.prototype,"GameDefine");var EffectUrl=function(){function e(){}return e.Dian_EFF=["scene5_json.cd0001","scene5_json.cd0002","scene5_json.cd0003","scene5_json.cd0004","scene5_json.cd0005","scene5_json.cd0006","scene5_json.cd0007","scene5_json.cd0008","scene5_json.cd0009","scene5_json.cd0010","scene5_json.cd0011","scene5_json.cd0012","scene5_json.cd0013","scene5_json.cd0014","scene5_json.cd0015","scene5_json.cd0016","scene5_json.cd0017","scene5_json.cd0018","scene5_json.cd0019","scene5_json.cd0020","scene5_json.cd0021"],e.ShaLou_EFF=["scene5_json.sl0001","scene5_json.sl0002","scene5_json.sl0003","scene5_json.sl0004","scene5_json.sl0005","scene5_json.sl0006","scene5_json.sl0007","scene5_json.sl0008","scene5_json.sl0009","scene5_json.sl00010","scene5_json.sl0011","scene5_json.sl0012","scene5_json.sl0013"],e.FIRE_EFF=["scene7_json.00001","scene7_json.00002","scene7_json.00003","scene7_json.00004","scene7_json.00005","scene7_json.00006","scene7_json.00007","scene7_json.00008","scene7_json.00009","scene7_json.00010","scene7_json.00011","scene7_json.00012","scene7_json.00013","scene7_json.00014","scene7_json.00015","scene7_json.00016","scene7_json.00017","scene7_json.00018"],e.SMOG_EFF=["scene7_json.y01","scene7_json.y02","scene7_json.y03","scene7_json.y04","scene7_json.y05","scene7_json.y06"],e.BAOZHA_EFF=["scene9_json.bz01","scene9_json.bz02","scene9_json.bz03","scene9_json.bz04","scene9_json.bz05","scene9_json.bz06","scene9_json.bz07","scene9_json.bz08","scene9_json.bz09","scene9_json.bz10","scene9_json.bz11","scene9_json.bz12","scene9_json.bz13","scene9_json.bz14","scene9_json.bz15"],e.JTL_EFF=["scene16_json.jtl1","scene16_json.jtl2","scene16_json.jtl3","scene16_json.jtl4"],e.FIRE_EFF1=["scene20_json.00001","scene20_json.00002","scene20_json.00003","scene20_json.00004","scene20_json.00005","scene20_json.00006","scene20_json.00007","scene20_json.00008","scene20_json.00009","scene20_json.00010","scene20_json.00011","scene20_json.00012","scene20_json.00013","scene20_json.00014","scene20_json.00015","scene20_json.00016","scene20_json.00017","scene20_json.00018"],e}();__reflect(EffectUrl.prototype,"EffectUrl");var Lang=function(){function e(){}return e.getItem=function(e){return this.dic[e]},e.replace=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var o in t)e=e.replace("{"+o+"}",t[o]);return e},e.dic={},e}();__reflect(Lang.prototype,"Lang");var NativeManager=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.getPlatform=function(){return egret.ExternalInterface.call("getPlatform",""),new Promise(function(t,i){egret.ExternalInterface.addCallback("getPlatform",function(i){console.log("回调  getPlatform:",i),"Android"==i?e.platform=NativeType.NativeAndroid:"iOS"==i&&(e.platform=NativeType.NativeIOS),t()})})},e.NativeCallBackSetup=function(){egret.ExternalInterface.addCallback("RewardVideoSuccess",function(){console.log("视频播放成功"),e.videocallobj&&e.videosucceedCallback&&e.videosucceedCallback.call(e.videocallobj)}),egret.ExternalInterface.addCallback("RewardVideoLoadFail",function(){PopUpManager.toast("广告拉取失败~"),alert("广告拉取失败")}),egret.ExternalInterface.addCallback("RewardVideoFail",function(){PopUpManager.toast("广告播完才能获得奖励哦~"),alert("广告拉取失败"),e.videocallobj&&e.videofailCallback&&e.videofailCallback.call(e.videocallobj)}),egret.ExternalInterface.addCallback("playRewardVideoLoading",function(){PopUpManager.toast("广告加载中~"),console.log("广告加载中~")}),egret.ExternalInterface.addCallback("deviceId",function(e){console.log("deviceId:",e)}),egret.ExternalInterface.addCallback("playRewardVideoStartShow",function(){e.playRewardVideoStartShow()}),egret.ExternalInterface.addCallback("closeFullScreen",function(){console.log("点击跳过全屏广告")}),egret.ExternalInterface.addCallback("playRewardVideoCloseShow",function(){e.playRewardVideoCloseShow()})},e.getDeviceId=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return egret.ExternalInterface.call("getDeviceId",""),[2,new Promise(function(t,i){egret.ExternalInterface.addCallback("getDeviceId",function(i){console.log("回调  uuid:",i),e.uuid=i,t()})})]})})},e.playVideo=function(t,i,o){void 0===t&&(t=null),void 0===i&&(i=null),void 0===o&&(o=null),e.videocallobj=t,e.videosucceedCallback=i,e.videofailCallback=o,egret.ExternalInterface.call("playVideo","")},e.showBannerAdForFrame=function(e){egret.ExternalInterface.call("showBannerAdForFrame",e)},e.closeBanner=function(){egret.ExternalInterface.call("closeBanner","")},e.expressInterstitial=function(){egret.ExternalInterface.call("expressInterstitial","")},e.closeExpressInterstitial=function(){egret.ExternalInterface.call("closeExpressInterstitial","")},e.playFullScreen=function(){egret.ExternalInterface.call("playFullScreen","")},e.dotSend=function(e){void 0===e&&(e=null),egret.ExternalInterface.call("tabPoint",e)},e.umengStartGate=function(e){egret.ExternalInterface.call("umengStartGate",e)},e.umengFinishGate=function(e){egret.ExternalInterface.call("umengFinishGate",e)},e.umengFailGate=function(e){egret.ExternalInterface.call("umengFailGate",e)},e.umengLevelUp=function(e){egret.ExternalInterface.call("umengLevelUp",e)},e.ttRigisterAndjihuoDot=function(){egret.ExternalInterface.call("ttRigisterAndjihuoDot","")},e.ttLoginDot=function(e){egret.ExternalInterface.call("ttLoginDot","")},e.applicationDidBecomeActive=function(){console.log("applicationDidBecomeActiveapplicationDidBecomeActive")},e.applicationDidEnterBackground=function(){console.log("applicationDidEnterBackgroundapplicationDidEnterBackground")},e.playRewardVideoStartShow=function(){},e.playRewardVideoCloseShow=function(){},e.initTA=function(){egret.ExternalInterface.call("initTA","")},e.login=function(e){egret.ExternalInterface.call("login",e)},e.authorizeOpenID=function(e){egret.ExternalInterface.call("authorizeOpenID",e)},e.track=function(e){egret.ExternalInterface.call("track",e)},e.userAdd=function(e){egret.ExternalInterface.call("track",e)},e.userSet=function(e){egret.ExternalInterface.call("userSet",e)},e}();__reflect(NativeManager.prototype,"NativeManager");var NativeType=function(){function e(){}return e.NativeAndroid="app_android",e.NativeLocal="NativeLocal",e.NativeIOS="app_ios",e}();__reflect(NativeType.prototype,"NativeType");var ToolUtil=function(){function e(){}return e.getStorageSync=function(t){return e.local_storage[t]},e.getToday=function(e){var t=new Date(e),i=t.getFullYear().toString()+t.getMonth().toString()+t.getDate();
return i},e.getMonDate=function(e){var t=new Date(e),i=t.getDay(),o=t.getDate();return 1==i?t:(0==i?t.setDate(o-6):t.setDate(o-i+1),t)},Object.defineProperty(e,"bulletName",{get:function(){return e.index++,"bullet_"+e.index},enumerable:!0,configurable:!0}),e.compareVersion=function(e,t){e=e.split("."),t=t.split(".");for(var i=Math.max(e.length,t.length);e.length<i;)e.push("0");for(;t.length<i;)t.push("0");for(var o=0;i>o;o++){var n=Math.ceil(e[o]),s=Math.ceil(t[o]);if(n>s)return 1;if(s>n)return-1}return 0},e.shareInfo=function(t,i,o){return void 0===o&&(o=null),__awaiter(this,void 0,void 0,function(){var n,s,a,r,h,l;return __generator(this,function(c){switch(c.label){case 0:return n=(new Date).getTime(),[4,platform.getShareInfo({shareTicket:i})];case 1:return s=c.sent(),a=platform.parseEntry(s.encryptedData,s.iv,e.APPID,e.SESSION_KEY),r=e.getStorageSync("sharetask"),console.log(r),h=!0,l={},r?(l=JSON.parse(r),l[a.openGId]?n-Number(l[a.openGId])>=36e5&&(h=!1):h=!1):h=!1,0==h?(l[a.openGId]=n,o&&o.apply(this,[t])):platform.showToast({title:"请不要频繁分享到一个群哦~",icon:"none"}),[2]}})})},e.shareAppWithoutBack=function(t){e.FROM_SHARE=!1,platform.shareAppMessage({title:t.title,imageUrl:t.img_url,query:t.query,success:function(e){},fail:function(e){},complete:function(e){}})},e.shareApp=function(t,i,o,n,s,a){void 0===i&&(i=null),void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a=null),e.FROM_SHARE=!0,e.FROM_SHARE_SUCCESS_INFO||(e.FROM_SHARE_SUCCESS_INFO=new ShareCallBack),e.FROM_SHARE_SUCCESS_INFO.success=i,e.FROM_SHARE_SUCCESS_INFO.success_parent=o,e.FROM_SHARE_SUCCESS_INFO.info=t;var r=MainFacade.getInstance().retrieveProxy(UserProxy.NAME);e.FROM_SHARE_SUCCESS_INFO.time=r.serverTime,platform.shareAppMessage({title:t.title,imageUrl:t.img_url,query:t.query,success:function(e){t.callBack;var i="";void 0!=e.shareTickets&&void 0!=e.shareTickets[0]&&(i=e.shareTickets[0])},fail:function(e){},complete:function(e){}})},e.shareFail=function(){platform.showModal({title:"分享失败",content:"分享失败，请分享到不同的群",showCancel:!0,cancelText:"取消",confirmText:"确定",success:function(t){t.confirm?e.shareApp(e.FROM_SHARE_SUCCESS_INFO.info,e.FROM_SHARE_SUCCESS_INFO.success,e.FROM_SHARE_SUCCESS_INFO.success_parent,e.FROM_SHARE_SUCCESS_INFO.failCallBack):e.FROM_SHARE_SUCCESS_INFO.failCallBack&&e.FROM_SHARE_SUCCESS_INFO.failCallBack.call(e.FROM_SHARE_SUCCESS_INFO.success_parent)},fail:function(){e.FROM_SHARE_SUCCESS_INFO.failCallBack&&e.FROM_SHARE_SUCCESS_INFO.failCallBack.call(e.FROM_SHARE_SUCCESS_INFO.success_parent)},complete:function(){}})},e.getShareAppMessageInfo=function(t){var i=this.getShareInfo(t);return{title:i.content,img_url:i.img_url,query:"from="+e.uid+"&shareid=share_"+i.shareId}},e.shareTipInfo=function(t,i){return void 0===i&&(i=null),__awaiter(this,void 0,void 0,function(){var o,n,s,a,r,h;return __generator(this,function(l){switch(l.label){case 0:return o=(new Date).getTime(),[4,platform.getShareInfo({shareTicket:t})];case 1:return n=l.sent(),console.log(n),s=platform.parseEntry(n.encryptedData,n.iv,e.APPID,e.SESSION_KEY),console.log(s),a=platform.getStorageSync("sharetask"),console.log(a),r=!0,h={},a?(h=JSON.parse(a),h[s.openGId]?o-Number(h[s.openGId])>=72e5&&(r=!1):r=!1):r=!1,0==r?(h[s.openGId]=o,platform.setStorageSync("sharetask",JSON.stringify(h)),i&&i.apply(this,[r])):i&&i.apply(this,[r]),[2]}})})},e.storageInfo=function(e,t){platform.setStorageSync(e,t)},e.getShareInfo=function(t){var i=t,o=Math.floor(Math.random()*i.length),n=i[o].shareInfoId,s=(encodeURIComponent(e.share.shareInfo[n].img_url),i[o].shareId),a=MainFacade.getInstance().retrieveProxy(UserProxy.NAME);e.share_point_key=e.APPID+"_"+e.uid+"_"+a.serverTime;var r=e.share.shareInfo[n].img_url;return{content:e.share.shareInfo[n].content,img_url:r,shareId:s}},e.shareTracking=function(t){var i=new HttpSender,o="https://click.xyx.bkdau.cn/share/"+e.APPID+"/"+t;i.sendURL(o,{})},e.checkEnable=function(e){if(1==e.isLegal)return!1;if(0==e.isBlackIp){if(""==e.limit_time)return!0;var t=!1,i=JSON.parse(e.limit_time),o=new Date,n=o.getHours();console.log(i);for(var s in i)i[s][0]<n&&i[s][1]>n&&(t=!0);return t}var t=!1;if(""==e.limit_time)return!1;var i=JSON.parse(e.limit_time),o=new Date,n=o.getHours();console.log(n,i);for(var s in i)console.log(n,i[s][0],i[s][1]),i[s][0]<n&&i[s][1]>n&&(t=!0);return t?!0:!1},e.printRect=function(e,t){var i=new egret.Shape;i.graphics.beginFill(0),i.graphics.drawRect(t.x,t.y,t.width,t.height),i.graphics.endFill(),e.addChild(i),egret.setTimeout(function(){i.parent&&i.parent.removeChild(i)},this,500)},e.clearStage=function(e){for(;e.numChildren>0;)e.removeChildAt(0)},e.checkUpdateVer=function(){var e=platform.getUpdateManager();e&&e.onUpdateReady(function(){e.applyUpdate()})},e.rotation2radius=function(e){return Math.PI*e/180},e.replace=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var o in t)e=e.replace("{"+o+"}",t[o]);return e},e.anglePower=function(e,t,i){return e*t*i*i},e.isLineSegmentIntr=function(e,t,i,o){var n=(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x),s=(e.x-o.x)*(t.y-o.y)-(e.y-o.y)*(t.x-o.x);if(n*s>0)return!1;var a=(i.x-e.x)*(o.y-e.y)-(i.y-e.y)*(o.x-e.x),r=a+n-s;return a*r>0?!1:!0},e.checkLineHit=function(t,i,o){var n;for(var s in o)for(var a=0,r=o[s];a<r.length;a++)if(!(e.checkSpaceBetween2Point(t,r[a])>500)&&r[a+1]&&(n=e.checkDot(t,i,r[a],r[a+1]),n.hit))return n;return{hit:!1}},e.checkSpaceBetween2Point=function(e,t){var i=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y),o=Math.sqrt(i);return o},e.findSpaceBetween2Point=function(e,t,i,o){var n=(e-i)*(e-i)+(t-o)*(t-o),s=Math.sqrt(n);return s},e.countLinesRota=function(e,t,i,o){var n=(t.y-e.y)/(t.x-e.x),s=(o.y-i.y)/(o.x-i.x);o.x==i.x&&(s=Math.PI/2),t.x==e.x&&(n=Math.PI/2);var a=(s-n)/(1+n*s),r=Math.atan(Math.abs(a));return r},e.checkDot=function(e,t,i,o){var n=(t.y-e.y)*(o.x-i.x)-(e.x-t.x)*(i.y-o.y);if(0==n)return{hit:!1,x:0,y:0};var s=((t.x-e.x)*(o.x-i.x)*(i.y-e.y)+(t.y-e.y)*(o.x-i.x)*e.x-(o.y-i.y)*(t.x-e.x)*i.x)/n,a=-((t.y-e.y)*(o.y-i.y)*(i.x-e.x)+(t.x-e.x)*(o.y-i.y)*e.y-(o.x-i.x)*(t.y-e.y)*i.y)/n;return(s-e.x)*(s-t.x)<=0&&(a-e.y)*(a-t.y)<=0&&(s-i.x)*(s-o.x)<=0&&(a-i.y)*(a-o.y)<=0?{hit:!0,x:s,y:a,c:i,d:o}:{hit:!1,x:0,y:0}},e.getChar=function(e,t){var i=new egret.ByteArray;return i.writeUTFBytes(e),i.length<t?e:(i.position=0,i.readUTFBytes(t)+"...")},e.print=function(e){e instanceof Object?console.log("log from racing ===>"+JSON.stringify(e)):console.log("log from racing ===>"+e)},e.transMiniSeconds=function(e,t){void 0===t&&(t="mm:ss:msms");var i=Math.floor(e/1e3/60),o="";o=10>i?"0"+i:i.toString();var n=Math.floor(e/1e3),s="";s=10>n?"0"+n:n.toString();var a=Math.floor(e%1e3),r="";return r=10>a?"0"+a:a.toString(),t.replace("mm",o).replace("ss",s).replace("msms",r)},e.onError=function(e){console.log("play video onerror")},e.randInt=function(e,t){return Math.floor(Math.random()*Math.abs(t-e)+Math.min(e,t))},e.randomFloat=function(e,t){return Math.random()*(t-e)+e},e.getBulletFrameNameByIndex=function(e,t){var i=t.length,o=String(e).length;return t.substring(0,i-o)+e},e.findMapUrlById=function(t){return e.isB?InterfaceIO.ASSET_HEAD+"xiaoyouxi/runhit/mapB/"+t:InterfaceIO.ASSET_HEAD+"xiaoyouxi/runhit/map808/"+t},e.mtadot=function(e,t,i,o){},e.bezier=function(e,t,i,o,n){return n||(n=new egret.Point),n.x=(1-e)*(1-e)*t.x+2*e*(1-e)*i.x+e*e*o.x,n.y=(1-e)*(1-e)*t.y+2*e*(1-e)*i.y+e*e*o.y,n},e.sendUserCloud=function(e){window.wx&&window.wx.setUserCloudStorage({KVDataList:[{key:"uidlevel",value:e+""}],success:function(e){console.log("======successs",e)},fail:function(e){console.log("=======false",e)}})},e.timeToString=function(e,t){void 0===t&&(t=!0),0>e&&(e=0);var i=Math.floor(e/3600),o=Math.floor((e-3600*i)/60),n=e%60;return t?(i>9?i:"0"+i)+"：":""+(o>9?o:"0"+o)+"："+(n>9?n:"0"+n)},e.isSameDay=function(e,t){var i=new Date,o=new Date;return i.setTime(e),o.setTime(t),i.getDate()===o.getDate()&&i.getMonth()===o.getMonth()&&i.getFullYear()===o.getFullYear()},e.countDay=function(e,t){var i=new Date(e),o=new Date(t),n=Math.abs(o.getTime()-i.getTime());return Math.floor(n/864e5)},Object.defineProperty(e,"isShareOrVideo",{get:function(){var t=MainFacade.getInstance().retrieveProxy(UserProxy.NAME);return e.playing==e.isVideo?t.todayVideo>=e.max_video_count&&(t.todayVideo=0,e.playing=e.isShare):t.todayShare>=e.max_share_count&&(t.todayShare=0,e.playing=e.isVideo),e.playing},enumerable:!0,configurable:!0}),e.setShareOrVideoIcon=function(e,t,i){t?e.source=t:e.source="mainUI_json.BY_JKGG_05"},e.VERSION="1.0.11",e.APPID="babyrisk",e.SESSION_KEY="",e.GAME_ID="",e.EMPTY_SHARE_COUNT=20,e.isB=!1,e.time=0,e.OFFLINE_SPACE=600,e.FROM_SHARE=!1,e.FROM_TRY_OTHER_GAME=!1,e.music=!0,e.SHARE_ENABLED=!0,e.SHARE_CONFIG={},e.OPENNING=!0,e.SURVIVE_NUM=0,e.FRAME_RATE=60,e.ORIGN_FRAME_RATE=60,e.SPEED_SCALE=1,e.FRAME_DELAY=16,e.FRAME_COUNT=0,e.index=0,e.blast=5,e.share_point_key="",e.refreshBanner=200,e.uid="",e.token="",e.local_storage={},e.PLAY_VIDEO_ING=!1,e.isX=!1,e.isAndiord=!1,e.renderCanvas=!1,e.px=.5,e.isPad=!0,e.xSpace=48,e.isMusicOpen=!0,e.isEffectOpen=!0,e.NEED_SAVE_DATA=!1,e.loadTime=0,e.videoId="adunit-e92f3e79581e503f",e.scene="",e.qudao="",e.bottomTip=[],e.isFirstPop=!1,e.isShareBack=!1,e.deviceId="0016781921211211231548",e.isShare=1,e.isVideo=2,e.playing=1,e.max_video_count=3,e.max_share_count=2,e.noticetime=0,e.showAchieve=!1,e.share={},e}();__reflect(ToolUtil.prototype,"ToolUtil");var txSocket=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setupTXSocket=function(e){var t=this;console.log("setupTXSocket");var i={openId:e,gameId:"obg-dx1304xc",secretKey:"dfdf8cbd557ea9f665f9ec5512a59f6fed3076ed"},o={url:"dx1304xc.wxlagame.com",reconnectMaxTimes:5,reconnectInterval:1e3,resendInterval:1e3,resendTimeout:1e4};MGOBE.Listener.init(i,o,function(e){console.log("初始化结果:",e),t.startRunSocket()})},e.prototype.startRunSocket=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.startHeart(),[4,this.checkIsInRoom()];case 1:return e=t.sent(),e?console.log("当前用户所在房间:",e):console.log("当前没有加入任何房间"),[2]}})})},e.prototype.initHeart=function(){this.heartTime=new egret.Timer(1e3,0),this.heartTime.addEventListener(egret.TimerEvent.TIMER,this.heartStatusUpdate,this)},e.prototype.startHeart=function(){this.heartTime?(this.heartTime.running||this.heartTime.start(),this.heartStatusUpdate()):(this.initHeart(),this.startHeart())},e.prototype.clearHeart=function(){this.heartTime&&(this.heartTime.running&&this.heartTime.stop(),this.heartTime.removeEventListener(egret.TimerEvent.TIMER,this.heartStatusUpdate,this),this.heartTime=null)},e.prototype.heartStatusUpdate=function(){if(this.currentRoom&&!this.currentRoom.networkState.COMMON&&!this.currentRoom.networkState.RELAY){console.log("heart");var e={},t=JSON.stringify(e);this.addRoomListener();var i={recvType:MGOBE.ENUM.RecvType.ROOM_SOME,recvPlayerList:[this.openId],msg:t};this.currentRoom.sendToClient(i,function(e){0==e.code||90003==e.code})}},e.prototype.addRoomListener=function(){MGOBE.Listener.remove(this.currentRoom),this.currentRoom.onJoinRoom=function(e){console.log("onJoinRoom:",e)},this.currentRoom.onLeaveRoom=function(e){console.log("onLeaveRoom:",e)},this.currentRoom.onDismissRoom=function(e){console.log("onDismissRoom:",e)},this.currentRoom.onUpdate=function(e){console.log("onUpdate:",e)},this.currentRoom.onRecvFromClient=function(e){if(console.log("onRecvFromClient:",e),e.data){var t=JSON.parse(e.data.msg);"A"==t.msgT}},MGOBE.Listener.add(this.currentRoom)},e.prototype.checkIsInRoom=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=new MGOBE.Room,[2,new Promise(function(t,i){e.getRoomDetail(function(i){console.log("房间详情:",i),0==i.code?(e.initRoom(i.data.roomInfo),console.log("房间id:",i.data.roomInfo.id),t(e)):t()})})]})})},e.prototype.createRoom=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,o=this;return __generator(this,function(n){switch(n.label){case 0:return console.log("准备创建房间"),this.currentRoom=new MGOBE.Room,[4,this.getRoomDetail(this.currentRoom)];case 1:return e=n.sent(),console.log("准备创建房间:",e),t={name:this.openId,customPlayerStatus:1,customProfile:"https://xxx.com/icon.png"},i={roomName:"房间名",maxPlayers:4,roomType:"1V1",isPrivate:!1,customProperties:"WAIT",playerInfo:t},[2,new Promise(function(e,t){o.currentRoom.createRoom(i,function(t){console.log("创建房间的结果：",t),0===t.code?(o.currentRoom.initRoom(t.data.roomInfo),o.addRoomListener(),e(!0)):e(t.code)})})]}})})},e.prototype.getRoomDetail=function(e){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(i){return[2,new Promise(function(i,o){e.getRoomDetail(function(e){console.log("房间详情:",e),0===e.code?(t.currentRoom.initRoom(e.data.roomInfo),console.log("房间id:",e.data.roomInfo.id),i(!0)):i(e.code)})})]})})},e.prototype.backCurRoom=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(i){return e=new MGOBE.Room,[2,new Promise(function(i,o){e.getRoomDetail(function(o){console.log("房间详情:",o),0===o.code?(e.initRoom(o.data.roomInfo),t.currentRoom=e,t.addRoomListener(),console.log("房间id:",o.data.roomInfo.id),i(!0)):i(o.code)})})]})})},e.prototype.quitCurRoom=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=new MGOBE.Room,[2,new Promise(function(t,i){e.leaveRoom({},function(e){console.log("房间详情:",e),0===e.code?(t(!0),MGOBE.Listener.clear()):t(e.code)})})]})})},e.prototype.matchRoom=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,o=this;return __generator(this,function(n){return e=new MGOBE.Room,t={name:"",customPlayerStatus:1,customProfile:"https://xxx.com/icon.png"},i={playerInfo:t,maxPlayers:2,roomType:"1V1"},[2,new Promise(function(t,n){e.matchRoom(i,function(i){0==i.code?(t(!0),console.log("匹配成功",i.code),e.initRoom(i.data.roomInfo),o.currentRoom=e,o.addRoomListener()):t(i.code)})})]})})},e.prototype.joinRoomForId=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,o,n=this;return __generator(this,function(s){return t=new MGOBE.Room,t.initRoom({id:e}),i={name:"",customPlayerStatus:1,customProfile:"https://xxx.com/icon.png"},o={playerInfo:i},[2,new Promise(function(e,i){t.joinRoom(o,function(i){0==i.code?(console.log("joinRoom:",i),t.initRoom(i.data.roomInfo),n.currentRoom=t,n.addRoomListener(),e(!0)):e(i.code)})})]})})},e}();__reflect(txSocket.prototype,"txSocket");var WxInfo=function(){function e(){}return e.isScopeUserInfo=!0,e}();__reflect(WxInfo.prototype,"WxInfo");var AchieveView=function(e){function t(){return e.call(this,"AchieveSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(AchieveView.prototype,"AchieveView");var AchieveViewMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.initList(),ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this)},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.initList=function(){this._myCollection=new eui.ArrayCollection;var e=this.config.getTable(ConfigProxy.ACHIEVE),t=this;e.sort(function(e,i){var o=0,n=0;if(-1!=t.user.isgetachieve.indexOf(e.id))o=2;else{var s=0;switch(e.type){case 1:s=t.user.level+1;break;case 2:s=t.user.usedenergy;break;case 3:s=t.user.usedgold}o=s<e.aim?1:0}if(-1!=t.user.isgetachieve.indexOf(i.id))n=2;else{var s=0;switch(i.type){case 1:s=t.user.level+1;break;case 2:s=t.user.usedenergy;break;case 3:s=t.user.usedgold}n=s<i.aim?1:0}return o-n}),console.log("数据源为",e),this._myCollection.replaceAll(e),this.view.achieveList.itemRenderer=AchieveItemRender,this.view.achieveList.dataProvider=this._myCollection},t.prototype.onCloseBtn=function(e){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="AchieveViewMediator",t}(BaseMediator);__reflect(AchieveViewMediator.prototype,"AchieveViewMediator");var AchieveItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="AchieveItem",t.currentState="noget",ClickBase.getInstance().on(t.get,t.onGet,t),ClickBase.getInstance().on(t.noget,t.onNoGet,t),t.user=MainFacade.getInstance().retrieveProxy(UserProxy.NAME),t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.achievename.text=this.data.title,this.des.text=this.data.content,this.num.text=this.data.num+"","egy"==this.data.item?this.icon.source="mainUI_json.tili":"coins"==this.data.item&&(this.icon.source="mainUI_json.BY_JSL_07"),this.head.source="windowUI_json."+this.data.iconID,this.setProgress(this.data.type)},t.prototype.setProgress=function(e){var t=0;switch(e){case 1:t=this.user.level+1;break;case 2:t=this.user.usedenergy;break;case 3:t=this.user.usedgold}return t<this.data.aim?(this.des.text+="("+t+"/"+this.data.aim+")",this.currentState="noget"):(this.des.text+="("+this.data.aim+"/"+this.data.aim+")",this.currentState="get"),-1!=this.user.isgetachieve.indexOf(this.data.id)?void(this.currentState="isget"):void 0},t.prototype.onGet=function(){var e={};"egy"==this.data.item?(this.user.energy+=this.data.num,e.type=ITEM_REWARD_TYPE.ENERGY):"coins"==this.data.item&&(this.user.gold+=this.data.num,e.type=ITEM_REWARD_TYPE.COIN),e.value=this.data.num,this.currentState="isget",e.beginPos=this.localToGlobal(this.get.x-30,this.get.y-15),MainFacade.getInstance().sendNotification(NotificationNames.SHOW_FLY_EFF,e),this.user.addisgetachieve(this.data.id),MainFacade.getInstance().sendNotification(NotificationNames.UPDATEACHIEVEICON),PopUpManager.toast("领取成功")},t.prototype.onNoGet=function(){PopUpManager.toast("暂未达成此成就")},t.prototype.onClose=function(){DisplayUtil.removeAll(this),ClickBase.getInstance().off(this.get),ClickBase.getInstance().off(this.noget)},t}(eui.ItemRenderer);__reflect(AchieveItemRender.prototype,"AchieveItemRender");var AnnouncementView=function(e){function t(){return e.call(this,"AnnouncementSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(AnnouncementView.prototype,"AnnouncementView");var AnnouncementViewMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this),this.view.order.addEventListener(egret.TouchEvent.TOUCH_END,this.onOrder,this),this.view.context.text=ToolUtil.announcement,this.user.noticetime=ToolUtil.noticetime},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.onCloseBtn=function(e){PopUpManager.hide(this.view)},t.prototype.onOrder=function(){var e=this;platform.requestSubscribeMessage({tmplIds:["H6cOyNnX7Gzj4OM1MOyfRE5FmZvtuzZzBidUYP1p9dA"],success:function(t){console.log("success:",t),"accept"==t.H6cOyNnX7Gzj4OM1MOyfRE5FmZvtuzZzBidUYP1p9dA?e.sendSubscribeMessage():PopUpManager.toast("成功订阅才能获取最新关卡咨询")},fail:function(e){console.log("fail:",e)},complete:function(e){console.log("complete:",e)}})},t.prototype.sendSubscribeMessage=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="AnnouncementViewMediator",t}(BaseMediator);__reflect(AnnouncementViewMediator.prototype,"AnnouncementViewMediator");var chipCFG=function(){function e(e){for(var t in e)this[t]=e[t]}return e}();__reflect(chipCFG.prototype,"chipCFG");var BornView=function(e){function t(){return e.call(this,"BornViewSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(BornView.prototype,"BornView");var BornViewMediator=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.view.des.visible=!1,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(0)},t.prototype.loadSub=function(e){var t="scene"+e;console.log("load group:",t);this.loadSubSuccess(t)},t.prototype.loadSubSuccess=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return console.log("loadSubSuccess1"),[4,RES.loadGroup(e)];case 1:return t.sent(),console.log("loadSubSuccess2"),this.view.lightAni.addEventListener(egret.Event.COMPLETE,this.playSceneAin,this),this.view.sceneAni.addEventListener(egret.Event.COMPLETE,this.NextAin,this),this.init(),[2]}})})},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.initRole=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.view.rolebox.visible=!1,this.role=new DragonBase,[4,this.role.initDragon("baobao")];case 1:return t.sent(),this.view.rolebox.addChild(this.role),e=this.view.des.text,this.view.des.visible=!0,egret.setTimeout(this.startAni,this,2500),[2]}})})},t.prototype.init=function(){this.initRole()},t.prototype.startAni=function(){this.view.des.visible=!1,this.view.image.visible=!0,this.view.lightAni.play(0),this.AnimationEndByTimes(this.role,"chusheng",1,this.changeActor,this),this.view.rolebox.visible=!0},t.prototype.changeActor=function(){this.role.play("daiji",0)},t.prototype.playSceneAin=function(){this.view.preBox.visible=!1,this.view.sceneAni.play(1)},t.prototype.NextAin=function(){egret.Tween.get(this.view.rolebox).to({rotation:-35},300).to({y:737.8,x:418.78,rotation:0},300).call(function(){this.view.door.visible=!0,egret.Tween.get(this.view.door).to({y:676.04},550).wait(1e3).call(this.clsoeMyself,this)},this)},t.prototype.clsoeMyself=function(){egret.Tween.removeAllTweens(),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:"0000",alpha:1e-4}),egret.setTimeout(function(){PopUpManager.hide(this.view)},this,500)},t.prototype.AnimationEndByTimes=function(e,t,i,o,n){var s=function(){o.call(n),e.armuture.removeEventListener(dragonBones.EventObject.COMPLETE,s,n)};e.armuture.addEventListener(dragonBones.EventObject.COMPLETE,s,this),e.play(t,i)},t.prototype.typerEffect=function(e,t,i,o,n){void 0===t&&(t=""),void 0===i&&(i=200),void 0===o&&(o=null);for(var s=t.split(""),a=s.length,r=0;a>r;r++)egret.setTimeout(function(){e.appendText(s[Number(this)]),Number(this)>=a-1&&null!=o&&o.call(n)},r,i*r)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this)},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="BornViewMediator",t}(BaseMediator);__reflect(BornViewMediator.prototype,"BornViewMediator");var ClickBase=function(){function e(){this.funList={},this.canclick=!0}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.on=function(t,i,o,n,s,a,r,h){var l=this,c=function(){if(l.canclick||s){l.canclick=!1;var e=(t.parent,0),c=0;t.anchorOffsetX&&(e=t.anchorOffsetX),t.anchorOffsetY&&(c=t.anchorOffsetY),t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,r>=0&&(t.anchorOffsetX=r),h>=0&&(t.anchorOffsetY=h);var u=t.anchorOffsetX-e,p=t.anchorOffsetY-c;if(t.x+=u,t.y+=p,a)t.anchorOffsetX=e,t.anchorOffsetY=c,t.x-=u,t.y-=p,i.call(o,n),l.canclick=!0;else{var d=t.scaleX,g=t.scaleY;egret.Tween.get(t).to({scaleX:.75*d,scaleY:.75*g},80).to({scaleX:1.1*d,scaleY:1.1*g},80).to({scaleX:d,scaleY:g},20).call(function(){t.anchorOffsetX=e,t.anchorOffsetY=c,t.x-=u,t.y-=p,i.call(o,n),l.canclick=!0})}SoundManager.getInstance().playNewEffect(SoundManager.BUTTON)}};t.addEventListener(egret.TouchEvent.TOUCH_TAP,c,this),e.getInstance().funList[t.hashCode]=c},e.prototype.off=function(t){var i=e.getInstance().funList[t.hashCode];e.getInstance().funList[t.hashCode]=null,delete e.getInstance().funList[t.hashCode],t.removeEventListener(egret.TouchEvent.TOUCH_TAP,i,this)},e}();__reflect(ClickBase.prototype,"ClickBase");var DragonBase=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.initDragon=function(e){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(o){switch(o.label){case 0:return e||(e="bb"),this.dragonName=e,t=this,[4,DisplayUtil.createBone(e,!0)];case 1:return t._factory=o.sent(),this.armuture&&(this.removeChild(this.armuture),this.armuture.dispose(),this.armuture=null),this.armuture=this._factory.buildArmatureDisplay(e,e),this.addChild(this.armuture),"bb"==e&&(i=MainFacade.getInstance().retrieveProxy(UserProxy.NAME),this.changeSkinById(i.nowSkinId)),this.addEvent(),[2]}})})},t.prototype.play=function(e,t){this.armuture.animation.play(e,t)},t.prototype.createSlotBitmap=function(e,t){var i=this.armuture.armature.getSlot(e),o=new egret.Bitmap,n=RES.getRes(t);n||(n=RES.getRes("skinUI_json."+e)),o.texture=n,o.x=i.display.x,o.y=i.display.y,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,i.display=o},t.prototype.changeSkinById=function(e){this.createSlotBitmap("q","skinUI_json.q"+e),this.createSlotBitmap("st","skinUI_json.st"+e),this.createSlotBitmap("sza","skinUI_json.sza"+e),this.createSlotBitmap("sya","skinUI_json.sya"+e),this.createSlotBitmap("szb","skinUI_json.szb"+e),this.createSlotBitmap("syb","skinUI_json.syb"+e)},t.prototype.gotoAndStopByProgress=function(e,t){var i=1;t&&(i=t),this.armuture.animation.gotoAndStopByProgress(e,i)},t.prototype.setNewSlot=function(e,t){this.armuture&&(this.armuture.armature.getSlot(e).displayIndex=t)},t.prototype.dbAniPlayCompleted=function(e){},t.prototype.addEvent=function(){this.armuture&&this.armuture.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.dispose,this)},t.prototype.removeEvent=function(){this.armuture&&this.armuture.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.dispose,this)},t.prototype.handleLabelEvent=function(e){console.log("handleLabelEvent:",e)},t.prototype.dispose=function(){this.armuture&&(this.removeEvent(),this.armuture.animation&&this.armuture.animation.stop(),DisplayUtil.clearAnimBones(this.armuture),this.armuture=null,this._factory=null)},t}(eui.Component);__reflect(DragonBase.prototype,"DragonBase");var EnergyShopView=function(e){function t(){return e.call(this,"EnergyShopSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(EnergyShopView.prototype,"EnergyShopView");var EnergyShopViewMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this),ClickBase.getInstance().on(this.view.video_btn,this.onVideo,this),ClickBase.getInstance().on(this.view.get1,this.onGetEnergy,this,1),ClickBase.getInstance().on(this.view.get3,this.onGetEnergy,this,3),ClickBase.getInstance().on(this.view.get5,this.onGetEnergy,this,5),ToolUtil.setShareOrVideoIcon(this.view.sign,"windowUI_json.video","windowUI_json.share")},t.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case NotificationNames.UPDATEICON:ToolUtil.setShareOrVideoIcon(this.view.sign,"windowUI_json.video","windowUI_json.share")}},t.prototype.listNotificationInterests=function(){return[NotificationNames.UPDATEICON]},t.prototype.onGetEnergy=function(e){var t;switch(e){case 1:t=1500;break;case 3:t=4e3;break;case 5:t=6e3}if(this.user.gold<t)PopUpManager.toast("当前金币不足");else{var i={};i.type=ITEM_REWARD_TYPE.ENERGY,i.value=e,i.beginPos=this.view["get"+e].parent.localToGlobal(this.view["get"+e].x,this.view["get"+e].y),MainFacade.getInstance().sendNotification(NotificationNames.SHOW_FLY_EFF,i),this.user.energy+=e,this.user.gold-=t,PopUpManager.toast("兑换成功")}},t.prototype.onVideo=function(){NativeManager.playVideo(this,this.successHandler,null)},t.prototype.successHandler=function(){var e={};e.type=ITEM_REWARD_TYPE.ENERGY,e.value=3,e.beginPos=this.view.video_btn.parent.localToGlobal(this.view.video_btn.x,this.view.video_btn.y),MainFacade.getInstance().sendNotification(NotificationNames.SHOW_FLY_EFF,e),this.user.energy+=3,PopUpManager.toast("兑换成功")},t.prototype.onCloseBtn=function(e){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),ClickBase.getInstance().off(this.view.video_btn),ClickBase.getInstance().off(this.view.get1),ClickBase.getInstance().off(this.view.get3),ClickBase.getInstance().off(this.view.get5),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="EnergyShopViewMediator",t}(BaseMediator);__reflect(EnergyShopViewMediator.prototype,"EnergyShopViewMediator",["IVideo"]);var FailView=function(e){function t(){return e.call(this,"FailViewSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(FailView.prototype,"FailView");var FailViewMediator=function(e){function t(i,o){var n=e.call(this,t.NAME,i)||this;return n.initRole(o.dragonName),n.initBiaoti(),n}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.restart_btn,this.onRestart,this),ClickBase.getInstance().on(this.view.back_btn,this.onBack,this),ClickBase.getInstance().on(this.view.addenergy,this.openEnergyShop,this),this.view.cointext.text=this.user.gold+"",this.view.energytext.text=this.user.energy+"",this.startTimer(),this.game.createBanner({width:.8}),egret.Tween.get(this.view.restart_btn,{loop:!0}).to({scaleX:1.05,scaleY:1.05},300).to({scaleX:.95,scaleY:.95},600).to({scaleX:1,scaleY:1},300),this.game.templevel>=0?AldUtil.aldEnd(this.game.templevel,1,!1):AldUtil.aldEnd(this.user.level,1,!1),SoundManager.getInstance().playNewEffect(SoundManager.FAILVIEW)},t.prototype.initBiaoti=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=new DragonBase,[4,e.initDragon("biaoti")];case 1:return t.sent(),this.view.title.addChild(e),e.play("shibai",1),[2]}})})},t.prototype.initRole=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return t=new DragonBase,[4,t.initDragon(e)];case 1:return i.sent(),this.view.rolebox.addChild(t),-1!=e.indexOf("baobao")?(t.y-=90,t.play("ku",0)):-1!=e.indexOf("yv")?(t.y-=85,t.play("7",0)):-1!=e.indexOf("feichuan")?(t.y-=85,t.play("daiji",0)):(t.scaleX=t.scaleY=.85,t.play("3a",0)),[2]}})})},t.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case NotificationNames.GOLD_CHANGE:this.handleGoldChange();break;case NotificationNames.ENERGY_CHANGE:this.handleEnergyChange()}},t.prototype.listNotificationInterests=function(){return[NotificationNames.GOLD_CHANGE,NotificationNames.GOLD_TEMP_CHANGE]},t.prototype.onBack=function(){this.sendNotification(NotificationNames.CLOSE_MAINGAME),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_HOME}),PopUpManager.hide(this.view)},t.prototype.openEnergyShop=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_ENERGYSHOP})},t.prototype.onRestart=function(){return this.user.subEnergy()?(this.sendNotification(NotificationNames.CLOSE_MAINGAME),this.game.templevel>=0?(AldUtil.aldStart(this.game.templevel,1),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:this.user.getTempLevelStr(this.game.templevel)})):(AldUtil.aldStart(this.user.level,1),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:this.user.getCurrentLevelStr()})),void PopUpManager.hide(this.view)):(PopUpManager.toast("体力不足"),void this.openEnergyShop())
},t.prototype.handleGoldChange=function(){this.view.cointext.text=this.user.gold+""},t.prototype.handleEnergyChange=function(){this.view.energytext.text=this.user.energy+""},t.prototype.startTimer=function(){null==this.timer&&(this.timer=new RealTimer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timeHandler,this)),this.timer.start(),this.timeHandler()},t.prototype.timeHandler=function(){if(this.user.energy>=GameDefine.MAX_ENERGY)this.view.labelCountDown.visible=!1;else{this.view.labelCountDown.visible=!0;var e=Math.floor((GameDefine.ENERGY_RECOVER_TIME+this.user.lastRecoverEnergyTime-this.user.serverTime)/1e3);this.view.labelCountDown.text=ToolUtil.timeToString(e,!1)}},t.prototype.stopTimer=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timeHandler,this),this.timer=null)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),egret.Tween.removeTweens(this.view.restart_btn),ClickBase.getInstance().off(this.view.restart_btn),ClickBase.getInstance().off(this.view.back_btn),ClickBase.getInstance().off(this.view.addenergy),this.stopTimer(),this.view.dispose(),this.game.hideBanner()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="FailViewMediator",t}(BaseMediator);__reflect(FailViewMediator.prototype,"FailViewMediator");var FriendView=function(e){function t(){return e.call(this,"FriendSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(FriendView.prototype,"FriendView");var FriendViewMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.initList(),ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this)},t.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case NotificationNames.RESUME_FROM:ToolUtil.isShareBack&&(ToolUtil.isShareBack=!1,PopUpManager.toast("好友点击分享链接进入即可获得体力！"))}},t.prototype.listNotificationInterests=function(){return[NotificationNames.RESUME_FROM]},t.prototype.initList=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){return 0==e.error?(console.log("邀请列表为:",e),this._myCollection=new eui.ArrayCollection,t=e.ret.list,t.length<5?t.length=5:t.length++,this._myCollection.replaceAll(t),this.view.friendList.itemRenderer=FriendItemRender,this.view.friendList.dataProvider=this._myCollection):PopUpManager.toast(e.msg),[2]})})},t.prototype.onCloseBtn=function(e){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="FriendViewMediator",t}(BaseMediator);__reflect(FriendViewMediator.prototype,"FriendViewMediator");var FriendItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="FriendItem",ClickBase.getInstance().on(t.invite,t.onInvite,t),ClickBase.getInstance().on(t.get,t.onGet,t),t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data?(0==this.data.r_status?this.currentState="get":this.currentState="isget",this.username.text="UID:"+this.data.i_uid):this.currentState="invite"},t.prototype.onInvite=function(){if(ToolUtil.share&&ToolUtil.share.relation&&ToolUtil.share.relation.invite){var e=ToolUtil.getShareAppMessageInfo(ToolUtil.share.relation.invite);console.log("分享的info为：",e),ToolUtil.shareAppWithoutBack(e),ToolUtil.isShareBack=!0}else PopUpManager.toast("获取分享信息失败")},t.prototype.onGet=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i;return __generator(this,function(o){return 0==e.error?(this.currentState="isget",t=MainFacade.getInstance().retrieveProxy(UserProxy.NAME),t.energy+=5,PopUpManager.toast("领取体力成功"),i={},i.type=ITEM_REWARD_TYPE.ENERGY,i.value=5,i.beginPos=this.localToGlobal(this.get.x,this.get.y),MainFacade.getInstance().sendNotification(NotificationNames.SHOW_FLY_EFF,i)):PopUpManager.toast(e.msg),[2]})})},t.prototype.onChoice=function(){},t.prototype.onClose=function(){DisplayUtil.removeAll(this),ClickBase.getInstance().off(this.invite),ClickBase.getInstance().off(this.get)},t}(eui.ItemRenderer);__reflect(FriendItemRender.prototype,"FriendItemRender");var skinCFG=function(){function e(e){for(var t in e)this[t]=e[t]}return e}();__reflect(skinCFG.prototype,"skinCFG");var GameHome=function(e){function t(){return e.call(this,"GameHomeSkin")||this}return __extends(t,e),t.prototype.dispose=function(){this.start=null,this.pvp=null,this.moregame=null,this.rank=null,this.changeskin=null,this.helprank=null,this.setup=null,this.energytext=null,this.addenergy=null,this.energyImg=null,this.labelCountDown=null,this.addcoin=null,this.coinImg=null,this.cointext=null,this.rolebox=null,this.achieve=null,this.announcement=null,this.redPoint=null,DisplayUtil.removeAll(this)},t}(BaseView);__reflect(GameHome.prototype,"GameHome");var GameHomeMediator=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.imgList=[],o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.game.times++,this.game.times>1&&NativeManager.expressInterstitial(),this.view.redPoint.visible=this.user.checkAchieve()[0],this.view.logo.addEventListener(egret.TouchEvent.TOUCH_TAP,this.testChoiceLevel,this),ClickBase.getInstance().on(this.view.start,this.onStart,this),ClickBase.getInstance().on(this.view.pvp,this.openPvpLOBBY,this),ClickBase.getInstance().on(this.view.changeskin,this.openSkin,this),ClickBase.getInstance().on(this.view.achieve,this.openAchieve,this),ClickBase.getInstance().on(this.view.setup,this.openSetUp,this),ClickBase.getInstance().on(this.view.moregame,this.openTestLevel,this),ClickBase.getInstance().on(this.view.helprank,this.openHelpRank,this),ClickBase.getInstance().on(this.view.addenergy,this.openEnergyShop,this),this.initRole(),this.initxingxing(),SoundManager.getInstance().startSound(SoundManager.BGM),this.view.start.scaleX=this.view.start.scaleY=.95,egret.Tween.get(this.view.start,{loop:!0}).to({scaleX:1.05,scaleY:1.05},600).to({scaleX:.95,scaleY:.95},600),this.initView(),this.initSkin(),this.startTimer();var t=this;setTimeout(function(){t.game.createBanner({width:.8})},888)},t.prototype.initView=function(){this.view.cointext.text=this.user.gold+"",this.view.energytext.text=this.user.energy+"",ToolUtil.isSameDay(this.user.serverTime,this.user.signWeek.time)||egret.callLater(function(){this.user.resetData(),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_SIGN})},this)},t.prototype.testChoiceLevel=function(){if(this.game.clickNum>10)return this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_CHOICE_LEVEL_VIEW}),this.game.clickNum=0,void(this.game.clickTime=0);var e=Date.parse((new Date).toString()),t=(e-this.game.clickTime)/1e3;3>t?this.game.clickNum++:(this.game.clickNum=0,this.game.clickTime=e)},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case NotificationNames.GOLD_CHANGE:this.handleGoldChange();break;case NotificationNames.ENERGY_CHANGE:this.handleEnergyChange();break;case NotificationNames.CLOSE_HOME:PopUpManager.hide(this.view);break;case NotificationNames.SKIN_BACK:this.role.changeSkinById(this.user.nowSkinId),this.game.createBanner();break;case NotificationNames.SHOW_FLY_EFF:this.CoinOrDiamondFlyEff(t);break;case NotificationNames.UPDATEACHIEVEICON:this.view.redPoint.visible=this.user.checkAchieve()[0]}},t.prototype.listNotificationInterests=function(){return[NotificationNames.GOLD_CHANGE,NotificationNames.GOLD_TEMP_CHANGE,NotificationNames.ENERGY_CHANGE,NotificationNames.CLOSE_HOME,NotificationNames.SKIN_BACK,NotificationNames.SHOW_FLY_EFF,NotificationNames.UPDATEACHIEVEICON]},t.prototype.initSkin=function(){for(var e=this.config.getTable(ConfigProxy.SKIN),t=!1,i=0;i<e.length;i++){var o=e[i];if(o&&!this.user.skinList[o.id]){t=!0;var n=new SkinData;n.id=o.id,n.chipId=o.chip_id,n.skinName=o.skin_name,n.isget=!1,n.videNum=0,n.chipsNum=0,this.user.skinList[o.id]=n}}t&&this.user.saveSkinList()},t.prototype.initRole=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return this.role=new DragonBase,this.user.isgrow1?this.user.isgrow2?(e="bb",t="3"):(e="yv",t="1"):(e="baobao",t="daiji"),[4,this.role.initDragon(e)];case 1:return i.sent(),this.role.play(t,0),this.view.rolebox.addChild(this.role),[2]}})})},t.prototype.initxingxing=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=new DragonBase,[4,e.initDragon("xingxing1")];case 1:return t.sent(),e.play("1",0),e.x=51,e.y=53,this.view.changeskin.addChild(e),[2]}})})},t.prototype.onStart=function(){return this.user.subEnergy()?(this.user.isNew,platform.tatrack("start",{user_id:ToolUtil.uid,account_id:ToolUtil.uid,device_id:ToolUtil.uid,level:this.user.level}),this.user.level>=GameDefine.MAX_LEVEL?(this.game.templevel=4+Math.floor(Math.random()*(GameDefine.MAX_LEVEL-4)),AldUtil.aldStart(this.game.templevel,1),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:this.user.getTempLevelStr(this.game.templevel)})):(AldUtil.aldStart(this.user.level,1),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:this.user.getCurrentLevelStr()})),void PopUpManager.hide(this.view)):(PopUpManager.toast("体力不足"),void this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_ENERGYSHOP}))},t.prototype.openTestLevel=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_CHOICE_LEVEL_VIEW})},t.prototype.CoinOrDiamondFlyEff=function(e){var t=e.type,i=e.value;this.beginPos=e.beginPos;for(var o=i>10?10:i,n=i/o,s=0;o>s;s++){var a=new eui.Image;a.source=t==ITEM_REWARD_TYPE.COIN?"mainUI_json.BY_JSL_07":"mainUI_json.tili",a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.scaleX=a.scaleY=1,a.x=this.beginPos.x,a.y=this.beginPos.y,a.rotation=0;var r=void 0,h=void 0,l=void 0;o>=10?(r=360/o*s,h=Math.cos(Math.PI*r/180)*(40*Math.random()+100)+this.beginPos.x,l=Math.sin(Math.PI*r/180)*(75*Math.random()+150)+this.beginPos.y):(r=Math.floor(100*Math.random())-50,h=this.beginPos.x+(200*Math.random()-100),l=this.beginPos.y+(100*Math.random()-50)),a.name=h+"_"+l+"_"+r+"_"+n+"_"+t,this.view.stage.addChild(a),this.imgList.push(a),s==o-1&&egret.startTick(this.updateOne,this)}},t.prototype.updateOne=function(){for(var e=500,t=!0,i=0;i<this.imgList.length;i++)if(null!=this.imgList[i]){var o=this.imgList[i],n=Number(o.name.split("_")[0]),s=Number(o.name.split("_")[1]),a=n-o.x,r=s-o.y,h=this.calcAngle(o.x,o.y,n,s),l=16.67*e*Math.sin(h*Math.PI/180)/1e3,c=16.67*e*Math.cos(h*Math.PI/180)/1e3;Math.sqrt((n-this.beginPos.x)*(n-this.beginPos.x)+(s-this.beginPos.y)*(s-this.beginPos.y))/e;Math.abs(a)<Math.abs(l)?o.x=n:(o.x+=l,t=!1),Math.abs(r)<Math.abs(c)?o.y=s:(o.y-=c,t=!1)}return t&&(egret.stopTick(this.updateOne,this),egret.startTick(this.updateTwo,this)),!1},t.prototype.updateTwo=function(){for(var e=1100,t=!0,i=0;i<this.imgList.length;i++)if(null!=this.imgList[i]){if(!this.view||!this.view.coinImg)return;t=!1;var o=this.imgList[i],n=parseInt(o.name.split("_")[4]),s=n==ITEM_REWARD_TYPE.COIN?this.view.coinImg.localToGlobal():this.view.energyImg.localToGlobal(),a=s.x-o.x,r=s.y-o.y,h=this.calcAngle(o.x,o.y,s.x,s.y),l=16.67*e*Math.sin(h*Math.PI/180)/1e3,c=16.67*e*Math.cos(h*Math.PI/180)/1e3,u=Number(o.name.split("_")[0]),p=Number(o.name.split("_")[1]);Math.sqrt((s.x-u)*(s.x-u)+(s.y-p)*(s.y-p))/e;Math.abs(a)<Math.abs(l)?o.x=s.x:o.x+=l,Math.abs(r)<Math.abs(c)?o.y=s.y:o.y-=c,o.y==s.y&&o.x==s.x&&(this.imgList[i].parent&&this.imgList[i].parent.removeChild(this.imgList[i]),this.imgList[i]=null)}return t&&(egret.stopTick(this.updateTwo,this),this.imgList=[]),!1},t.prototype.calcAngle=function(e,t,i,o){var n=Math.atan2(o-t,i-e),s=180*n/Math.PI+90;return s>360&&(s-=360),0>s&&(s+=360),s},t.prototype.openPvpLOBBY=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,txSocket.getInstance().checkIsInRoom()];case 1:return e=t.sent(),e?(console.log("当前用户所在房间:",e),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_PVPPOP})):(console.log("当前没有加入任何房间"),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_PVPLOBBY})),[2]}})})},t.prototype.openSkin=function(){return this.user.level<4?void PopUpManager.toast("通关第四关后开放"):void this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_SKIN})},t.prototype.successHandler=function(){},t.prototype.openAnnouncement=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_ANNOUNCECMENT})},t.prototype.openSetUp=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_SETUP})},t.prototype.openHelpRank=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_HELPRANK})},t.prototype.openFriend=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_INVITEVIEW})},t.prototype.openAchieve=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_ACHIEVE})},t.prototype.openEnergyShop=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_ENERGYSHOP})},t.prototype.openRank=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_RANK})},t.prototype.handleGoldChange=function(){this.view.cointext.text=this.user.gold+""},t.prototype.handleEnergyChange=function(){this.view.energytext.text=this.user.energy+""},t.prototype.startTimer=function(){null==this.timer&&(this.timer=new RealTimer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timeHandler,this)),this.timer.start(),this.timeHandler()},t.prototype.timeHandler=function(){if(this.user.energy>=GameDefine.MAX_ENERGY)this.view.labelCountDown.visible=!1;else{this.view.labelCountDown.visible=!0;var e=Math.floor((GameDefine.ENERGY_RECOVER_TIME+this.user.lastRecoverEnergyTime-this.user.serverTime)/1e3);this.view.labelCountDown.text=ToolUtil.timeToString(e,!1)}},t.prototype.stopTimer=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timeHandler,this),this.timer=null)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.stopTimer();for(var t in this.imgList)this.imgList[t]&&this.imgList[t].parent&&this.imgList[t].parent.removeChild(this.imgList[t]);egret.Tween.removeTweens(this.view.start),this.role=null,this.view.rolebox.removeChildren(),this.view.changeskin.removeChildren(),ClickBase.getInstance().off(this.view.start),ClickBase.getInstance().off(this.view.pvp),ClickBase.getInstance().off(this.view.changeskin),ClickBase.getInstance().off(this.view.achieve),ClickBase.getInstance().off(this.view.setup),ClickBase.getInstance().off(this.view.moregame),ClickBase.getInstance().off(this.view.helprank),ClickBase.getInstance().off(this.view.addenergy),ClickBase.getInstance().off(this.view.announcement),this.view.dispose(),this.game.hideBanner(),this.viewComponent=null},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameHomeMediator",t}(BaseMediator);__reflect(GameHomeMediator.prototype,"GameHomeMediator",["IVideo"]);var GameTopView=function(e){function t(){return e.call(this,"GameTopViewSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this),this.select0=null,this.select1=null},t}(BaseView);__reflect(GameTopView.prototype,"GameTopView");var GameTopViewMediator=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.data=[],o._cantips=!0,o.isplaying=!1,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.view.tips.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onVideo,this),this.view.now_lable.text=this.user.level+1+"",this.view.next_lable.text=this.user.level+2+"",this.setMegicIcon(),this.initRole(),egret.Tween.get(this.view.megictips,{loop:!0}).to({x:145},400).to({x:130},400)},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case NotificationNames.SHOW_SELECT:SoundManager.getInstance().playNewEffect(SoundManager.YIWEN),this.data=t,this.initSelect();break;case NotificationNames.SELECT_RESULT:this.onResult(t);break;case NotificationNames.MEGICCOMPLETE:this.userMegic()}},t.prototype.listNotificationInterests=function(){return[NotificationNames.SHOW_SELECT,NotificationNames.SELECT_RESULT,NotificationNames.MEGICCOMPLETE]},t.prototype.initRole=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.xx=new DragonBase,[4,this.xx.initDragon("mofa")];case 1:return e.sent(),this.view.xxbox.visible=!1,this.view.xxbox.addChild(this.xx),[2]}})})},t.prototype.setMegicIcon=function(){this.user.megicnum>0?(this.view.sign.visible=!1,this.view.megicnum.visible=!0,this.view.megicnum.text="x"+this.user.megicnum):(this.view.sign.visible=!0,this.view.megicnum.visible=!1)},t.prototype.onVideo=function(){return this.user.megicnum>0?(this.user.megicnum--,void this.onTips()):void NativeManager.playVideo(this,this.onTips,null)},t.prototype.onTips=function(){egret.callLater(function(){if(!this._states)return this.user.megicnum++,this.setMegicIcon(),void PopUpManager.toast("还未生成选项，别着急呀");if(this.isplaying)return this.user.megicnum++,this.setMegicIcon(),void PopUpManager.toast("正在施展魔法中，别着急呀");if(this._cantips){var e=0;this.view.step_1.visible?e=2:this.view.step_0.visible&&(e=1),console.log("level",this.user.level);var t=void 0;t=this.game.templevel?LevelCorrect["ITEM_"+(this.game.templevel+1)][e]:LevelCorrect["ITEM_"+(this.user.level+1)][e],console.log("正确选项为"+t);for(var i=!1,o=0;o<this._states.length;o++)if(this._states[o]&&this.data[o]!=t){i=!0;break}if(!i)return this.user.megicnum++,this.setMegicIcon(),void PopUpManager.toast("已经没有多余选项了");var n=-1;for(n=Math.floor(Math.random()*this.data.length);this.data[n]==t||!this._states[n];)n=Math.floor(Math.random()*this.data.length);this.index=n;var s=this.view["select"+n];s&&(this.nowselect=s,this.isplaying=!0,this.lastx=this.view.xxbox.x,this.lasty=this.view.xxbox.y,s.hideAni.once(egret.Event.COMPLETE,this.completeHide,this),this.point=this.view.localToGlobal(s.x+98,s.y+270),this.view.tips.globalToLocal(this.point.x,this.point.y,this.point),this.sendNotification(NotificationNames.CLICKMEGIC),this.timeout>=0&&egret.clearTimeout(this.timeout),this.view.megictips.visible=!1),this.setMegicIcon()}else this.user.megicnum++,this.setMegicIcon(),PopUpManager.toast("您已经选择过了")},this)},t.prototype.userMegic=function(){this.view.xxbox.visible=!0,this.AnimationEndByTimes(this.xx,"newAnimation",1,function(){this.xx.play("1",0),egret.Tween.get(this.view.xxbox).to({x:this.point.x,y:this.point.y},2500).call(function(){this.AnimationEndByTimes(this.xx,"2",1,function(){this.view.xxbox.visible=!1,this.view.xxbox.alpha=1,this.nowselect.currentState="error",egret.setTimeout(function(){this.nowselect.hideAni.play(0),this._states[this.index]=!1},this,1e3),this.view.xxbox.x=this.lastx,this.view.xxbox.y=this.lastx})},this)})},t.prototype.lookAngle=function(e,t,i,o){var n=e-i,s=t-o,a=180*Math.atan2(s,n)/Math.PI;return-a},t.prototype.AnimationEndByTimes=function(e,t,i,o,n,s){n||(n=this);var a=function(){o.call(n,s),e.armuture.removeEventListener(dragonBones.EventObject.COMPLETE,a,n)};e.armuture.addEventListener(dragonBones.EventObject.COMPLETE,a,this),e.play(t,i)},t.prototype.completeHide=function(){this.isplaying=!1},t.prototype.initSelect=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){for(this.fit(),this._states=[],e=0;e<this.data.length;e++)t=this.view["select"+e],t&&(t.visible=!0,t.visible=!1,this._states[e]=!0);return this.showSelect(),[2]})})},t.prototype.fit=function(){2==this.data.length?(this.view.select0.horizontalCenter=-105,this.view.select1.horizontalCenter=105):3==this.data.length?(this.view.select0.horizontalCenter=-170,this.view.select1.horizontalCenter=0,this.view.select2.horizontalCenter=170):3==this.data.length&&(this.view.select0.horizontalCenter=-240,this.view.select1.horizontalCenter=-80,this.view.select2.horizontalCenter=80,this.view.select3.horizontalCenter=240)},t.prototype.showSelect=function(){this.timeout>=0&&egret.clearTimeout(this.timeout),this.timeout=egret.setTimeout(function(){this.view.megictips.visible=!0},this,3e3),this._cantips=!0;for(var e=0;e<this.data.length;e++){var t=this.view["select"+e];t&&(t.icon.source="ItemUI_json.item"+this.data[e],t.currentState="normal",t.visible=!0,t.showAni.play(0),ClickBase.getInstance().on(t,this.choseSelect,this,this.data[e]))}},t.prototype.choseSelect=function(e){if(!this.isplaying){this.timeout>=0&&egret.clearTimeout(this.timeout),this.view.megictips.visible=!1,this._cantips=!1;for(var t=0;t<this.data.length;t++){var i=this.view["select"+t];i&&e==this.data[t]&&(this._select=i,i.currentState="select"),ClickBase.getInstance().off(i)}this.sendNotification(NotificationNames.CHOSEEVENT,e)}},t.prototype.onResult=function(e){e?(this._select.currentState="correct",platform.vibrateShort({}),SoundManager.getInstance().playEffect(SoundManager.CORRECT)):this._select.currentState="error",egret.setTimeout(function(){for(var e=0;e<this.data.length;e++){var t=this.view["select"+e];t&&this._states[e]&&(t.hideAni.play(0),this._states[e]=!1)}},this,1e3)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.timeout>=0&&egret.clearTimeout(this.timeout),ClickBase.getInstance().off(this.view.select0),ClickBase.getInstance().off(this.view.select1),ClickBase.getInstance().off(this.view.select2),ClickBase.getInstance().off(this.view.select3),egret.Tween.removeTweens(this.view.megictips),this.view.tips.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTips,this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameTopViewMediator",t}(BaseMediator);__reflect(GameTopViewMediator.prototype,"GameTopViewMediator");var GameView=function(e){function t(){return e.call(this,"")||this}return __extends(t,e),t}(BaseView);__reflect(GameView.prototype,"GameView");var GameViewMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.init()},t.prototype.init=function(){this.game.save_timer.start(),this.game.save_timer.addEventListener(egret.TimerEvent.TIMER,this.saveHandler,this),this.game.energy_timer.start(),this.game.energy_timer.addEventListener(egret.TimerEvent.TIMER,this.energyTimerHandler,this),this.user.isNew?(console.log("===============是新手 进入引导"),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_PREANI})):this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_HOME})},t.prototype.saveHandler=function(e){ToolUtil.NEED_SAVE_DATA&&this.sendNotification(NotificationNames.SAVE_DATA_COMMAND)},t.prototype.energyTimerHandler=function(e){var t=this.user;t.energy<GameDefine.MAX_ENERGY&&t.lastRecoverEnergyTime<t.serverTime&&t.serverTime-t.lastRecoverEnergyTime>=GameDefine.ENERGY_RECOVER_TIME&&t.addEnergy()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this)},t.NAME="GameViewMediator",t}(BaseMediator);__reflect(GameViewMediator.prototype,"GameViewMediator");var GetAchieveView=function(e){function t(){return e.call(this,"GetAchieveSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(GetAchieveView.prototype,"GetAchieveView");var GetAchieveViewMediator=function(e){function t(i,o){var n=e.call(this,t.NAME,i)||this;return n.canclick=!0,n.list=o,n}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this),ClickBase.getInstance().on(this.view.get_btn,this.flyCoinAni,this),ClickBase.getInstance().on(this.view.video_btn,this.onVideo,this),this.view.showAni.play(0),egret.callLater(function(){ToolUtil.showAchieve=!0},this),this.onShow()},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[NotificationNames.UPDATEICON]},t.prototype.onShow=function(){this.canclick=!0,console.log("获得新成就列表为",this.list),this.data=this.config.getItemByID(ConfigProxy.ACHIEVE,this.list[0]),this.data||(ToolUtil.showAchieve=!1,PopUpManager.hide(this.view)),"egy"==this.data.item?this.view.icon0.source=this.view.icon1.source="mainUI_json.tili":"coins"==this.data.item&&(this.view.icon0.source=this.view.icon1.source="mainUI_json.BY_JSL_07"),this.view.head.source="windowUI_json."+this.data.iconID,this.view.num0.text="×"+this.data.num,this.view.num1.text="×"+2*this.data.num,this.view.des.text=this.data.title,this.user.addarriveachieve(this.list[0]),this.list.shift()},t.prototype.onVideo=function(){NativeManager.playVideo(this,this.successHandler,null)},t.prototype.flyCoinAni=function(e){this.canclick&&(this.canclick=!1,egret.callLater(function(){var t,i=this,o=0,n=e?2*this.data.num:this.data.num,s="egy"==this.data.item?ITEM_REWARD_TYPE.ENERGY:ITEM_REWARD_TYPE.COIN,a=n;t=e?this.view.video_btn.parent.localToGlobal(this.view.video_btn.x+150,this.view.video_btn.y+50):this.view.get_btn.parent.localToGlobal(this.view.get_btn.x+101,this.view.get_btn.y+45);for(var r=new egret.Point(50,50),h=a>20?20:a,l=[],c=0;h>c;c++){var u=new eui.Image;u.source=s==ITEM_REWARD_TYPE.COIN?"mainUI_json.BY_JSL_07":"mainUI_json.tili",u.anchorOffsetX=u.width/2,u.anchorOffsetY=u.height/2,u.scaleX=u.scaleY=1,u.x=t.x,u.y=t.y,u.rotation=Math.floor(361*Math.random()),this.view.addChild(u),l.push(u)}for(var c=0;c<l.length;c++)egret.Tween.get(l[c]).to({x:t.x+(100*Math.random()-50),y:t.y+(50*Math.random()-25)},350*Math.random()+150).wait(500).to({x:r.x,y:r.y,rotation:0},250).call(function(t){if(o++,l[t].visible=!1,l[t].parent&&l[t].parent.removeChild(l[t]),o==l.length)var n=egret.setTimeout(function(){egret.clearTimeout(n),this.onGet(e)},i,200)},this,[c])},this))},t.prototype.onGet=function(e){var t=this.data.num;e&&(t=2*this.data.num),"egy"==this.data.item?this.user.energy+=t:"coins"==this.data.item&&(this.user.gold+=t),this.user.addisgetachieve(this.data.id),this.sendNotification(NotificationNames.UPDATEACHIEVEICON),this.canclick=!0,this.onCloseBtn()},t.prototype.successHandler=function(){this.flyCoinAni(!0)},t.prototype.onCloseBtn=function(){this.canclick&&(this.list.length>0?(this.onShow(),this.view.showAni.play(0)):(ToolUtil.showAchieve=!1,PopUpManager.hide(this.view)))},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),ClickBase.getInstance().off(this.view.get_btn),ClickBase.getInstance().off(this.view.video_btn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GetAchieveViewMediator",t}(BaseMediator);__reflect(GetAchieveViewMediator.prototype,"GetAchieveViewMediator",["IVideo"]);var GetChipView=function(e){function t(){return e.call(this,"GetChipSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(GetChipView.prototype,"GetChipView");var GetChipViewMediator=function(e){function t(i,o){var n=e.call(this,t.NAME,i)||this;return n.maxTime=1500,n._maskheight=314,n._canselect=!0,n.chipid=o,n}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.close_btn,this.onClose,this),ClickBase.getInstance().on(this.view.get,this.onGet,this),this.chip=this.config.getChipByID(this.chipid),this.view.need.source=this.chip.need_double?"skinUI_json.morechip":"skinUI_json.wantchip",this.matchSkin(),this.setMask(),this._lastchipnum=this.skin.chipsNum,this.chip.need_ad||this.skin&&(this.skin.chipsNum+=this.chip.num,this.user.saveSkinList()),this.view.des.text="幸运女神送给你了 "+this.chip.chip_name+"×"+this.chip.num,this.view.icon.source="skinUI_json.chip"+this.chip.pic_id,this.view.num.text="×"+this.chip.num,this.refreshDes(!0)},t.prototype.refreshDes=function(e){var t=this.config.getItemByID(ConfigProxy.SKIN,this.skin.id),i=this.skin.chipsNum>t.chips?t.chips:this.skin.chipsNum;104==this.chip.id?(e&&i--,this.view.des0.text="再集齐"+(t.chips-i)+"个碎片，可以兑换大魔导师皮肤了！",i==t.chips&&(this.view.des0.text="您已集齐碎片，快去兑换大魔导师皮肤吧")):105==this.chip.id&&(this.view.des0.text="再集齐"+(t.chips-i)+"个碎片，更换冰雪女王皮肤吧！",i==t.chips&&(this.view.des0.text="您已集齐碎片，快去兑换冰雪女王皮肤吧"))},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.matchSkin=function(){for(var e in this.user.skinList){var t=this.user.skinList[e];if(t&&t.chipId==this.chipid){this.skin=t;break}}},t.prototype.setMask=function(){var e=this.config.getItemByID(ConfigProxy.SKIN,this.skin.id);this.view.rolemask.source="skinUI_json."+e.pic_id+"_new",this.view.back1.source="skinUI_json."+e.pic_id+"_new",4==e.pic_id?this.view.xiangao.source="skinUI_json.xian4":5==e.pic_id&&(this.view.xiangao.source="skinUI_json.xian5",this.view.xiangao.x=10),this.view.back.mask=this.view.rolemask,this.view.back1.mask=this.view.rolemask1;var t=this.skin.chipsNum/e.chips;this.view.rolemask1.height=this._maskheight*t},t.prototype.onClose=function(){this._canselect&&this.maskAni(!1)},t.prototype.maskAni=function(e){if(this._canselect=!1,e||this.chip.need_double)for(var t=function(e){egret.setTimeout(function(){var t=new eui.Image(this.view.icon.source);t.scaleX=t.scaleY=.6,t.anchorOffsetX=155,t.anchorOffsetY=172,this.view.addChild(t),t.x=this.view.icon.x+t.anchorOffsetX/2,t.y=this.view.icon.y+t.anchorOffsetY/2,egret.Tween.get(t).to({x:this.view.rolebox.x+this.view.rolebox.width/2,y:this.view.rolebox.y+this.view.rolebox.height/2,scaleX:0,scaleY:0,alpha:0},1500).call(function(){if(egret.Tween.get(this.view.rolebox).to({scaleX:1.1,scaleY:1.1},200).to({scaleX:1,scaleY:1},200),e==this.skin.chipsNum-this._lastchipnum-1){this.refreshDes();var t=this.config.getItemByID(ConfigProxy.SKIN,this.skin.id),i=new SheetMovieClip(80,EffectUrl.FIRE_EFF);i.setList(1,15,"skinUI_json.yfa00"),i.anchorOffsetY=30.5,this.view.rolebox.addChild(i),i.start(1),i.x=0,i.y=this._maskheight-this.view.rolemask1.height,this.view.rolemask2.visible=!0,i.mask=this.view.rolemask2;var o=this.skin.chipsNum/t.chips;o>1&&(o=1);var n=this._maskheight*o,s=(n-this.view.rolemask1.height)/this._maskheight*this.maxTime;egret.Tween.get(i).to({y:this._maskheight-n},s),egret.Tween.get(this.view.rolemask1).to({height:n},s).wait(1500).call(function(){this.onCloseBtn()},this)}},this)},i,500*e)},i=this,o=0;o<this.skin.chipsNum-this._lastchipnum;o++)t(o);else this.onCloseBtn()},t.prototype.onGet=function(){if(this._canselect){this._canselect=!1;var e=this;NativeManager.playVideo(this,this.successHandler,function(){e._canselect=!0})}},t.prototype.successHandler=function(){this.skin.chipsNum+=this.chip.num,this.user.saveSkinList(),this.maskAni(!0)},t.prototype.onCloseBtn=function(){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),ClickBase.getInstance().off(this.view.get),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GetChipViewMediator",t}(BaseMediator);__reflect(GetChipViewMediator.prototype,"GetChipViewMediator");var LoadingUI=function(e){function t(){var t=e.call(this)||this;
return t.height=PopUpManager.STAGE_HEIGHT,t.once(eui.UIEvent.COMPLETE,t.skinCompleteHandler,t),t.skinName="resource/skins/LoadingSkin.exml",t.bg.height=PopUpManager.STAGE_HEIGHT,t.roleAni.addEventListener(egret.Event.COMPLETE,t.playAni,t),t.roleAni.play(0),t}return __extends(t,e),t.prototype.skinCompleteHandler=function(e){console.log("end"),this.progress.mask=this.m_mask,this.progress.x=-277},t.prototype.playAni=function(){this.roleAni.play(0)},t.prototype.updateTip=function(){this._index++;var e=this._index%3,t="";this.desc.text=0==e?t+".":1==e?t+"..":t+"..."},t.prototype.setMax=function(e,t){this._current=e,this._max=t},t.prototype.onProgress=function(e,t){var i=Math.floor(100*e/t);this.progressLabel.text=""+i+"%";var o=this._current/this._max+i/100/this._max;this.progress.x=-277+425*o},t.prototype.dispose=function(){for(this.roleAni.removeEventListener(egret.Event.COMPLETE,this.playAni,this),this.roleAni.stop(),egret.Tween.removeTweens(this.role),egret.clearInterval(this._index);this.numChildren>0;)this.removeChildAt(0)},t}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var GrowViewMediator=function(e){function t(i,o){var n=e.call(this,t.NAME,i)||this;return n.complete=!1,n.growNum=o,n.view.bg.height=PopUpManager.STAGE_HEIGHT,n.initRole(),n.initsj(),n}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this),this.startAni=egret.setInterval(function(){this.complete&&(this.startAnimation(),egret.clearInterval(this.startAni))},this,30)},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.initsj=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return e=new DragonBase,[4,e.initDragon("sj")];case 1:return i.sent(),e.scaleX=-1,this.view.sjbox0.addChild(e),t=new DragonBase,[4,t.initDragon("sj")];case 2:return i.sent(),this.view.sjbox1.addChild(t),e.play("1",1),t.play("1",1),[2]}})})},t.prototype.initRole=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.light=new DragonBase,[4,this.light.initDragon("jinhua2")];case 1:return e.sent(),this.light.visible=!1,this.view.rolebox.addChild(this.light),this.role=new DragonBase,[4,this.role.initDragon("jinhua1")];case 2:return e.sent(),this.view.rolebox.addChild(this.role),this.role.visible=!1,this.complete=!0,[2]}})})},t.prototype.onShare=function(){var e=ToolUtil.share.relation,t=ToolUtil.getShareInfo(e["default"]);ToolUtil.shareAppWithoutBack(t)},t.prototype.startAnimation=function(){this.light.visible=!0,this.role.visible=!0,1==this.growNum?(this.AnimationEndByTimes(this.light,"1-2",1,function(){this.light.play("2",0)}),this.role.play("1-2",1),this.dragonName="yv",this.user.isgrow1=!0):2==this.growNum&&(this.AnimationEndByTimes(this.light,"2-3",1,function(){this.light.play("3",0)}),this.role.play("2-3",1),this.dragonName="bb",this.user.isgrow2=!0)},t.prototype.onCloseBtn=function(e){this.startAni>=0&&egret.clearInterval(this.startAni),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_WINVIEW,data:this.dragonName}),PopUpManager.hide(this.view)},t.prototype.AnimationEndByTimes=function(e,t,i,o,n,s){n||(n=this);var a=function(){o.call(n,s),e.armuture.removeEventListener(dragonBones.EventObject.COMPLETE,a,n)};e.armuture.addEventListener(dragonBones.EventObject.COMPLETE,a,this),e.play(t,i)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GrowViewMediator",t}(BaseMediator);__reflect(GrowViewMediator.prototype,"GrowViewMediator");var HelpRankView=function(e){function t(){return e.call(this,"HelpRankSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(HelpRankView.prototype,"HelpRankView");var HelpRankViewMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.initRank(),ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this),this.view.myname.text=WxInfo.nickName,this.view.headicon.source=WxInfo.avatarUrl},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.initRank=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){return 0!=e.error?(PopUpManager.toast(e.msg),PopUpManager.hide(this.view),[2]):(this._myCollection=new eui.ArrayCollection,t=e.ret.list,this._myCollection.replaceAll(t),this.view.rankList.itemRenderer=HelpRankItemRender,this.view.rankList.dataProvider=this._myCollection,[2])})})},t.prototype.onCloseBtn=function(e){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="HelpRankViewMediator",t}(BaseMediator);__reflect(HelpRankViewMediator.prototype,"HelpRankViewMediator");var HelpRankItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="HelpRankItem",t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.rank.text=this.data.rank+"",this.username.text=this.data.nickName,1==this.data.rank?this.rankicon.source="windowUI_json.icon_no1":2==this.data.rank?this.rankicon.source="windowUI_json.icon_no2":3==this.data.rank?this.rankicon.source="windowUI_json.icon_no3":this.rankicon.visible=!1,this.icon.source=this.data.avatarUrl,this.times.text=this.data.h_num+""},t.prototype.onChoice=function(){},t.prototype.onClose=function(){DisplayUtil.removeAll(this)},t}(eui.ItemRenderer);__reflect(HelpRankItemRender.prototype,"HelpRankItemRender");var InviteView=function(e){function t(){var t=e.call(this,"InviteViewSkin")||this;t.bitmap=new egret.Bitmap,t.btnLists=[];for(var i=0;5>i;i++)t.btnLists.push(t["invite_btn"+i]);return t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bitmapdata=new egret.BitmapData(window.sharedCanvas),this.bitmapdata.$deleteSource=!1;var t=new egret.Texture;t._setBitmapData(this.bitmapdata),this.bitmap=new egret.Bitmap,this.bitmap.texture=t,this.bitmap.y=-150,this.parGroup.addChild(this.bitmap),egret.startTick(this.updata,this)},t.prototype.updata=function(e){return egret.WebGLUtils.deleteWebGLTexture(this.bitmapdata.webGLTexture),this.bitmapdata.webGLTexture=null,!1},t.prototype.setNum=function(e,t){if(!e)return this.des0.text="您已完成所有目标了",this.des1.visible=!1,this.getreward_btn.visible=!1,this.progress.text="完成",void(this.reward.text="完成");this.reward.text="×"+e,this.getreward_btn.visible=!1;var i=e-t;0>i&&(i=0),0==i?(this.des0.text="达到目标了快去领取",this.getreward_btn.visible=!0):this.des0.text="再邀请"+i+"人可领取",this.progress.text="进度:"+(e-i)+"/"+e,this.des1.x=this.des0.x+this.des0.width+10},t.prototype.dispose=function(){for(var e in this.btnLists)this.btnLists[e].texture=null,this.btnLists[e]=null;this.btnLists=null,DisplayUtil.removeAll(this),egret.stopTick(this.updata,this)},t}(BaseView);__reflect(InviteView.prototype,"InviteView");var InviteViewMediator=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o._clickIndex=-1,o.Rewardconfig=[2,5,8,13,18,23,28,100],o.Talkconfig=["之前我也玩过类似的游戏，还是这款最好玩！","大家一起来帮助小姐姐吧，看谁最聪明！","最近在家呆得好无聊，有什么好玩的推荐吗？","这款游戏真好玩，看看你的能耐吧！","求一款解谜益智类游戏，大家一起玩！","有什么好玩的游戏，分享给我噢～"],o.time=-1,o.shareFlag=!0,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.init(),this.addEvent(),this.game.hideBanner()},t.prototype.init=function(){this.showTalk(),this.view.setNum(this.Rewardconfig[this.user.shareProgress],this.user.share_friend_num),platform.postMessage({action:"show_share_list"})},t.prototype.showTalk=function(){for(var e=0;5>e;e++)this.view["talk"+e].text=this.Talkconfig[~~(Math.random()*this.Talkconfig.length)]},t.prototype.addEvent=function(){ClickBase.getInstance().on(this.view.close_btn,this.onClose,this);for(var e=0;5>e;e++)this.view.btnLists[e].name="btn_"+e,ClickBase.getInstance().on(this.view.btnLists[e],this.onInviteClick,this,e);ClickBase.getInstance().on(this.view.change_btn,this.showShareList,this),ClickBase.getInstance().on(this.view.getreward_btn,this.onGetReward,this)},t.prototype.showShareList=function(){var e=this;if(!this.shareFlag)return void PopUpManager.toast("不要换太快哦~");this.shareFlag=!1,this.time=egret.setTimeout(function(){e.shareFlag=!0},this,1e3),platform.postMessage({action:"show_share_list"});for(var t=0;5>t;t++)this.view.btnLists[t].visible=!0,this.view["complete"+t].visible=!1;this.showTalk()},t.prototype.onGetReward=function(){if(this.Rewardconfig[this.user.shareProgress]){this.user.energy+=this.Rewardconfig[this.user.shareProgress],this.user.share_friend_num-=this.Rewardconfig[this.user.shareProgress];var e=this.Rewardconfig[this.user.shareProgress];e>5&&(e=5);var t={};t.type=ITEM_REWARD_TYPE.ENERGY,t.value=e,t.beginPos=this.view.getreward_btn.parent.localToGlobal(this.view.getreward_btn.x+75,this.view.getreward_btn.y+30),MainFacade.getInstance().sendNotification(NotificationNames.SHOW_FLY_EFF,t),this.user.shareProgress++,this.view.setNum(this.Rewardconfig[this.user.shareProgress],this.user.share_friend_num)}},t.prototype.onInviteClick=function(e){this._clickIndex=e;var t=ToolUtil.getShareInfo(ToolUtil.share.relation["default"]);platform.postMessage({action:"send_share_to_friend",index:e,info:t})},t.prototype.shareSuccess=function(){-1!=this._clickIndex&&(this.view.btnLists[this._clickIndex].visible=!1,this.view["complete"+this._clickIndex].visible=!0),this.user.share_friend_num++,this.view.setNum(this.Rewardconfig[this.user.shareProgress],this.user.share_friend_num),this.user.energy+=5;var e={};e.type=ITEM_REWARD_TYPE.ENERGY,e.value=5,e.beginPos=this.view.btnLists[this._clickIndex].parent.localToGlobal(this.view.btnLists[this._clickIndex].x+78,this.view.btnLists[this._clickIndex].y+34.5),MainFacade.getInstance().sendNotification(NotificationNames.SHOW_FLY_EFF,e)},t.prototype.shareFail=function(){},t.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case NotificationNames.SELECT_SHARE_SUCCESS:this.shareSuccess();break;case NotificationNames.SELECT_SHARE_FAIL:this.shareFail()}},t.prototype.listNotificationInterests=function(){return[NotificationNames.SELECT_SHARE_SUCCESS,NotificationNames.SELECT_SHARE_FAIL]},t.prototype.onClose=function(){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),-1!=this.time&&egret.clearTimeout(this.time);for(var t in this._sourceArr)this._sourceArr[t]=null;this._sourceArr=null,this._myCollection=null,ClickBase.getInstance().off(this.view.close_btn);for(var i=0;5>i;i++)this.view.btnLists[i].name="btn_"+i,ClickBase.getInstance().off(this.view.btnLists[i]);ClickBase.getInstance().off(this.view.change_btn),ClickBase.getInstance().off(this.view.getreward_btn),platform.postMessage({action:"hide_result"}),this.game.createBanner(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="InviteViewMediator",t}(BaseMediator);__reflect(InviteViewMediator.prototype,"InviteViewMediator");var PopWindows=function(e){function t(t,i,o,n,s){var a=e.call(this)||this;return a.skinName="PopWindowsSkin",a.width=PopUpManager.STAGE_WIDTH,a.height=PopUpManager.STAGE_HEIGHT,a.bg.height=PopUpManager.STAGE_HEIGHT,n&&(a.bg.visible=!1),a.text.text=t,a.callYes=i,a.callNo=s,a.caller=o,ClickBase.getInstance().on(a.yes,a.onYes,a),ClickBase.getInstance().on(a.no,a.onNo,a),a}return __extends(t,e),t.prototype.show=function(){this.main.scaleX=this.main.scaleY=0,egret.Tween.get(this.main).to({scaleX:1,scaleY:1},200)},t.prototype.onNo=function(){this.callNo&&this.callNo.call(this.caller),egret.Tween.get(this.main).to({scaleX:0,scaleY:0},200).call(function(){this.parent&&(this.parent.removeChild(this),ClickBase.getInstance().off(this.yes),ClickBase.getInstance().off(this.no))},this)},t.prototype.onYes=function(){this.callYes&&this.callYes.call(this.caller),egret.Tween.get(this.main).to({scaleX:0,scaleY:0},200).call(function(){this.parent&&(this.parent.removeChild(this),ClickBase.getInstance().off(this.yes),ClickBase.getInstance().off(this.no))},this)},t}(eui.Component);__reflect(PopWindows.prototype,"PopWindows");var RankView=function(e){function t(){var t=e.call(this,"RankViewSkin")||this;return t.bitmap=new egret.Bitmap,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.bitmapdata=new egret.BitmapData(window.sharedCanvas),this.bitmapdata.$deleteSource=!1;var t=new egret.Texture;t._setBitmapData(this.bitmapdata),this.bitmap=new egret.Bitmap,this.bitmap.texture=t,this.parGroup.addChild(this.bitmap),egret.startTick(this.updata,this)},t.prototype.updata=function(e){return egret.WebGLUtils.deleteWebGLTexture(this.bitmapdata.webGLTexture),this.bitmapdata.webGLTexture=null,!1},t.prototype.dispose=function(){DisplayUtil.removeAll(this),egret.stopTick(this.updata,this)},t}(BaseView);__reflect(RankView.prototype,"RankView");var RankViewMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.init(),this.addEvent()},t.prototype.init=function(){platform.postMessage({action:"show_friend_rank"})},t.prototype.addEvent=function(){this.view.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.view.lastImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLastClick,this),this.view.nextImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNextClick,this)},t.prototype.onLastClick=function(){platform.postMessage({action:"show_up_page"})},t.prototype.onNextClick=function(){platform.postMessage({action:"show_next_page"})},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.onClose=function(){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),platform.postMessage({action:"hide_result"}),this.view.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.view.lastImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLastClick,this),this.view.nextImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNextClick,this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="RankViewMediator",t}(BaseMediator);__reflect(RankViewMediator.prototype,"RankViewMediator");var ReviveView=function(e){function t(){return e.call(this,"ReviveSkin")||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(ReviveView.prototype,"ReviveView");var ReviveViewMediator=function(e){function t(i,o){var n=e.call(this,t.NAME,i)||this;return n.time=9,n.circle=new egret.Shape,n.view.main.addChild(n.circle),n.view.progress.mask=n.circle,n.data=o,n}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.revive_btn,this.onVideo,this),ClickBase.getInstance().on(this.view.revive_btn1,this.openRevive1,this),ClickBase.getInstance().on(this.view.close_btn,this.closeToFail,this),this.init()},t.prototype.init=function(){this.view.time.text=""+this.time,egret.Tween.get(this).to({setmask:360},1e3).call(function(){return this.time--,this.time<0?void this.closeToFail():(this.view.time.text=""+this.time,egret.Tween.get(this.view.time).to({scaleX:1.3,scaleY:1.3},150).to({scaleX:1,scaleY:1},150),this.setmask=0,this.circle.graphics.clear(),void this.init())},this)},Object.defineProperty(t.prototype,"setmask",{get:function(){return 0},set:function(e){this.DrawSector(this.view.progress.x,this.view.progress.y,200,0,e)},enumerable:!0,configurable:!0}),t.prototype.DrawSector=function(e,t,i,o,n,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=100),void 0===o&&(o=0),void 0===n&&(n=360),void 0===s&&(s=16711680),this.circle.graphics.beginFill(s),this.circle.graphics.moveTo(e,t),n=Math.abs(n)>360?360:n;var a=Math.ceil(Math.abs(n)/45),r=n/a;r=r*Math.PI/180,o=o*Math.PI/180,this.circle.graphics.lineTo(e+i*Math.cos(o),t+i*Math.sin(o));for(var h=1;a>=h;h++){o+=r;var l=o-r/2,c=e+i/Math.cos(r/2)*Math.cos(l),u=t+i/Math.cos(r/2)*Math.sin(l),p=e+i*Math.cos(o),d=t+i*Math.sin(o);this.circle.graphics.curveTo(c,u,p,d)}360!=n&&this.circle.graphics.lineTo(e,t),this.circle.graphics.endFill()},t.prototype.closeToFail=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_FAILVIEW,data:{dragonName:this.data.dragonName}}),PopUpManager.hide(this.view)},t.prototype.onVideo=function(){egret.Tween.pauseTweens(this),egret.callLater(function(){return void NativeManager.playVideo(this,this.openRevive,null)},this)},t.prototype.openRevive=function(){0==this.data.step?(this.onRestart(),AldUtil.aldRunRevive(this.user.level,0)):(this.sendNotification(NotificationNames.REVIVE),PopUpManager.hide(this.view))},t.prototype.openRevive1=function(){return this.user.gold<2e3?void PopUpManager.toast("金币不足"):(this.user.gold-=2e3,void(0==this.data.step?(this.onRestart(),AldUtil.aldRunRevive(this.user.level,0)):(this.sendNotification(NotificationNames.REVIVE),PopUpManager.hide(this.view))))},t.prototype.onRestart=function(){this.sendNotification(NotificationNames.CLOSE_MAINGAME),this.game.templevel>=0?this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:this.user.getTempLevelStr(this.game.templevel)}):this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:this.user.getCurrentLevelStr()}),PopUpManager.hide(this.view)},t.prototype.failCallBack=function(){egret.callLater(function(){egret.Tween.resumeTweens(this)},this)},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.revive_btn),ClickBase.getInstance().off(this.view.close_btn),egret.Tween.removeTweens(this),this.view.dispose(),this.circle=null},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="ReloadViewMediator",t}(BaseMediator);__reflect(ReviveViewMediator.prototype,"ReviveViewMediator");var SetUpView=function(e){function t(){return e.call(this,"SetUpSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(SetUpView.prototype,"SetUpView");var SetUpViewMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.setCurrent(),this.view.uid_text.text="UID:"+ToolUtil.uid,ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this),ClickBase.getInstance().on(this.view.music_btn,this.changeMusic,this,null,!1,!0),ClickBase.getInstance().on(this.view.sound_btn,this.changeSound,this,null,!1,!0)},t.prototype.getchips=function(){Math.random()>.5?this.sendNotification(NotificationNames.OPEN_SINGLE_WINDOW,{name:WindowName.GET_CHIPS,data:104}):this.sendNotification(NotificationNames.OPEN_SINGLE_WINDOW,{name:WindowName.GET_CHIPS,data:105})},t.prototype.ondebug=function(){this.user.nowSkinId=-1,this.user.skinList=[],this.initSkin()},t.prototype.initSkin=function(){for(var e=this.config.getTable(ConfigProxy.SKIN),t=!1,i=0;i<e.length;i++){var o=e[i];if(o&&!this.user.skinList[o.id]){t=!0;var n=new SkinData;n.id=o.id,n.chipId=o.chip_id,n.skinName=o.skin_name,n.isget=!1,n.videNum=0,n.chipsNum=0,this.user.skinList[o.id]=n}}t&&this.user.saveSkinList()},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.onCloseBtn=function(e){PopUpManager.hide(this.view)},t.prototype.changeMusic=function(){"on"==this.view.music_btn.currentState?(this.view.music_btn.currentState="off",ToolUtil.isMusicOpen=!1,SoundManager.getInstance().stopSound()):(this.view.music_btn.currentState="on",ToolUtil.isMusicOpen=!0,SoundManager.getInstance().resumeSound())},t.prototype.changeSound=function(){"on"==this.view.sound_btn.currentState?(this.view.sound_btn.currentState="off",ToolUtil.isEffectOpen=!1):(this.view.sound_btn.currentState="on",ToolUtil.isEffectOpen=!0)},t.prototype.setCurrent=function(){ToolUtil.isEffectOpen?this.view.sound_btn.currentState="on":this.view.sound_btn.currentState="off",ToolUtil.isMusicOpen?this.view.music_btn.currentState="on":this.view.music_btn.currentState="off"},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),ClickBase.getInstance().off(this.view.sound_btn),ClickBase.getInstance().off(this.view.music_btn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="SetUpViewMediator",t}(BaseMediator);__reflect(SetUpViewMediator.prototype,"SetUpViewMediator");var SkinView=function(e){function t(){var t=e.call(this,"SkinSkin")||this,i=(PopUpManager.STAGE_HEIGHT-1280)/2;return t.skinscroller.height+=i,t.skinground.height+=i,t}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(SkinView.prototype,"SkinView");var SkinViewMediator=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.initRole(),o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.handleGoldChange(),this.initSkin(),this.game.hideBanner(),ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this),ClickBase.getInstance().on(this.view.dress,this.onDress,this),ClickBase.getInstance().on(this.view.takeoff,this.onTakeOff,this),ClickBase.getInstance().on(this.view.unlock,this.onUnlock,this),ClickBase.getInstance().on(this.view.videounlock,this.onUnlock,this),ClickBase.getInstance().on(this.view.seevideo,this.onVideo,this),ClickBase.getInstance().on(this.view.getchips,this.onGetChips,this),ClickBase.getInstance().on(this.view.chipicon,this.onTip,this,0),ClickBase.getInstance().on(this.view.coinbtn,this.onTip,this,1),ClickBase.getInstance().on(this.view.videobtn,this.onTip,this,2),this.view.unlock.scaleX=this.view.unlock.scaleY=.95,egret.Tween.get(this.view.unlock,{loop:!0}).to({scaleX:1.05,scaleY:1.05},600).to({scaleX:.95,scaleY:.95},600)},t.prototype.initRole=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.role=new DragonBase,[4,this.role.initDragon()];case 1:return e.sent(),this.view.rolebox.addChild(this.role),this.role.changeSkinById(this.data.id),this.role.play("3",0),[2]}})})},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case NotificationNames.GOLD_CHANGE:this.handleGoldChange();break;case NotificationNames.CHOSE_SKIN:this.onChoseSkin(t,!0)}},t.prototype.listNotificationInterests=function(){return[NotificationNames.GOLD_CHANGE,NotificationNames.CHOSE_SKIN]},t.prototype.initSkin=function(){for(var e=this.config.getTable(ConfigProxy.SKIN),t=[],i=0;i<e.length+(4-e.length%4);i++){var o=e[i];t.push(o)}this._myCollection=new eui.ArrayCollection,this._myCollection.replaceAll(t),this.view.skinList.itemRenderer=SkinItemRender,this.view.skinList.dataProvider=this._myCollection;var n=this.user.nowSkinId>=0?this.user.nowSkinId:1;this.onChoseSkin(n)},t.prototype.onTip=function(e){switch(e){case 0:var t=void 0,i=this.config.getChipByID(this.data.chip_id);for(var o in i)t=i.stage.split(",");PopUpManager.toast("通关"+t[0]+"到"+t[1]+"关可获得该碎片");break;case 1:PopUpManager.toast("攒够"+this.data.coins+"金币即可解锁皮肤");break;case 2:PopUpManager.toast("在此处观看"+this.data.ads+"次视频可解锁该条件")}},t.prototype.onDress=function(){this.user.nowSkinId=this.data.id,this.view.dress.visible=!1,this.view.takeoff.visible=!0,this._myCollection.refresh()},t.prototype.onTakeOff=function(){this.user.nowSkinId=-1,this.view.dress.visible=!0,this.view.takeoff.visible=!1,this._myCollection.refresh()},t.prototype.onUnlock=function(){this.user.gold>=this.data.coins?(this.user.gold-=this.data.coins,this.user.skinList[this.data.id].isget=!0,this.user.saveSkinList(),this.onChoseSkin(this.data.id),this._myCollection.refresh(),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.UNLOCK_SKIN,data:{skinid:this.data.id,type:0}})):PopUpManager.toast("当前金币不足")},t.prototype.onVideo=function(){NativeManager.playVideo(this,this.successHandler)},t.prototype.successHandler=function(){this.user.skinList[this.data.id].videNum++,this.user.saveSkinList(),this.onChoseSkin(this.data.id)},t.prototype.handleGoldChange=function(){this.view.cointext.text=this.user.gold+""},t.prototype.onChoseSkin=function(e,t){if(t){var i=new SheetMovieClip(60,EffectUrl.Dian_EFF);i.setList(1,12,"skinUI_json.xx00"),this.view.effect.addChild(i),i.start(1)}var o=this.config.getItemByID(ConfigProxy.SKIN,e);this.data=o,this.view.skinNameLab.text=o.skin_name;var n,s;if(1==o.quality?(n=8060451,s=1595147):2==o.quality?(n=1507324,s=742487):3==o.quality?(n=15746559,s=4066634):4==o.quality&&(n=16752181,s=6497040),this.view.skinNameLab.textColor=n,this.view.skinNameLab.strokeColor=s,this.view.skinDes.text=o.skin_desc,this.role&&this.role.armuture&&this.role.changeSkinById(this.data.id),this.user.skinList[e].isget)return this.view.coinlock.visible=!1,this.view.chiplock.visible=!1,this.view.videolock.visible=!1,void(e!=this.user.nowSkinId?(this.view.dress.visible=!0,this.view.takeoff.visible=!1):(this.view.dress.visible=!1,this.view.takeoff.visible=!0));if(this.user.skinList[e].chipsNum>=o.chips){if(0!=o.chips){this.view.coinlock.visible=!1,this.view.chiplock.visible=!0,this.view.videolock.visible=!1,this.view.takeoff.visible=!1,this.view.dress.visible=!1;var a=this.user.skinList[e].chipsNum>o.chips?o.chips:this.user.skinList[e].chipsNum;return this.view.chipicon.source="skinUI_json.chip"+o.chip_id,this.view.chipnum.text=a+"/"+o.chips,this.view.chipprogress.width=176*a/o.chips,void(this.view.compose.text="合成皮肤")}if(this.user.skinList[e].videNum>=o.ads&&o.coins>0){this.view.coinlock.visible=!0,this.view.chiplock.visible=!1,this.view.videolock.visible=!1,this.view.dress.visible=!1,this.view.takeoff.visible=!1;var r=this.user.gold>o.coins?o.coins:this.user.gold;this.view.coinnum.text=r+"/"+o.coins}else{this.view.coinlock.visible=!1,this.view.chiplock.visible=!1,this.view.videolock.visible=!0,this.view.dress.visible=!1,this.view.takeoff.visible=!1;var h=this.user.skinList[e].videNum>o.ads?o.ads:this.user.skinList[e].videNum;this.view.videonum.text=h+"/"+o.ads,this.view.videoprogress.width=176*h/o.ads,o.coins<=0&&h>=o.ads?(this.view.seevideo.visible=!1,this.view.videounlock.visible=!0):(this.view.seevideo.visible=!0,this.view.videounlock.visible=!1)}}else{this.view.coinlock.visible=!1,this.view.chiplock.visible=!0,this.view.videolock.visible=!1,this.view.takeoff.visible=!1,this.view.dress.visible=!1,this.view.compose.text="获取碎片";var a=this.user.skinList[e].chipsNum>o.chips?o.chips:this.user.skinList[e].chipsNum;this.view.chipicon.source="skinUI_json.chip"+o.chip_id,this.view.chipnum.text=a+"/"+o.chips,this.view.chipprogress.width=176*a/o.chips}},t.prototype.onCloseBtn=function(){this.sendNotification(NotificationNames.SKIN_BACK),PopUpManager.hide(this.view)},t.prototype.onGetChips=function(){return"合成皮肤"!=this.view.compose.text||this.user.skinList[this.data.id].isget?void this.onCloseBtn():(this.user.skinList[this.data.id].isget=!0,this.user.saveSkinList(),this.onChoseSkin(this.data.id),this._myCollection.refresh(),void this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.UNLOCK_SKIN,data:{skinid:this.data.id,type:0}}))},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),egret.Tween.removeTweens(this.view.unlock),ClickBase.getInstance().off(this.view.close_btn),ClickBase.getInstance().off(this.view.dress),ClickBase.getInstance().off(this.view.takeoff),ClickBase.getInstance().off(this.view.unlock),ClickBase.getInstance().off(this.view.videounlock),ClickBase.getInstance().off(this.view.seevideo),ClickBase.getInstance().off(this.view.getchips),ClickBase.getInstance().off(this.view.chipicon),ClickBase.getInstance().off(this.view.coinbtn),ClickBase.getInstance().off(this.view.videobtn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="SkinViewMediator",t}(BaseMediator);__reflect(SkinViewMediator.prototype,"SkinViewMediator");var SkinItemRender=function(e){function t(){var t=e.call(this)||this;return t.skinName="SkinItem",t.user=MainFacade.getInstance().retrieveProxy(UserProxy.NAME),t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onChoice,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onClose,t),t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data?(this.user.nowSkinId==this.data.id?this.changetype(0):this.user.skinList[this.data.id].isget?this.changetype(1):this.changetype(2),this.role.source="skinUI_json."+this.data.pic_id+"_new"):this.changetype(3)},t.prototype.changetype=function(e){0==e?(this.dress.visible=!0,this.tips.visible=!1,this.lock.visible=!1,this.bg.source="skinUI_json.bb_pf_07"):1==e?(this.dress.visible=!1,this.tips.visible=!1,this.lock.visible=!1,this.bg.source="skinUI_json.bb_pf_07"):2==e?(this.dress.visible=!1,this.tips.visible=!1,this.lock.visible=!0,this.bg.source="skinUI_json.bb_pf_07"):3==e&&(this.role.source="skinUI_json.bb_pf_02",this.dress.visible=!1,this.tips.visible=!0,this.lock.visible=!1,this.bg.source="skinUI_json.bb_pf_08")},t.prototype.onChoice=function(){this.dataChanged(),this.tips.visible||egret.Tween.get(this.role).to({scaleX:.85,scaleY:.85},150).to({scaleX:1.05,scaleY:1.05},180).to({scaleX:1,scaleY:1},50),this.data&&MainFacade.getInstance().sendNotification(NotificationNames.CHOSE_SKIN,this.data.id)},t.prototype.onClose=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChoice,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onClose,this),egret.Tween.removeTweens(this.role),DisplayUtil.removeAll(this)},t}(eui.ItemRenderer);__reflect(SkinItemRender.prototype,"SkinItemRender");var SkinData=function(){function e(){}return e}();__reflect(SkinData.prototype,"SkinData");var TestLevelView=function(e){function t(){return e.call(this,"TestLevelViewSkin")||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.dispose=function(){this.closeBtn=null,this.startGame=null,DisplayUtil.removeAll(this)},t}(BaseView);__reflect(TestLevelView.prototype,"TestLevelView");var TestLevelViewMediator=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.level=-1,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.init(),this.addEvent()},t.prototype.init=function(){this._sourceArr=[];for(var e=1;e<=GameDefine.MAX_LEVEL;e++)this._sourceArr.push({level:e});this._myCollection=new eui.ArrayCollection,this._myCollection.replaceAll(this._sourceArr),this.view.dgLevel.dataProvider=this._myCollection,this.view.dgLevel.itemRenderer=TestLevelItem},t.prototype.addEvent=function(){this.view.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.view.dgLevel.addEventListener(t.CHOICE_LEVEL,this.onChangeState,this),this.view.startGame.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBattle,this)
},t.prototype.onChangeState=function(e){this.level=e.data,PopUpManager.toast("选择第"+this.level+"关成功")},t.prototype.onStartBattle=function(){return-1==this.level?void PopUpManager.toast("请先选择关卡!"):void this.onenterBattle()},t.prototype.onenterBattle=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.user.level=this.level-1,this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:this.user.getCurrentLevelStr()}),this.sendNotification(NotificationNames.CLOSE_HOME),this.onClose(),[2]})})},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.onClose=function(){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.view.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.view.dgLevel.removeEventListener(t.CHOICE_LEVEL,this.onChangeState,this),this.view.startGame.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartBattle,this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="TestLevelViewMediator",t.CHOICE_LEVEL="choice_level",t}(BaseMediator);__reflect(TestLevelViewMediator.prototype,"TestLevelViewMediator");var TestLevelItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="TestLevelItemSkin",t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onClose,t),t.rect.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onChoice,t),t}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.level=this.data.level,this.txt.text="第"+this.level+"关"},t.prototype.onChoice=function(){this.dispatchEventWith(TestLevelViewMediator.CHOICE_LEVEL,!0,this.level)},t.prototype.onClose=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onClose,this),this.rect.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onChoice,this),DisplayUtil.removeAll(this)},t}(eui.ItemRenderer);__reflect(TestLevelItem.prototype,"TestLevelItem");var UnlockSkinView=function(e){function t(){return e.call(this,"UnlockSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(UnlockSkinView.prototype,"UnlockSkinView");var UnlockSkinViewMediator=function(e){function t(t,i){var o=e.call(this,GrowViewMediator.NAME,t)||this;return o.complete=!1,o.view.bg.height=PopUpManager.STAGE_HEIGHT,o.skinid=i.skinid,i.type?(o.view.get.visible=!0,o.view.share.visible=!1):(o.view.get.visible=!1,o.view.share.visible=!0,o.view.close_btn.visible=!1),o.initRole(),o.initsj(),o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.close_btn,this.onCloseBtn,this),ClickBase.getInstance().on(this.view.share,this.onCloseBtn,this),ClickBase.getInstance().on(this.view.get,this.onGet,this),this.view.share.scaleX=this.view.share.scaleY=.95,egret.Tween.get(this.view.share,{loop:!0}).to({scaleX:1.05,scaleY:1.05},600).to({scaleX:.95,scaleY:.95},600)},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.initsj=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return e=new DragonBase,[4,e.initDragon("sj")];case 1:return i.sent(),e.scaleX=-1,this.view.sjbox0.addChild(e),t=new DragonBase,[4,t.initDragon("sj")];case 2:return i.sent(),this.view.sjbox1.addChild(t),e.play("1",1),t.play("1",1),[2]}})})},t.prototype.initRole=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.light=new DragonBase,[4,this.light.initDragon("jinhua2")];case 1:return e.sent(),this.light.visible=!1,this.view.rolebox.addChild(this.light),this.role=new DragonBase,[4,this.role.initDragon("bb")];case 2:return e.sent(),this.view.rolebox.addChild(this.role),this.role.play("3",0),this.role.changeSkinById(this.skinid),this.complete=!0,[2]}})})},t.prototype.onShare=function(){var e=ToolUtil.share.relation,t=ToolUtil.getShareInfo(e["default"]);ToolUtil.shareAppWithoutBack(t)},t.prototype.onGet=function(){NativeManager.playVideo(this,this.successHandler)},t.prototype.successHandler=function(){PopUpManager.toast("穿戴完成"),this.user.skinList[this.skinid].isget=!0,this.user.saveSkinList(),this.user.nowSkinId=this.skinid,this.sendNotification(NotificationNames.CHANGE_SKIN,this.skinid),this.onCloseBtn()},t.prototype.onCloseBtn=function(){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),egret.Tween.removeTweens(this.view.share),this.timeout>=0&&egret.clearTimeout(this.timeout),ClickBase.getInstance().off(this.view.close_btn),ClickBase.getInstance().off(this.view.share),ClickBase.getInstance().off(this.view.get),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="UnlockSkinViewMediator",t}(BaseMediator);__reflect(UnlockSkinViewMediator.prototype,"UnlockSkinViewMediator");var WinView=function(e){function t(){return e.call(this,"WinViewSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(WinView.prototype,"WinView");var WinViewMediator=function(e){function t(i,o){var n=e.call(this,t.NAME,i)||this;return n.isget=!1,n.canclick=!0,n.initRole(o),n.initBiaoti(),n}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.game.createBanner({width:.8}),ClickBase.getInstance().on(this.view.video_btn,this.onVideo,this),ClickBase.getInstance().on(this.view.lookvideo,this.onSelectVideo,this),ClickBase.getInstance().on(this.view.addenergy,this.openEnergyShop,this),this.view.winAni.addEventListener(egret.Event.COMPLETE,this.onShake,this),this.view.deslable.text="观看视频领取",SoundManager.getInstance().playNewEffect(SoundManager.WINVIEW),egret.callLater(function(){this.view.winAni.play(0)},this),this.view.cointext.text=this.user.gold+"",this.view.energytext.text=this.user.energy+"",this.view.getOne.visible=!1,this.startTimer(),this.game.templevel>=0?AldUtil.aldEnd(this.game.templevel,3,!0):AldUtil.aldEnd(this.user.level,3,!0),this.level=this.game.templevel?this.game.templevel:this.user.level,this.createChips(),3==this.user.level&&(this.view.tips.visible=!0,this.view.talk.context.text="宝宝成年啦,可以穿更多好看的衣服,回主页看看吧"),4==this.user.level&&this.user.skinList[1]&&!this.user.skinList[1].isget&&egret.callLater(function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.UNLOCK_SKIN,data:{skinid:1,type:1}})},this),this.user.level<GameDefine.MAX_LEVEL&&this.user.win()},t.prototype.onSelectVideo=function(){this.canclick&&(this.view.videoPoint.visible=!this.view.videoPoint.visible,this.view.videoPoint.visible?(this.view.sign.visible=!0,this.view.getThree.visible=!0,this.view.getOne.visible=!1,this.view.coin.text="+1500"):(this.view.sign.visible=!1,this.view.getThree.visible=!1,this.view.getOne.visible=!0,this.view.coin.text="+500"))},t.prototype.onRestart=function(){return this.user.subEnergy()?(this.sendNotification(NotificationNames.CLOSE_MAINGAME),this.game.templevel>=0?(AldUtil.aldStart(this.game.templevel,1),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:this.user.getTempLevelStr(this.game.templevel)})):(AldUtil.aldStart(this.user.level,1),console.log("重玩",this.user.getRestasrtLevelStr),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_MAINGAME,data:this.user.getRestasrtLevelStr()})),void PopUpManager.hide(this.view)):(PopUpManager.toast("体力不足"),void this.openEnergyShop())},t.prototype.onShake=function(){egret.Tween.get(this.view.video_btn,{loop:!0}).to({scaleX:1.05,scaleY:1.05},300).to({scaleX:.95,scaleY:.95},600).to({scaleX:1,scaleY:1},300)},t.prototype.createChips=function(){var e,t=this.config.getTable(ConfigProxy.CHIPS);for(var i in t){var o=t[i].stage.split(",");if(Number(o[0])<=this.level+1&&Number(o[1])>=this.level+1){e=t[i];break}}e&&!this.ishaveSkin(e.id)&&Math.random()<=e.prob&&egret.callLater(function(){this.sendNotification(NotificationNames.OPEN_SINGLE_WINDOW,{name:WindowName.GET_CHIPS,data:e.id})},this)},t.prototype.ishaveSkin=function(e){for(var t in this.user.skinList){var i=this.user.skinList[t];if(!i)return!0;if(i.chipId==e)return i.isget}},t.prototype.initBiaoti=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=new DragonBase,[4,e.initDragon("biaoti")];case 1:return t.sent(),this.view.title.addChild(e),egret.setTimeout(function(){e.play("shengli",1)},this,400),[2]}})})},t.prototype.initRole=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return t=new DragonBase,this.role=t,[4,t.initDragon(e)];case 1:return i.sent(),t.scaleX=t.scaleY=.85,this.view.rolebox.addChild(t),-1!=e.indexOf("baobao")?(t.y-=90,t.play("xiao",0)):-1!=e.indexOf("yv")?(t.y-=85,t.play("3",0)):-1!=e.indexOf("feichuan")?(t.y-=85,t.play("daiji",0)):t.play("1",0),[2]}})})},t.prototype.handleNotification=function(e){var t=e.getBody();switch(e.getName()){case NotificationNames.GOLD_CHANGE:this.handleGoldChange();break;case NotificationNames.ENERGY_CHANGE:this.handleEnergyChange();break;case NotificationNames.CHANGE_SKIN:this.role.changeSkinById(t);break;case NotificationNames.UPDATEICON:ToolUtil.setShareOrVideoIcon(this.view.sign,"mainUI_json.BY_JKGG_053","mainUI_json.share1")}},t.prototype.listNotificationInterests=function(){return[NotificationNames.GOLD_CHANGE,NotificationNames.GOLD_TEMP_CHANGE,NotificationNames.CHANGE_SKIN,NotificationNames.UPDATEICON]},t.prototype.openEnergyShop=function(){this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_ENERGYSHOP})},t.prototype.flyCoinAni=function(e){egret.callLater(function(){for(var t=this,i=0,o=e?1500:500,n=ITEM_REWARD_TYPE.COIN,s=o,a=new egret.Point(this.view.rolebox.x,this.view.rolebox.y),r=this.view.group1.localToGlobal(this.view.iconend.x,this.view.iconend.y),h=s>20?20:s,l=[],c=0;h>c;c++){var u=new eui.Image;u.source=n==ITEM_REWARD_TYPE.COIN?"mainUI_json.BY_JSL_07":"mainUI_json.tili",u.anchorOffsetX=u.width/2,u.anchorOffsetY=u.height/2,u.scaleX=u.scaleY=1,u.x=a.x,u.y=a.y,u.rotation=Math.floor(361*Math.random()),this.view.addChild(u),l.push(u)}for(var c=0;c<l.length;c++)egret.Tween.get(l[c]).to({x:a.x+(100*Math.random()-50),y:a.y+(50*Math.random()-25)},350*Math.random()+150).wait(500).to({x:r.x,y:r.y,rotation:0},250).call(function(n){if(i++,l[n].visible=!1,t.view.cointext.text=Number(t.view.cointext.text)+~~(o/l.length)+"",l[n].parent&&l[n].parent.removeChild(l[n]),i==l.length)var s=egret.setTimeout(function(){egret.clearTimeout(s),this.onGet(e)},t,200)},this,[c])},this)},t.prototype.onGet=function(e){void 0===e&&(e=!1),e?this.addCoin(1500):this.addCoin(500),this.sendNotification(NotificationNames.CLOSE_MAINGAME),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_HOME}),PopUpManager.hide(this.view)},t.prototype.addCoin=function(e){this.isget||(this.user.gold+=e,this.isget=!0)},t.prototype.onVideo=function(){this.canclick&&(this.canclick=!1,this.view.videoPoint.visible?NativeManager.playVideo(this,this.successHandler,null):this.onHome())},t.prototype.videoFail=function(){this.canclick=!0},t.prototype.successHandler=function(){this.flyCoinAni(!0)},t.prototype.handleGoldChange=function(){this.view.cointext.text=this.user.gold+""},t.prototype.onHome=function(){this.sendNotification(NotificationNames.CLOSE_MAINGAME),this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_HOME}),this.addCoin(500),PopUpManager.hide(this.view)},t.prototype.handleEnergyChange=function(){this.view.energytext.text=this.user.energy+""},t.prototype.startTimer=function(){null==this.timer&&(this.timer=new RealTimer(1e3),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timeHandler,this)),this.timer.start(),this.timeHandler()},t.prototype.timeHandler=function(){if(this.user.energy>=GameDefine.MAX_ENERGY)this.view.labelCountDown.visible=!1;else{this.view.labelCountDown.visible=!0;var e=Math.floor((GameDefine.ENERGY_RECOVER_TIME+this.user.lastRecoverEnergyTime-this.user.serverTime)/1e3);this.view.labelCountDown.text=ToolUtil.timeToString(e,!1)}},t.prototype.stopTimer=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timeHandler,this),this.timer=null)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.game.hideBanner(),this.view.winAni.stop(),this.timeout>=0&&egret.clearTimeout(this.timeout),egret.Tween.removeTweens(this.view.video_btn),ClickBase.getInstance().off(this.view.video_btn),ClickBase.getInstance().off(this.view.addenergy),this.view.winAni.removeEventListener(egret.Event.COMPLETE,this.onShake,this),this.stopTimer(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="WinViewMediator",t}(BaseMediator);__reflect(WinViewMediator.prototype,"WinViewMediator",["IVideo"]);var Game0000=function(e){function t(t){return e.call(this,"GameSkin0000")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0000.prototype,"Game0000");var Game0001=function(e){function t(){return e.call(this,"GameSkin0001")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0001.prototype,"Game0001");var Game0002=function(e){function t(){return e.call(this,"GameSkin0002")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0002.prototype,"Game0002");var Game0003=function(e){function t(){return e.call(this,"GameSkin0003")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0003.prototype,"Game0003");var Game0004=function(e){function t(){return e.call(this,"GameSkin0004")||this}return __extends(t,e),t.prototype.initTipsMask=function(){if(!this.ShapeMask){this.point=new egret.Point,this.ShapeMask=new egret.Sprite,this.addChild(this.ShapeMask),this.dp=new egret.Sprite,this.dp.anchorOffsetX=50,this.dp.anchorOffsetY=50,this.dp.graphics.beginFill(16711680),this.dp.graphics.drawCircle(0,0,250),this.dp.graphics.endFill(),this.dp.blendMode=egret.BlendMode.ERASE;var e=new egret.Shape;e.graphics.beginFill(0,.7),e.graphics.drawRect(0,0,PopUpManager.STAGE_WIDTH,PopUpManager.STAGE_HEIGHT),e.graphics.endFill(),this.container=new egret.DisplayObjectContainer,this.container.addChild(e),this.container.addChild(this.dp),this.renderTexture=new egret.RenderTexture,this.renderTexture.drawToTexture(this.container),this.bitmap=new egret.Bitmap(this.renderTexture),this.ShapeMask.addChild(this.bitmap)}},t.prototype.clearMask=function(){egret.Tween.get(this.ShapeMask).to({alpha:0},300).call(function(){this.ShapeMask.removeChildren(),this.ShapeMask=null,this.container=null,this.dp.graphics.clear(),this.dp=null,this.renderTexture.dispose(),this.renderTexture=null,this.bitmap.texture.dispose(),this.bitmap=null,this.point=null},this)},t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0004.prototype,"Game0004");var Game0005=function(e){function t(){return e.call(this,"GameSkin0005")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0005.prototype,"Game0005");var Game0006=function(e){function t(){return e.call(this,"GameSkin0006")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0006.prototype,"Game0006");var Game0007=function(e){function t(){return e.call(this,"GameSkin0007")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0007.prototype,"Game0007");var Game0008=function(e){function t(){return e.call(this,"GameSkin0008")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0008.prototype,"Game0008");var Game0009=function(e){function t(){return e.call(this,"GameSkin0009")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0009.prototype,"Game0009");var Game0010=function(e){function t(){return e.call(this,"GameSkin0010")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0010.prototype,"Game0010");var Game0011=function(e){function t(){return e.call(this,"GameSkin0011")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0011.prototype,"Game0011");var Game0012=function(e){function t(){return e.call(this,"GameSkin0012")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0012.prototype,"Game0012");var Game0013=function(e){function t(){return e.call(this,"GameSkin0013")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0013.prototype,"Game0013");var Game0014=function(e){function t(){return e.call(this,"GameSkin0014")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0014.prototype,"Game0014");var Game0015=function(e){function t(){return e.call(this,"GameSkin0015")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0015.prototype,"Game0015");var Game0016=function(e){function t(){return e.call(this,"GameSkin0016")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0016.prototype,"Game0016");var Game0017=function(e){function t(){return e.call(this,"GameSkin0017")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0017.prototype,"Game0017");var Game0018=function(e){function t(){return e.call(this,"GameSkin0018")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0018.prototype,"Game0018");var Game0019=function(e){function t(){return e.call(this,"GameSkin0019")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0019.prototype,"Game0019");var Game0020=function(e){function t(){return e.call(this,"GameSkin0020")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0020.prototype,"Game0020");var Game0021=function(e){function t(){return e.call(this,"GameSkin0021")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0021.prototype,"Game0021");var Game0022=function(e){function t(){return e.call(this,"GameSkin0022")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0022.prototype,"Game0022");var Game0023=function(e){function t(){return e.call(this,"GameSkin0023")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(GameMap);__reflect(Game0023.prototype,"Game0023");var GameDefault=function(e){function t(t){return e.call(this,GameMediator0001.NAME,t)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.initRole("baobao")},t.prototype.initRoleComplete=function(){this.role.play("daiji",0),this.view.rolebox.addChild(this.role),this.startGame()},t.prototype.startGame=function(){this.sendNotification(NotificationNames.SHOW_SELECT,[14,11])},t.prototype.eventResult=function(e){},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0001",t}(GameBase);__reflect(GameDefault.prototype,"GameDefault");var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},egret.ImageLoader.crossOrigin="anonymous",t.INSTANCE=this;var i=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",i),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return NativeManager.NativeCallBackSetup(),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return e.sent(),[4,RES.loadGroup("preload")];case 2:return e.sent(),this._SystemInfo=platform.getSystemInfoSync(),PopUpManager.STAGE_WIDTH=this.stage.stageWidth,PopUpManager.STAGE_HEIGHT=this.stage.stageHeight,PopUpManager.container=this,PopUpManager.STAGE_HEIGHT/PopUpManager.STAGE_WIDTH>2&&(ToolUtil.isX=!0),console.log("egret.Capabilities.renderMode:"+egret.Capabilities.renderMode),RES.setIsCompatible(!0),ToolUtil.checkUpdateVer(),MainFacade.getInstance().startup(this),console.log("scaleMode"+this.stage.scaleMode),[2]}})})},t}(eui.UILayer);__reflect(Main.prototype,"Main");var GameMediator0000=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.zhizhu=new DragonBase,o.mom=new DragonBase,o.mom_point=new egret.Point,o.role_point=new egret.Point,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(0)},t.prototype.loadSubOK=function(){this.initZhiZhu(),this.initRole("baobao")},t.prototype.initZhiZhu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.zhizhu.initDragon("zhizhu")];case 1:return e.sent(),this.view.zhizhugroup.addChild(this.zhizhu),this.view.zhizhugroup.y-=(PopUpManager.STAGE_HEIGHT-1280)/2,this.zhizhu.play("2",0),[4,this.mom.initDragon("mama")];case 2:return e.sent(),this.view.rolebox0.addChild(this.mom),this.mom_point.setTo(this.view.rolebox0.x,this.view.rolebox0.y),[2]}})})},t.prototype.initRoleComplete=function(){this.AnimationEndByLoop(this.role,"daiji",2e3,this.gameStep0,this)},t.prototype.gameStep0=function(){this.showTalk(this.view.talk0,"宝宝饿了怎么办？"),this.role.play("ku",0),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[0,1])},this,2500)},t.prototype.gameStep1=function(){egret.Tween.get(this.view.cord).to({height:this.view.cord.height+(PopUpManager.STAGE_HEIGHT-1280)/2+500},1800),egret.Tween.get(this.zhizhu).to({y:(PopUpManager.STAGE_HEIGHT-1280)/2+500},1800).call(function(){this.role.play("ku",0),this.showTalk(this.view.talk0,"宝宝遇到了蜘蛛有危险")},this),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[11,2])},this,4e3)},t.prototype.gameStep1_5=function(){this.mom.play("zou",0),egret.Tween.get(this.view.rolebox0).to({x:350},3e3).call(function(){egret.setTimeout(function(){egret.Tween.get(this.zhizhu).to({rotation:360,x:this.zhizhu.x+600,y:this.zhizhu.y-600},1e3)},this,600),this.AnimationEndByTimes(this.mom,"da",1,function(){this.role.play("xiao",0),this.nextStep(),this.AnimationEndByLoop(this.mom,"daiji",300,function(){this.mom.scaleX=-1,this.mom.play("zou",0),egret.Tween.get(this.view.rolebox0).to({x:-110},3e3).call(this.gameStep2,this)},this)},this)},this)},t.prototype.gameStep2=function(){this.disappear(this.zhizhu),this.disappear(this.view.door),egret.setTimeout(function(){egret.Tween.get(this.view.rolebox).to({y:this.view.rolebox.y+80},1e3).call(function(){}),this.startWalk()},this,1500)},t.prototype.startWalk=function(){this.role.play("pa",0),egret.Tween.get(this.view.toy).to({x:this.view.toy.x-500},5e3),egret.Tween.get(this.view.bg).to({x:this.view.bg.x-500},5e3).call(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[42,12]),this.role.play("daiji",0),this.showTalk(this.view.talk0,"宝宝想出去玩，遇到玩具挡路了怎么办")},this)},t.prototype.eventResult=function(e){this.view.talk0.visible=!1,this.view.talk1.visible=!1,0==e?egret.setTimeout(function(){this.showTalk(this.view.talk0,"宝宝太小还不能吃面包"),this.FailCompleted()},this,200):1==e?this.AnimationEndByTimes(this.role,"henai",1,function(){this.role.play("xiao",0),this.nextStep(),egret.setTimeout(this.gameStep1,this,2e3)},this):2==e?this.AnimationEndByTimes(this.role,"du",1,this.FailCompleted,this,1e3):42==e?this.AnimationEndByTimes(this.role,"shuai",1,this.FailCompleted,this,1e3):11==e?egret.setTimeout(this.gameStep1_5,this,1e3):12==e&&(this.nextStep(),egret.setTimeout(function(){this.role.play("pa",0),egret.Tween.get(this.view.rolebox).to({y:this.view.rolebox.y-50},400).to({x:this.view.rolebox.x+500},3e3).call(function(){this.WinCompleted(1)},this)},this,1500))},t.prototype.reviveStepTwo=function(){egret.Tween.removeAllTweens(),this.zhizhu.y=0,this.view.cord.height=41,this.role.play("daiji",0),egret.setTimeout(this.gameStep1,this,1e3)},t.prototype.reviveStepThree=function(){this.role.play("xiao",0),this.view.rolebox.x=418.78,this.view.rolebox.y=737.8,this.view.toy.x=982.21,this.view.bg.x=0,this.view.door.alpha=1,this.gameStep2()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0000",t}(GameBase);__reflect(GameMediator0000.prototype,"GameMediator0000");var GameMediator0001=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.music=new DragonBase,o.mom0=new DragonBase,o.mom1=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(1)},t.prototype.loadSubOK=function(){this.initMom(),this.initMusic(),this.initRole("baobao")},t.prototype.initRoleComplete=function(){this.role.play("daiji",0),this.startGame()},t.prototype.initMusic=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.music.initDragon("yy")];case 1:return e.sent(),this.view.musicbox.addChild(this.music),[2]}})})},t.prototype.initMom=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.mom0.initDragon("zhenmama")];case 1:return e.sent(),this.mom0.play("daiji",0),this.mom0.scaleX=-1,this.view.mombox0.addChild(this.mom0),[4,this.mom1.initDragon("jiamama")];case 2:return e.sent(),this.view.mombox1.addChild(this.mom1),this.mom1.play("daiji",0),this.mom1.scaleX=-1,[2]}})})},t.prototype.startGame=function(){this.role.play("pa",0),egret.Tween.get(this.view.rolebox).to({x:30.72},2e3).call(function(){this.role.play("daiji",0),this.showTalk(this.view.talk0,"哪个才是宝宝的妈妈呢？"),this.sendNotification(NotificationNames.SHOW_SELECT,[14,11])},this)},t.prototype.goToMom=function(e){this.hideTalk(this.view.talk0),this.role.play("pa",0),e?egret.Tween.get(this.view.rolebox).to({x:350},4500).call(function(){this.AnimationEndByTimes(this.mom0,"shengli",1,function(){this.showTalk(this.view.talk1,"我的宝宝好聪明呀"),this.nextStep(),this.mom0.play("daiji",0),egret.setTimeout(this.listenMusicEvent,this,2500)},this),this.role.play("daiji",0)},this):egret.Tween.get(this.view.rolebox).to({x:530},6400).call(function(){this.AnimationEndByTimes(this.mom0,"shibai",1,function(){this.showTalk(this.view.talk2,"我的宝宝好像不太聪明的样子"),this.FailCompleted()},this),this.role.play("daiji",0)},this)},t.prototype.listenMusicEvent=function(){this.showTalk(this.view.talk1,"奖励宝宝听音乐，宝宝想听哪种"),this.sendNotification(NotificationNames.SHOW_SELECT,[15,16])},t.prototype.listenToMusic=function(e){if(this.view.musicbox.visible=!0,e)this.nextStep(),this.showTalk(this.view.talk1,"舒缓的音乐有助于宝宝的成长呢"),this.music.play("1",0),egret.setTimeout(function(){this.user.isgrow1?this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_WINVIEW,data:this.role.dragonName}):this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_GROW,data:1,alpha:.9})},this,4e3);else{this.showTalk(this.view.talk1,"好吵啊！");var t=this.view.bg.x,i=this.view.bg.y;egret.Tween.get(this.view.bg,{loop:!0}).to({x:t+this.RandomNum(-8,8),y:i+this.RandomNum(-8,8)},120),this.AnimationEndByTimes(this.music,"2",2,function(){this.FailCompleted(),egret.setTimeout(function(){egret.Tween.removeTweens(this.view.bg)},this,1e3)},this)}},t.prototype.RandomNum=function(e,t){var i=t-e,o=Math.random(),n=e+o*i;return n},t.prototype.step3=function(){this.nextStep(),this.WinCompleted()},t.prototype.eventResult=function(e){14==e?this.goToMom(!1):11==e?this.goToMom(!0):15==e?this.listenToMusic(!0):16==e&&this.listenToMusic(!1)},t.prototype.reviveStepTwo=function(){this.view.musicbox.visible=!1,this.view.bg.x=0,this.view.bg.y=0,this.mom0.play("daiji",0),this.view.talk1.alpha=0,egret.setTimeout(this.listenMusicEvent,this,2500)},t.prototype.reviveStepThree=function(){},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0001",t}(GameBase);__reflect(GameMediator0001.prototype,"GameMediator0001");var GameMediator0002=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.A=new DragonBase,o.B=new DragonBase,o.C=new DragonBase,o.SDLR=new DragonBase,o.xiaotou=new DragonBase,o.jingche=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(2)},t.prototype.loadSubOK=function(){this.initSDLR(),this.initA(),this.initB(),this.initC(),this.initRole("yv"),this.initxiaotou(),this.initjingche()},t.prototype.initA=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.A.initDragon("A")];case 1:return e.sent(),this.A.scaleX=this.A.scaleY=.8,this.A.play("1",0),this.view.Abox.addChild(this.A),[2]}})})},t.prototype.initB=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.B.initDragon("B")];case 1:return e.sent(),this.B.scaleX=this.B.scaleY=.8,this.B.play("1",0),this.view.Bbox.addChild(this.B),[2]}})})},t.prototype.initC=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.C.initDragon("C")];case 1:return e.sent(),this.C.scaleX=this.C.scaleY=.8,this.C.play("1",0),this.view.Cbox.addChild(this.C),[2]}})})},t.prototype.initSDLR=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.SDLR.initDragon("sdlr")];case 1:return e.sent(),this.SDLR.scaleX=this.SDLR.scaleY=.8,this.SDLR.play("4",0),this.view.SDLRbox.addChild(this.SDLR),[2]}})})},t.prototype.initxiaotou=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.xiaotou.initDragon("xiaotou")];case 1:return e.sent(),this.xiaotou.scaleX=this.xiaotou.scaleY=.8,this.xiaotou.play("2",0),this.view.xiaotoubox.addChild(this.xiaotou),[2]}})})},t.prototype.initjingche=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.jingche.initDragon("jingche")];case 1:return e.sent(),this.jingche.scaleX=this.jingche.scaleY=.8,this.jingche.play("1",0),this.view.jingchebox.addChild(this.jingche),[2]
}})})},t.prototype.initRoleComplete=function(){this.role.play("1",0),this.startGame()},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:52.72},2e3).call(function(){this.role.play("1",0),egret.setTimeout(function(){this.showTalk(this.view.talk0,"是谁撞倒了圣诞老爷爷呀？"),this.sendNotification(NotificationNames.SHOW_SELECT,[19,18,17])},this,1e3)},this)},t.prototype.gameStep1=function(){this.role.armuture.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.role.dispose,this.role),this.view.main.addChild(this.view.rolebox);var e=new egret.Point;e=this.view.bg.localToGlobal(this.view.rolebox.x,this.view.rolebox.y),e=this.view.main.globalToLocal(e.x,e.y),this.view.rolebox.y=e.y,this.view.rolebox.x=e.x,this.role.armuture.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.role.dispose,this.role),egret.Tween.get(this.view.reshow).to({alpha:0},500).call(function(){this.showTalk(this.view.talk0,"果然是你做的！",0,1300),this.showTalk(this.view.talk3,"我知道错了，我会把他送去医院的",1600,2e3,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"3",1,function(){this.gameStep2()})},this)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:this.view.rolebox.x+300},9500),egret.setTimeout(function(){this.role.play("2a",0),egret.Tween.get(this.view.xiaotoubox).to({x:100},4500)},this,5e3),egret.Tween.get(this.view.bg).to({x:this.view.bg.x-950},9500).call(function(){this.xiaotou.play("1",0),this.role.scaleX=-1,this.role.play("1a",0),this.showTalk(this.view.talk4,"遇到一个小偷，如何摆脱他"),this.sendNotification(NotificationNames.SHOW_SELECT,[4,7])},this)},t.prototype.creteBanana=function(){this.hideTalk(this.view.talk4),this.banana=new eui.Image("ItemUI_json.item7"),this.view.main.addChild(this.banana),this.xiaotou.armuture.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.xiaotou.dispose,this.xiaotou),this.view.main.addChild(this.view.xiaotoubox),this.xiaotou.armuture.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.xiaotou.dispose,this.xiaotou),this.banana.anchorOffsetX=94,this.banana.anchorOffsetY=46,this.banana.x=this.view.rolebox.x-100,this.banana.y=this.view.rolebox.y-10,this.banana.scaleX=this.banana.scaleY=.5,this.xiaotou.play("2",0),egret.Tween.get(this.view.xiaotoubox).to({x:this.view.xiaotoubox.x+100},500).call(function(){this.xiaotou.play("6",1),this.nextStep(),this.AnimationEndByTimes(this.role,"3",1,function(){this.gameStep3()})},this)},t.prototype.gameStep3=function(){var e=this.view.bg.x;this.role.scaleX=1,this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:this.view.rolebox.x+50},5e3),egret.Tween.get(this.view.bg).to({x:e-400},5500).call(function(){egret.Tween.get(this.view.bg).to({x:this.view.bg.x-218},3e3),this.xiaotou.play("2",0),this.role.play("2a",0),egret.Tween.get(this.view.xiaotoubox).to({x:this.view.xiaotoubox.x+400},3e3).call(function(){this.view.talk4.x+=50,this.showTalk(this.view.talk4,"小偷紧追不舍，该怎么办"),this.role.scaleX=-1,this.role.play("1a",0),this.xiaotou.play("1",0),this.sendNotification(NotificationNames.SHOW_SELECT,[5,6])},this)},this),egret.Tween.get(this.banana).to({x:this.banana.x-400},5500),egret.Tween.get(this.view.xiaotoubox).to({x:this.view.xiaotoubox.x-400},5500)},t.prototype.eventResult=function(e){if(18==e)this.hideTalk(this.view.talk0),this.showTalk(this.view.talk1,"不是我啊，旁边人都能作证"),egret.setTimeout(function(){this.role.play("1a",0),this.FailCompleted()},this,1e3);else if(17==e)this.hideTalk(this.view.talk0),this.showTalk(this.view.talk2,"真不是我，你没证据"),egret.setTimeout(function(){this.role.play("1a",0),this.FailCompleted()},this,1e3);else if(4==e)this.AnimationEndByTimes(this.role,"8",1,function(){this.showTalk(this.view.talk4,"锤子太重，我拿不动啊..."),this.role.play("7",0),this.FailCompleted()},this);else if(7==e)this.AnimationEndByTimes(this.role,"9",1,function(){this.role.play("1",0)},this),egret.setTimeout(this.creteBanana,this,420);else if(5==e)this.jingche.armuture.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.jingche.dispose,this.jingche),this.view.main.addChild(this.view.jingchebox),this.jingche.armuture.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.jingche.dispose,this.jingche),this.hideTalk(this.view.talk4),this.AnimationEndByTimes(this.role,"4",1,function(){this.role.play("1",0),SoundManager.getInstance().playNewEffect(SoundManager.PLOLICE),egret.Tween.get(this.view.jingchebox).to({x:100},800).call(function(){this.jingche.play("2",0),egret.setTimeout(function(){this.disappear(this.xiaotou)},this,500)},this).wait(1300).call(function(){this.jingche.play("1",0)},this).to({x:1100},1200).call(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"3",1,function(){this.role.play("3",0),this.WinCompleted()})},this)},this);else if(6==e)this.hideTalk(this.view.talk4),this.role.scaleX=1,egret.setTimeout(function(){egret.Tween.get(this.view.main).to({x:-120},2e3)},this,200),this.AnimationEndByTimes(this.role,"5",1,function(){egret.Tween.removeTweens(this.view.bg),this.xiaotou.play("2",0),egret.Tween.get(this.view.xiaotoubox).to({x:this.view.xiaotoubox.x+300},2300).call(function(){this.showTalk(this.view.talk5,"这点障碍也想阻碍我？"),this.xiaotou.play("4",1),this.role.play("6",0),this.FailCompleted()},this)},this);else if(19==e){this.hideTalk(this.view.talk0);var t=new egret.BlurFilter(0,0);this.view.filters=[t],egret.Tween.get(t).to({blurX:255,blurY:255},1e3).call(function(){this.SDLR.play("1",0),this.view.Cbox.x=-80,this.view.reshow.visible=!0},this).to({blurX:0,blurY:0},1e3).call(function(){this.showTalk(this.view.talk0,"案情好像重演了~",0,1300),egret.setTimeout(function(){this.C.play("3",1),egret.Tween.get(this.view.Cbox).to({x:155},670).call(function(){this.AnimationEndByTimes(this.SDLR,"2",1,this.gameStep1,this)},this)},this,1e3)},this)}},t.prototype.reviveStepTwo=function(){this.role.play("1",0),this.view.rolebox.x=52.72,this.view.xiaotoubox.x=-150,this.view.bg.x=0,this.role.scaleX=1,this.view.talk4.alpha=0,this.xiaotou.play("2",0),this.gameStep2()},t.prototype.reviveStepThree=function(){this.xiaotou.gotoAndStopByProgress("6"),this.view.main.x=0,this.view.bg.x=-950,this.role.play("1",0),this.role.scaleX=-1,this.view.rolebox.x=352.72,this.view.xiaotoubox.x=200,this.view.talk4.x=388.08,this.banana.x=252.72,this.view.talk5.alpha=0,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0002",t}(GameBase);__reflect(GameMediator0002.prototype,"GameMediator0002");var GameMediator0003=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.xiaotou=new DragonBase,o.jc=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(3)},t.prototype.loadSubOK=function(){this.initRole("yv"),this.initxiaotou(),this.initjc()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.7,this.role.play("1",0),this.startGame()},t.prototype.initxiaotou=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.xiaotou.initDragon("3xiaotou")];case 1:return e.sent(),this.xiaotou.scaleX=this.xiaotou.scaleY=.6,this.xiaotou.play("1",0),this.view.xiaotoubox.addChild(this.xiaotou),[2]}})})},t.prototype.initjc=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.jc.initDragon("3jc")];case 1:return e.sent(),this.view.jcbox.addChild(this.jc),this.jc.visible=!1,[2]}})})},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:200},3e3).call(function(){this.role.play("1",0),this.showTalk(this.view.talk0,"这个人鬼鬼祟祟在做什么？",0,2e3,function(){this.showTalk(this.view.talk1,"这些画装不下了，只能毁掉了",0,2e3,function(){egret.setTimeout(function(){this.showTalk(this.view.talk0,"不行，我要阻止他"),this.sendNotification(NotificationNames.SHOW_SELECT,[64,35])},this,1e3)},this)},this)},this)},t.prototype.gameStep1=function(){this.showTalk(this.view.talk0,"小贼哪里跑",0,2e3,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:980},5500).call(function(){this.role.play("1",0),this.showTalk(this.view.talk2,"看我把他们都毁掉",500,2e3,function(){this.AnimationEndByTimes(this.xiaotou,"7",1,function(){this.xiaotou.play("1",0)},this),egret.setTimeout(function(){egret.Tween.get(this.view.picture).to({rotation:270,x:1400,y:950},500).call(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[51,29])},this)},this,420)},this)},this),egret.Tween.get(this.view.bg).to({x:-800},6e3)},this)},t.prototype.eventResult=function(e){64==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"12",1,function(){this.showTalk(this.view.talk0,"我力气太小了。。"),this.FailCompleted(1)},this)):35==e?(this.hideTalk(this.view.talk0),egret.setTimeout(function(){this.AnimationEndByTimes(this.xiaotou,"9",1,function(){this.xiaotou.play("1",0)})},this,1300),this.AnimationEndByTimes(this.role,"13",1,function(){this.role.play("1",0),this.showTalk(this.view.talk1,"好像被发现了，我要赶紧溜",500,2e3,function(){this.xiaotou.play("2",0),egret.Tween.get(this.view.xiaotoubox).to({x:1220},5e3).call(function(){this.xiaotou.play("1",0)},this),this.nextStep(),this.AnimationEndByTimes(this.role,"3",1,function(){this.role.play("1",0),this.gameStep1()})},this)},this)):51==e?(this.showTalk(this.view.talk4,"警察叔叔快来呀"),this.AnimationEndByLoop(this.role,"7",2e3,function(){this.jc.visible=!0,this.AnimationEndByTimes(this.jc,"2",1,function(){this.hideTalk(this.view.talk4),this.AnimationEndByTimes(this.jc,"1",1,function(){this.role.play("1",0),this.showTalk(this.view.talk3,"证据确凿，人我带走了",0,2e3,function(){egret.Tween.get(this.view.jcbox).to({y:-500,alpha:0},600),egret.Tween.get(this.view.xiaotoubox).to({y:-500,alpha:0},600),this.nextStep(),this.AnimationEndByTimes(this.role,"3",1,function(){this.role.play("3",0),egret.setTimeout(function(){this.user.isgrow2?this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_WINVIEW,data:this.role.dragonName}):this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_GROW,data:2,alpha:.9})},this,2e3)})},this)})})})):29==e&&(this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1070},1e3).call(function(){this.AnimationEndByTimes(this.role,"15",1,function(){this.FailCompleted()},this)},this))},t.prototype.reviveStepTwo=function(){this.view.bg.x=0,this.view.picture.x=1372,this.view.picture.y=758,this.view.picture.rotation=0,this.role.play("1",0),this.view.rolebox.x=200,this.gameStep1()},t.prototype.reviveStepThree=function(){},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0003",t}(GameBase);__reflect(GameMediator0003.prototype,"GameMediator0003");var GameMediator0004=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.A=new DragonBase,o.B=new DragonBase,o.C=new DragonBase,o.D=new DragonBase,o.jiangshi=new DragonBase,o.biao=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(4)},t.prototype.loadSubOK=function(){this.initA(),this.initB(),this.initC(),this.initD(),this.initjiangshi(),this.initbiao(),this.initRole("bb")},t.prototype.initA=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.A.initDragon("4A")];case 1:return e.sent(),this.A.scaleX=this.A.scaleY=.8,this.A.play("daiji",0),this.view.Abox.addChild(this.A),[2]}})})},t.prototype.initB=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.B.initDragon("4B")];case 1:return e.sent(),this.B.scaleX=this.B.scaleY=.8,this.B.play("daiji",0),this.view.Bbox.addChild(this.B),[2]}})})},t.prototype.initC=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.C.initDragon("4C")];case 1:return e.sent(),this.C.scaleX=this.C.scaleY=.8,this.C.play("daiji",0),this.view.Cbox.addChild(this.C),[2]}})})},t.prototype.initD=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.D.initDragon("4D")];case 1:return e.sent(),this.D.scaleX=this.D.scaleY=.8,this.D.play("daiji",0),this.view.Dbox.addChild(this.D),[2]}})})},t.prototype.initjiangshi=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.jiangshi.initDragon("jiangshi")];case 1:return e.sent(),this.jiangshi.scaleX=this.jiangshi.scaleY=.8,this.jiangshi.play("2",0),this.view.jiangshibox.addChild(this.jiangshi),[2]}})})},t.prototype.initbiao=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.biao.initDragon("biao")];case 1:return e.sent(),[2]}})})},t.prototype.initRoleComplete=function(){this.role.play("3",0),this.role.scaleX=this.role.scaleY=.8,this.startGame()},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:47.68},2e3).call(function(){this.role.play("3b",0),egret.setTimeout(function(){this.showTalk(this.view.talk0,"好像有人作弊了，到底是谁呢？"),this.sendNotification(NotificationNames.SHOW_SELECT,[18,19,38,17])},this,1e3)},this)},t.prototype.draw=function(){this.view.dp.x=PopUpManager.STAGE_WIDTH/2+50,this.view.dp.y=PopUpManager.STAGE_HEIGHT/2,this.view.dp.scaleX=this.view.dp.scaleY=1,this.view.renderTexture.drawToTexture(this.view.container),this.view.bitmap=new egret.Bitmap(this.view.renderTexture)},t.prototype.showGameStep1=function(){this.view.initTipsMask(),this.draw();var e=this.view.Cbox.localToGlobal(this.D.x,this.D.y);egret.Tween.get(this.view.base).to({scaleX:1.8,scaleY:1.8,x:1.8*(360-(e.x+141))+360,y:756+28*(PopUpManager.STAGE_HEIGHT/2-(e.y-213))},1e3).call(function(){this.D.play("2",1)},this).wait(2e3).call(function(){this.D.play("daiji",0),this.view.clearMask()},this).to({scaleX:1,scaleY:1,x:360,y:756},500).wait(500).call(function(){this.showTalk(this.view.talk3,"这都被你发现了吗",0,2e3,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:400},3e3).call(function(){this.role.play("3",0),this.showTalk(this.view.talk2,"下次不要作弊了！",300,2500,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.showGameStep2()})},this)},this)},this)},this)},t.prototype.showGameStep2=function(){this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-1e3},7500).call(function(){this.role.play("3",0),this.role.scaleX*=-1,this.showTalk(this.view.talk2,"哎？什么声音",300,2200,function(){SoundManager.getInstance().startSound(SoundManager.NERVOUS),egret.setTimeout(function(){SoundManager.getInstance().playNewEffect(SoundManager.JINGKONG),this.role.play("25",1)},this,1800),egret.Tween.get(this.view.jiangshibox).to({x:190},5e3).call(function(){this.jiangshi.play("1",0),this.sendNotification(NotificationNames.SHOW_SELECT,[31,32])},this)},this)},this)},t.prototype.showGameStep3=function(){this.showTalk(this.view.talk2,"时光倒流后他还会回来的,我得想想办法",300,2200,function(){this.role.play("2a",0),this.role.armuture.animation.timeScale=2,this.role.scaleX*=-1,this.view.jiangshibox.x=-500,egret.Tween.get(this.view.jiangshibox).to({x:190},5e3).call(function(){this.jiangshi.play("1",0)},this),egret.Tween.get(this.view.bg).to({x:-2100},5e3).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk2,"门被锁住了，怎么办"),this.view.door1.visible=!0;var e=this.view.bg.localToGlobal(this.view.door1.x,this.view.door1.y);e=this.view.base.globalToLocal(e.x,e.y),this.view.base.addChild(this.view.door1),this.view.door1.x=e.x,this.view.door1.y=e.y,this.sendNotification(NotificationNames.SHOW_SELECT,[33,34])},this)},this)},t.prototype.eventResult=function(e){17==e?(this.hideTalk(this.view.talk0),this.showTalk(this.view.talk5,"我没有作弊啊...",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):18==e?(this.hideTalk(this.view.talk0),this.showTalk(this.view.talk1,"你没证据就诬陷人...",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):19==e?(this.hideTalk(this.view.talk0),this.showTalk(this.view.talk2,"我学习很好的不用作弊...",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):38==e?(this.hideTalk(this.view.talk0),this.showGameStep1()):32==e?this.AnimationEndByTimes(this.role,"9",1,function(){this.role.play("3",0),this.view.biaobox.addChild(this.biao),SoundManager.getInstance().playNewEffect(SoundManager.DIDA),this.AnimationEndByTimes(this.biao,"1",1,function(){this.jiangshi.play("2",0),this.view.biaobox.visible=!1,egret.Tween.get(this.view.jiangshibox).to({x:-166.32},5e3).call(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.showGameStep3()})},this)},this)},this):31==e?this.AnimationEndByTimes(this.role,"4",1,function(){this.showTalk(this.view.talk2,"怎么是玩具枪...",0,2e3,this.FailCompleted,this)},this):33==e?(this.role.armuture.animation.timeScale=1,this.hideTalk(this.view.talk2),this.AnimationEndByTimes(this.role,"10",1,function(){this.showTalk(this.view.talk2,"钥匙怎么断了...",0,2e3,this.FailCompleted,this)},this)):34==e&&(this.view.door1.visible=!0,this.hideTalk(this.view.talk2),this.role.armuture.animation.timeScale=1,this.AnimationEndByTimes(this.role,"6",3,function(){this.view.door.visible=!1,this.view.door0.visible=!0,this.role.armuture.animation.timeScale=2,this.nextStep(),this.role.play("2a",0),egret.Tween.get(this.view.rolebox).to({x:900},2e3).call(function(){SoundManager.getInstance().startSound(SoundManager.BGM),this.WinCompleted(1)},this)},this))},t.prototype.reviveStepTwo=function(){this.view.rolebox.x=400,this.role.play("3",0),this.view.bg.x=0,this.role.scaleX=Math.abs(this.role.scaleX),this.view.jiangshibox.x=-166.32,this.jiangshi.play("2",0),this.showGameStep2()},t.prototype.reviveStepThree=function(){this.view.door1.visible=!1,this.view.door1.x=2642.07,this.view.door1.y=437.6,this.role.play("3",0),this.view.jiangshibox.x=-166.32,this.role.scaleX=-Math.abs(this.role.scaleX),this.view.bg.x=-1e3,this.jiangshi.play("2",0),this.showGameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0004",t}(GameBase);__reflect(GameMediator0004.prototype,"GameMediator0004");var GameMediator0005=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.huaping=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(5)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.inithuaping(),this.initDian()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.inithuaping=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.huaping.initDragon("huaping")];case 1:return e.sent(),this.huaping.scaleX=this.huaping.scaleY=.6,this.huaping.armuture.animation.gotoAndStopByProgress("1",0),this.view.huapingbox.addChild(this.huaping),[2]}})})},t.prototype.initDian=function(){var e=new SheetMovieClip(60,EffectUrl.Dian_EFF);e.y=150,e.x=-50,e.start(0),this.sheetGroup.push(e),this.view.dianbox.addChild(e)},t.prototype.initShaLou=function(){var e=new SheetMovieClip(20,EffectUrl.Dian_EFF);e.setList(1,44,"scene5_json.sl00"),e.y=-112,e.x=-114,e.start(3),this.view.biaobox.addChild(e)},t.prototype.startEarthquake=function(){SoundManager.getInstance().startSound(SoundManager.NERVOUS);var e=this.view.bg.x,t=this.view.bg.y;egret.Tween.get(this.view.bg,{loop:!0}).to({x:e+this.RandomNum(-8,8),y:t+this.RandomNum(-8,8)},120),this.quakeAni(this.view.picture),this.quakeAni(this.view.tong),this.quakeAni(this.view.ping0),this.quakeAni(this.view.ping1),this.quakeAni(this.view.ping2),this.quakeAni(this.view.light)},t.prototype.RandomNum=function(e,t){var i=t-e,o=Math.random(),n=e+o*i;return n},t.prototype.quakeAni=function(e){egret.Tween.get(e,{loop:!0}).to({rotation:3},100+50*Math.random()).to({rotation:-3},250+50*Math.random()).to({rotation:0},100+50*Math.random())},t.prototype.startGame=function(){this.startEarthquake(),this.role.play("2",0),this.view.bg.x=-10,egret.Tween.get(this.view.rolebox).to({x:330},3300).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"地震了，怎么办啊"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[20,37])},this,2e3)},this)},t.prototype.gameStep2=function(){egret.setTimeout(function(){egret.Tween.removeAllTweens(),SoundManager.getInstance().startSound(SoundManager.BGM),this.view.bg.x=0,this.view.bg.y=-192,this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})},this,1e3)},t.prototype.gameStep3=function(){this.role.armuture.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.role.dispose,this.role),this.view.bg.addChild(this.view.rolebox),this.role.armuture.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.role.dispose,this.role),this.showTalk(this.view.talk0,"地震好像停了，要赶紧出去才行",1e3,2e3,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({y:1025},500),egret.Tween.get(this.view.bg).to({x:-800},5e3),egret.setTimeout(function(){egret.Tween.get(this.view.rolebox).to({y:1013},500)},this,4200),egret.Tween.get(this.view.rolebox).to({x:1e3},5e3).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk3,"电箱漏电了，太危险了，要怎么过去呢？"),this.sendNotification(NotificationNames.SHOW_SELECT,[21,36])},this)},this)},t.prototype.eventResult=function(e){20==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"14",1,function(){egret.Tween.removeTweens(this.view.light),egret.Tween.get(this.view.light).to({y:590},300).to({rotation:99,x:665,y:807},300).call(function(){this.role.play("3",0),this.showTalk(this.view.talk0,"幸好刚刚戴了头盔",0,2e3,this.gameStep2,this)},this)},this)):37==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"15",1,function(){egret.Tween.removeTweens(this.view.light),egret.Tween.get(this.view.light).to({y:800},380).to({rotation:-100,x:137,y:966},300).call(function(){this.showTalk(this.view.talk2,"好痛~5555555",0,2e3),this.FailCompleted(2e3)},this)},this)):21==e?(this.hideTalk(this.view.talk3),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1230},2500).call(function(){this.FailCompleted(2e3),this.AnimationEndByTimes(this.role,"17",1,function(){},this)},this),egret.Tween.get(this.view.bg).to({x:-1050},2500)):36==e?(this.hideTalk(this.view.talk3),this.role.play("16",0),egret.Tween.get(this.view.rolebox).to({x:1650},5e3).call(function(){this.role.play("3",0),this.nextStep(),egret.setTimeout(function(){this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.showTalk(this.view.talk3,"地上都是花瓶碎片，要怎么过去呢",2e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[22,65])},this,4e3)})},this,500)},this),egret.Tween.get(this.view.bg).to({x:-1450},6e3)):65==e?(this.hideTalk(this.view.talk3),this.role.play("3",0),this.initShaLou(),egret.setTimeout(function(){this.huaping.play("1",1),egret.Tween.get(this.view.huapingbox).to({x:2118,y:848},1e3).call(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:2400},4e3),this.WinCompleted(3e3)})},this)},this,1600)):22==e&&(this.hideTalk(this.view.talk3),egret.Tween.get(this.view.rolebox).to({x:1850},670),this.AnimationEndByTimes(this.role,"18",1,function(){this.FailCompleted()}))},t.prototype.reviveStepTwo=function(){this.view.rolebox.x=330,this.view.rolebox.y=1013.05,this.view.bg.x=0,this.view.bg.y=-192,this.role.play("3",0),this.gameStep3()},t.prototype.reviveStepThree=function(){this.view.rolebox.x=1650,this.role.play("3",0),this.showTalk(this.view.talk3,"地上都是花瓶碎片，要怎么过去呢",2e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[22,65])},this,4e3)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0005",t}(GameBase);__reflect(GameMediator0005.prototype,"GameMediator0005");var GameMediator0006=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.gou=new DragonBase,o.poche=new DragonBase,o.penshui=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(6)},t.prototype.loadSubOK=function(){this.initpoche(),this.initgou(),this.initpenshui(),this.initRole("bb")},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initgou=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.gou.initDragon("gou")];case 1:return e.sent(),this.gou.scaleX=this.gou.scaleY=.6,this.gou.scaleX*=-1,this.gou.play("1",0),this.view.goubox.addChild(this.gou),[2]}})})},t.prototype.initpoche=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.poche.initDragon("poche")];case 1:return e.sent(),this.poche.scaleX=this.poche.scaleY=.6,this.view.pochebox.addChild(this.poche),[2]}})})},t.prototype.initpenshui=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.penshui.initDragon("penshui")];case 1:return e.sent(),this.penshui.play("1",0),this.view.penshuibox.addChild(this.penshui),[2]}})})},t.prototype.RandomNum=function(e,t){var i=t-e,o=Math.random(),n=e+o*i;return n},t.prototype.quakeAni=function(e){egret.Tween.get(e,{loop:!0}).to({rotation:3},100+50*Math.random()).to({rotation:-3},250+50*Math.random()).to({rotation:0},100+50*Math.random())},t.prototype.startGame=function(){this.role.play("2",0),this.view.bg.x=-10,egret.Tween.get(this.view.rolebox).to({x:280},3500).call(function(){this.role.play("3a",0),SoundManager.getInstance().playNewEffect(SoundManager.WANG),this.showTalk(this.view.talk0,"恶犬拦路，怎么办"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[23,24])},this,2e3)},this)},t.prototype.gameStep2=function(){egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:870},4300).call(function(){this.role.play("3",0)},this),egret.Tween.get(this.view.bg).to({x:-670},5e3).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk2,"消防栓坏了，一地的水，怎么走过去呢？"),this.sendNotification(NotificationNames.SHOW_SELECT,[25,26])},this)},this,1e3)},t.prototype.eventResult=function(e){23==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"19",1,function(){this.role.play("3",0),this.gou.scaleX*=-1,this.gou.play("3",0),egret.Tween.get(this.view.goubox).to({x:800},1900).call(function(){this.gou.visible=!1,this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.showTalk(this.view.talk0,"哈哈哈，被我吓跑了吧",0,2e3,this.gameStep2,this)})},this)},this)):24==e?(this.hideTalk(this.view.talk0),egret.setTimeout(function(){this.gou.play("2",0)},this,900),this.AnimationEndByTimes(this.role,"20",1,function(){this.role.play("25",0),this.FailCompleted()},this)):25==e?(this.hideTalk(this.view.talk2),this.AnimationEndByTimes(this.role,"21",1,function(){egret.Tween.removeTweens(this.view.rolebox),this.role.play("22",1),this.FailCompleted()}),egret.setTimeout(function(){egret.Tween.get(this.view.rolebox).to({x:1e3},1680)},this,670)):26==e?(this.hideTalk(this.view.talk2),this.AnimationEndByTimes(this.penshui,"2",1,function(){this.disappear(this.view.water,2e3),this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.showTalk(this.view.talk2,"水慢慢干了，应该可以走了",1500,2e3,function(){this.gameStep3()},this)})})):27==e?(this.hideTalk(this.view.talk1),this.AnimationEndByTimes(this.role,"23",1,function(){this.FailCompleted()})):28==e&&(this.hideTalk(this.view.talk1),this.AnimationEndByTimes(this.poche,"1",1,function(){this.AnimationEndByTimes(this.role,"1",1,function(){this.nextStep(),this.role.play("3",0),this.showTalk(this.view.talk1,"废车被处理了，终于可以走了",1500,2e3,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:2600},4500).call(function(){this.WinCompleted(1)},this)},this)})}))},t.prototype.gameStep3=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1800},8e3).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk1,"路被废弃的车挡住了"),this.sendNotification(NotificationNames.SHOW_SELECT,[27,28])},this),egret.Tween.get(this.view.bg).to({x:-1600},8500)},t.prototype.reviveStepTwo=function(){this.view.bg.x=0,this.role.play("3",0),this.view.rolebox.x=280,egret.setTimeout(function(){this.gameStep2()},this,1e3)},t.prototype.reviveStepThree=function(){this.view.bg.x=-670,this.role.play("3",0),this.view.rolebox.x=870,egret.setTimeout(function(){this.gameStep3()},this,1e3)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0006",t}(GameBase);__reflect(GameMediator0006.prototype,"GameMediator0006");var GameMediator0007=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.gou=new DragonBase,o.xiaofangyuan0=new DragonBase,o.xiaofangyuan1=new DragonBase,o.xiaofangyuan2=new DragonBase,o.yv=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(7)},t.prototype.loadSubOK=function(){this.initgou(),this.initxiaofangyuan0(),this.initxiaofangyuan1(),this.initxiaofangyuan2(),this.inityv(),this.initRole("bb"),this.createFire()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initgou=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.gou.initDragon("7gou")];case 1:return e.sent(),this.gou.scaleX=this.gou.scaleY=.6,this.gou.play("3",0),this.gou.visible=!1,this.view.goubox.addChild(this.gou),[2]}})})},t.prototype.initxiaofangyuan0=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.xiaofangyuan0.initDragon("xiaofangyuan")];case 1:return e.sent(),this.xiaofangyuan0.scaleX=this.xiaofangyuan0.scaleY=.6,this.view.xiaofangyuanbox0.addChild(this.xiaofangyuan0),this.xiaofangyuan0.play("huo1",0),[2]}})})},t.prototype.initxiaofangyuan1=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.xiaofangyuan1.initDragon("xiaofangyuan")];case 1:return e.sent(),this.xiaofangyuan1.scaleX=this.xiaofangyuan1.scaleY=.6,this.view.xiaofangyuanbox1.addChild(this.xiaofangyuan1),this.xiaofangyuan1.play("si1",0),[2]}})})},t.prototype.initxiaofangyuan2=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.xiaofangyuan2.initDragon("xiaofangyuan")];case 1:return e.sent(),this.xiaofangyuan2.scaleX=this.xiaofangyuan2.scaleY=.6,this.view.xiaofangyuanbox2.addChild(this.xiaofangyuan2),this.xiaofangyuan2.play("huo2",0),[2]}})})},t.prototype.inityv=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.yv.initDragon("7yv")];
case 1:return e.sent(),this.yv.scaleX=this.yv.scaleY=.8,this.yv.scaleX*=-1,this.view.yvbox.addChild(this.yv),this.yv.play("10",0),[2]}})})},t.prototype.createFire=function(){var e=new SheetMovieClip(60,EffectUrl.FIRE_EFF);e.scaleX=e.scaleY=1.5,e.start(0),this.view.fire0.addChild(e);var t=new SheetMovieClip(60,EffectUrl.FIRE_EFF);t.scaleX=t.scaleY=1.5,t.start(0),this.view.fire1.addChild(t);var i=new SheetMovieClip(60,EffectUrl.FIRE_EFF);i.scaleX=i.scaleY=1.5,i.start(0),this.view.fire2.addChild(i),this.sheetGroup.push(e),this.sheetGroup.push(t),this.sheetGroup.push(i)},t.prototype.RandomNum=function(e,t){var i=t-e,o=Math.random(),n=e+o*i;return n},t.prototype.quakeAni=function(e){egret.Tween.get(e,{loop:!0}).to({rotation:3},100+50*Math.random()).to({rotation:-3},250+50*Math.random()).to({rotation:0},100+50*Math.random())},t.prototype.startGame=function(){this.role.play("2",0),this.view.bg.x=-10,egret.Tween.get(this.view.rolebox).to({x:280},3500).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk0,"哪个消防员有危险呢？"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[41,39,40])},this,2e3)},this)},t.prototype.gameStep2=function(){egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:970},5100).call(function(){this.role.play("3",0)},this),egret.Tween.get(this.view.bg).to({x:-770},5800).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk2,"小朋友哭了，怎么办"),this.sendNotification(NotificationNames.SHOW_SELECT,[60,62])},this)},this,1e3)},t.prototype.gameStep3=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1900},5e3).call(function(){this.role.play("3a",0)},this),egret.Tween.get(this.view.bg).to({x:-1570},5500).call(function(){this.showTalk(this.view.talk3,"前方大洞"),this.sendNotification(NotificationNames.SHOW_SELECT,[63,61])},this)},t.prototype.createSmoke=function(){var e=new SheetMovieClip(90,EffectUrl.SMOG_EFF);e.scaleX=e.scaleY=2,e.start(0),this.view.smog.addChild(e),egret.Tween.get(e).to({alpha:0},3500).call(function(){e.stop(),e.dispose()},this)},t.prototype.eventResult=function(e){39==e?(this.hideTalk(this.view.talk0),this.xiaofangyuan1.play("huo1",0),egret.setTimeout(this.createSmoke,this,500),this.showTalk(this.view.talk4,"还好你提醒我戴了防毒面具",1300,2e3,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})},this)):40==e?(this.hideTalk(this.view.talk0),this.createSmoke(),egret.setTimeout(function(){this.xiaofangyuan1.play("si2",1)},this,300),this.showTalk(this.view.talk5,"忘带防毒面具了..!!",2300,2e3,function(){this.role.play("3a",0),this.FailCompleted()},this)):41==e?(this.hideTalk(this.view.talk0),this.createSmoke(),egret.setTimeout(function(){this.xiaofangyuan1.play("si2",1)},this,300),this.showTalk(this.view.talk5,"忘带防毒面具了..!!",2300,2e3,function(){this.role.play("3a",0),this.FailCompleted()},this)):60==e?(this.role.play("2",0),this.hideTalk(this.view.talk2),egret.Tween.get(this.view.rolebox).to({x:1080},1200).call(function(){this.AnimationEndByTimes(this.role,"26",1,function(){this.showTalk(this.view.talk1,"我不喜欢棒棒糖!!",0,2e3,function(){this.FailCompleted()},this)})},this)):62==e?(this.role.play("2",0),this.hideTalk(this.view.talk2),egret.Tween.get(this.view.rolebox).to({x:1080},1200).call(function(){this.AnimationEndByTimes(this.role,"27",1,function(){this.role.play("3",0)}),egret.setTimeout(function(){this.AnimationEndByTimes(this.yv,"9",1,function(){this.yv.play("11",0),egret.Tween.get(this.view.yvbox).to({y:600},5e3),egret.Tween.get(this.view.yvbox).to({x:700},5e3).call(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})},this)})},this,820)},this)):61==e?(this.hideTalk(this.view.talk3),this.gou.visible=!0,egret.Tween.get(this.view.goubox).to({x:1700},1500).call(function(){SoundManager.getInstance().playNewEffect(SoundManager.WANG),this.gou.play("2",0),this.role.play("25",1),egret.Tween.get(this.view.bg).to({x:-1870},1400),egret.setTimeout(function(){this.nextStep(),SoundManager.getInstance().playNewEffect(SoundManager.JINGKONG),egret.Tween.get(this.view.rolebox).to({x:2150},380).call(function(){egret.Tween.get(this.view.rolebox).to({x:2700},3500),this.WinCompleted(2500),this.role.play("2a",0)},this)},this,1020)},this)):63==e&&(this.hideTalk(this.view.talk3),this.role.play("24",1),egret.setTimeout(function(){egret.Tween.get(this.view.rolebox).to({y:800},960).to({y:901},300).call(function(){this.FailCompleted()},this)},this,670))},t.prototype.reviveStepTwo=function(){this.view.bg.x=0,this.role.play("3",0),this.view.rolebox.x=280,egret.setTimeout(this.gameStep2,this,800)},t.prototype.reviveStepThree=function(){this.view.bg.x=-770,this.role.play("3",0),this.view.rolebox.x=1080,egret.setTimeout(this.gameStep3,this,800)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0007",t}(GameBase);__reflect(GameMediator0007.prototype,"GameMediator0007");var GameMediator0008=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.A=new DragonBase,o.B=new DragonBase,o.C=new DragonBase,o.D=new DragonBase,o.E=new DragonBase,o.F=new DragonBase,o.yv=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(8)},t.prototype.loadSubOK=function(){this.initA(),this.initB(),this.initC(),this.initD(),this.initE(),this.initF(),this.initRole("bb")},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initA=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.A.initDragon("cangmao")];case 1:return e.sent(),this.A.scaleX=this.A.scaleY=.8,this.A.scaleX*=-1,this.A.play("cang",0),this.view.Abox.addChild(this.A),[2]}})})},t.prototype.initB=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.B.initDragon("yvpang")];case 1:return e.sent(),this.B.scaleX=this.B.scaleY=.6,this.B.scaleX*=-1,this.B.play("1",0),this.view.Bbox.addChild(this.B),[2]}})})},t.prototype.initC=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.C.initDragon("dama")];case 1:return e.sent(),this.C.scaleX=this.C.scaleY=.8,this.C.play("1",0),this.view.Cbox.addChild(this.C),[2]}})})},t.prototype.initD=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.D.initDragon("daxiong")];case 1:return e.sent(),this.D.scaleX=this.D.scaleY=.8,this.D.play("1",0),this.view.Dbox.addChild(this.D),[2]}})})},t.prototype.initE=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.E.initDragon("sharen")];case 1:return e.sent(),this.E.scaleX=this.E.scaleY=.6,this.E.play("1",0),this.view.Ebox.addChild(this.E),[2]}})})},t.prototype.initF=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.F.initDragon("8sdlr")];case 1:return e.sent(),this.F.scaleX=this.F.scaleY=.6,this.F.play("4",0),this.view.Fbox.addChild(this.F),[2]}})})},t.prototype.RandomNum=function(e,t){var i=t-e,o=Math.random(),n=e+o*i;return n},t.prototype.createReverse=function(){var e=this.view.bg.localToGlobal(this.view.Ebox.x,this.view.Ebox.y);e.y=e.y-this.E.armuture.height*this.E.scaleX*.6,this.drawReverse(e.x,e.y);var t=1.8;egret.Tween.get(this.view.main).to({scaleX:t,scaleY:t,x:PopUpManager.STAGE_WIDTH*(1-t)/2+(PopUpManager.STAGE_WIDTH/2-e.x)*t,y:PopUpManager.STAGE_HEIGHT*(1-t)/2+(PopUpManager.STAGE_HEIGHT/2-e.y)*t},300).call(function(){this.E.play("2",1)},this).wait(2e3).call(function(){this.clearMask()},this).to({x:0,y:0,scaleX:1,scaleY:1},300).call(function(){this.showTalk(this.view.talk4,"还是被你发现了啊，旁边就是警局我这就自首",0,2e3,function(){this.disappear(this.E),this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.gameStep3()})},this)},this)},t.prototype.startGame=function(){this.role.play("2",0),this.view.bg.x=-10,egret.Tween.get(this.view.rolebox).to({x:200},3e3).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk0,"刚才有只猫走丢了，被谁抓住了呢"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[54,53,52])},this,2e3)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:900},6e3).call(function(){this.role.play("3",0)},this),egret.Tween.get(this.view.bg).to({x:-770},6500).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk3,"是谁杀害了圣诞老人呢？"),this.sendNotification(NotificationNames.SHOW_SELECT,[50,19,48])},this)},t.prototype.gameStep3=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1770},5600).call(function(){this.role.play("3",0)},this),egret.Tween.get(this.view.bg).to({x:-1460},6e3).call(function(){this.role.play("3c",0),this.showTalk(this.view.talk7,"我有点饿了，正好有个快餐店"),this.sendNotification(NotificationNames.SHOW_SELECT,[43,44])},this)},t.prototype.loupeCat=function(){var e=this.view.bg.localToGlobal(this.view.Abox.x,this.view.Abox.y);e.y=e.y-.5*this.A.armuture.height,e.x-=50,this.drawReverse(e.x,e.y);var t=1.5;egret.Tween.get(this.view.main).to({scaleX:t,scaleY:t,x:PopUpManager.STAGE_WIDTH*(1-t)/2+(PopUpManager.STAGE_WIDTH/2-e.x)*t,y:PopUpManager.STAGE_HEIGHT*(1-t)/2+(PopUpManager.STAGE_HEIGHT/2-e.y)*t},300).call(function(){this.A.play("chu",1)},this).wait(500).call(function(){this.clearMask()},this).to({x:0,y:0,scaleX:1,scaleY:1},1e3)},t.prototype.eventResult=function(e){54==e?(this.hideTalk(this.view.talk0),this.loupeCat(),egret.setTimeout(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.showTalk(this.view.talk0,"果然在你这,下次不要这样了哦",0,2e3,function(){this.role.play("2",0),this.A.play("cang",0),this.gameStep2()},this)})},this,1500)):53==e?(this.hideTalk(this.view.talk0),this.showTalk(this.view.talk1,"我两只手都被占用了呀",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):52==e?(this.hideTalk(this.view.talk0),this.showTalk(this.view.talk2,"你冤枉我，才不是我！！",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):50==e?(this.hideTalk(this.view.talk3),this.showTalk(this.view.talk5,"我是无辜的",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):19==e?(this.hideTalk(this.view.talk3),this.createReverse()):48==e?(this.hideTalk(this.view.talk3),this.showTalk(this.view.talk6,"你胡说，我才没杀人。。",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):43==e?(this.hideTalk(this.view.talk7),this.AnimationEndByTimes(this.role,"28",1,function(){this.role.play("1",1)}),this.showTalk(this.view.talk7,"可以饱餐一顿啦",700,2e3),this.WinCompleted(5200)):44==e&&(this.hideTalk(this.view.talk7),this.role.play("29",1),this.showTalk(this.view.talk7,"啊！我的炸鸡",800,2e3),this.FailCompleted(2e3))},t.prototype.reviveStepTwo=function(){this.view.bg.x=0,this.role.play("3",0),this.view.rolebox.x=200,egret.setTimeout(this.gameStep2,this,800)},t.prototype.reviveStepThree=function(){this.view.bg.x=-770,this.role.play("3",0),this.view.rolebox.x=900,egret.setTimeout(this.gameStep3,this,800)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0008",t}(GameBase);__reflect(GameMediator0008.prototype,"GameMediator0008");var GameMediator0009=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.A=new DragonBase,o.B=new DragonBase,o.C=new DragonBase,o.D=new DragonBase,o.E=new DragonBase,o.F=new DragonBase,o.G=new DragonBase,o.H=new DragonBase,o.I=new DragonBase,o.J=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(9)},t.prototype.loadSubOK=function(){this.initA(),this.initB(),this.initC(),this.initRole("bb"),this.initD(),this.initE(),this.initF(),this.initG(),this.initH(),this.initI()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initA=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.A.initDragon("duanxiu1")];case 1:return e.sent(),this.A.scaleX*=-1,this.A.play("1",0),this.view.Abox.addChild(this.A),[2]}})})},t.prototype.initB=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.B.initDragon("baozhijiangshi")];case 1:return e.sent(),this.B.scaleX*=-1,this.B.play("1",0),this.view.Bbox.addChild(this.B),[2]}})})},t.prototype.initC=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.C.initDragon("erji")];case 1:return e.sent(),this.C.play("1",0),this.C.scaleX*=-1,this.view.Cbox.addChild(this.C),[2]}})})},t.prototype.initD=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.D.initDragon("duanxiu2")];case 1:return e.sent(),this.D.scaleX*=-1,this.D.play("1",0),this.view.Dbox.addChild(this.D),[2]}})})},t.prototype.initE=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.E.initDragon("zhadan")];case 1:return e.sent(),this.E.scaleX*=-1,this.E.play("1",0),this.view.Ebox.addChild(this.E),[4,this.J.initDragon("jc")];case 2:return e.sent(),this.J.visible=!1,this.view.Jbox.addChild(this.J),[2]}})})},t.prototype.initF=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.F.initDragon("zhangwang")];case 1:return e.sent(),this.F.scaleX*=-1,this.F.play("1",0),this.view.Fbox.addChild(this.F),[2]}})})},t.prototype.initG=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.G.initDragon("dashu")];case 1:return e.sent(),this.G.scaleX*=-1,this.G.play("1",0),this.view.Gbox.addChild(this.G),[2]}})})},t.prototype.initH=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.H.initDragon("nanhai")];case 1:return e.sent(),this.H.scaleX*=-1,this.H.play("1",0),this.view.Hbox.addChild(this.H),[2]}})})},t.prototype.initI=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.I.initDragon("nvhai")];case 1:return e.sent(),this.I.scaleX*=-1,this.I.play("1",0),this.view.Ibox.addChild(this.I),[2]}})})},t.prototype.RandomNum=function(e,t){var i=t-e,o=Math.random(),n=e+o*i;return n},t.prototype.startGame=function(){this.role.play("2",0),this.view.bg.x=-10,egret.setTimeout(function(){egret.Tween.get(this.view.rolebox).to({x:100},2e3).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk0,"哪位乘客是僵尸伪装的呢"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[55,57,49])},this,2e3)},this)},this,1e3)},t.prototype.gameStep2=function(){egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1e3},6e3).call(function(){this.role.play("3",0)},this),egret.Tween.get(this.view.bg).to({x:-870},6500).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk3,"听说有人身上带了炸弹，是谁呢"),this.sendNotification(NotificationNames.SHOW_SELECT,[56,58,59])},this)},this,1e3)},t.prototype.gameStep3=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1870},6600).call(function(){this.role.play("3",0)},this),egret.Tween.get(this.view.bg).to({x:-1760},7e3).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk8,"哪位乘客把宠物带上了飞机"),this.sendNotification(NotificationNames.SHOW_SELECT,[46,45,47])},this)},t.prototype.createBaozha=function(){var e=new SheetMovieClip(60,EffectUrl.BAOZHA_EFF);this.view.baozhagroup.scaleX=this.view.baozhagroup.scaleY=4,e.start(1),this.view.baozhagroup.addChild(e),this.sheetGroup.push(e),egret.setTimeout(function(){this.role.play("31",1)},this,400)},t.prototype.eventResult=function(e){57==e?(this.role.play("3",0),this.showTalk(this.view.talk0,"快把你报纸拿开！",0,2e3,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:328},1500).call(function(){this.role.play("3",0),this.B.play("2",1),this.showTalk(this.view.talk7,"有规定僵尸不能坐飞机嘛。。。",0,2e3),egret.setTimeout(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})},this,800)},this)},this),this.A.play("chu",0)):55==e?(this.hideTalk(this.view.talk0),this.A.play("2",1),this.showTalk(this.view.talk1,"你在说什么？",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):49==e?(this.hideTalk(this.view.talk0),this.showTalk(this.view.talk2,"你才是僵尸呢！",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):56==e?(this.hideTalk(this.view.talk3),this.showTalk(this.view.talk4,"我身上没有炸弹啊！",0,2e3,function(){this.role.play("3a",0),this.AnimationEndByTimes(this.E,"2",1,function(){this.createBaozha(),this.FailCompleted(1e3)})},this),this.D.play("2",1)):58==e?(this.hideTalk(this.view.talk3),this.J.visible=!0,this.AnimationEndByTimes(this.J,"2",1,function(){this.AnimationEndByTimes(this.J,"1",1,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0)}),this.showTalk(this.view.talk5,"我不敢了，不敢了。。",0,2e3,this.gameStep3,this)})})):59==e?(this.hideTalk(this.view.talk3),this.showTalk(this.view.talk6,"你凭什么污人清白",0,2e3,function(){this.role.play("3a",0),this.AnimationEndByTimes(this.E,"2",1,function(){this.createBaozha(),this.FailCompleted(1e3)})},this),this.F.play("2",1)):46==e?(this.hideTalk(this.view.talk8),this.showTalk(this.view.talk9,"我讨厌宠物！",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):45==e?(this.hideTalk(this.view.talk8),this.showTalk(this.view.talk10,"我没有养呀",0,2e3,function(){this.role.play("3b_a2",1),this.FailCompleted()},this)):47==e&&(this.hideTalk(this.view.talk8),this.I.play("2",1),this.showTalk(this.view.talk11,"哎呀，猫猫出来了",0,2e3,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.WinCompleted(1)})},this))},t.prototype.reviveStepTwo=function(){this.view.bg.x=-10,this.role.play("3",0),this.view.rolebox.x=328,egret.setTimeout(this.gameStep2,this,800)},t.prototype.reviveStepThree=function(){this.view.bg.x=-870,this.role.play("3",0),this.view.rolebox.x=1e3,egret.setTimeout(this.gameStep3,this,800)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0009",t}(GameBase);__reflect(GameMediator0009.prototype,"GameMediator0009");var GameMediator0010=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.wuzi=new DragonBase,o.huodui=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(10)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.initwuzi(),this.inithuodui()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initwuzi=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.wuzi.initDragon("wuzi")];case 1:return e.sent(),this.view.wuzibox.addChild(this.wuzi),this.view.wuzibox.visible=!1,[2]}})})},t.prototype.inithuodui=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.huodui.initDragon("huodui")];case 1:return e.sent(),this.view.huoduibox.addChild(this.huodui),this.view.huoduibox.visible=!1,[2]}})})},t.prototype.RandomNum=function(e,t){var i=t-e,o=Math.random(),n=e+o*i;return n},t.prototype.quakeAni=function(e){egret.Tween.get(e,{loop:!0}).to({rotation:3},100+50*Math.random()).to({rotation:-3},250+50*Math.random()).to({rotation:0},100+50*Math.random())},t.prototype.startGame=function(){this.role.play("2",0),this.view.bg.x=-10,egret.Tween.get(this.view.rolebox).to({x:230},3300).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"口渴了，去哪里能找点喝的呢",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[66,67])},this,3e3)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-500},4e3)},this,1e3),egret.Tween.get(this.view.rolebox).to({x:280,y:990},930).to({x:430},1600).to({y:1037,x:600},1500).to({x:700},1e3).call(function(){this.role.play("3",0),this.showTalk(this.view.talk1,"好冷呀，我要想想办法",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[68,69])},this,3e3)},this)},t.prototype.gameStep3=function(){this.disappear(this.huodui),egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-1200},5500),egret.Tween.get(this.view.rolebox).to({x:1300},5e3).call(function(){this.role.play("3",0),this.showTalk(this.view.talk2,"肚子好饿啊，找点吃的吧",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[70,71])},this,3e3)},this)},this,1e3)},t.prototype.eventResult=function(e){66==e?(this.hideTalk(this.view.talk0),this.role.armuture.animation.timeScale=2,this.AnimationEndByTimes(this.role,"35",3,function(){this.role.armuture.animation.timeScale=1,this.role.play("3",0),this.view.keng.visible=!0,egret.setTimeout(function(){egret.Tween.get(this.view.water).to({scaleX:1,scaleY:1},1e3).call(function(){egret.setTimeout(function(){egret.Tween.get(this.view.water).to({scaleX:.8,scaleY:.8},650)},this,330),this.AnimationEndByTimes(this.role,"35a",1,function(){this.role.play("3",0),this.showTalk(this.view.talk0,"这下可喝饱了",0,2e3,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})},this)})},this)},this,300)})):67==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-220},2200),egret.Tween.get(this.view.rolebox).to({x:560,y:980},2300).call(function(){this.AnimationEndByTimes(this.role,"32",1,function(){this.AnimationEndByTimes(this.role,"33",1,function(){}),this.FailCompleted(2500)})},this)):68==e?(this.hideTalk(this.view.talk1),this.AnimationEndByTimes(this.role,"39",1,function(){this.role.play("3",0),this.view.wuzibox.visible=!0,egret.setTimeout(function(){this.wuzi.play("2",1),this.role.play("3a",0),this.showTalk(this.view.talk1,"我的屋子！！！",0,2e3),this.FailCompleted()},this,1500)})):69==e?(this.hideTalk(this.view.talk1),egret.setTimeout(function(){this.view.huoduibox.visible=!0,this.huodui.play("1",0)},this,1200),this.AnimationEndByTimes(this.role,"40",1,function(){egret.setTimeout(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})},this,2e3)})):70==e?(this.hideTalk(this.view.talk2),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1450},1e3).call(function(){this.AnimationEndByTimes(this.role,"38",1,function(){this.nextStep(),this.role.play("1",1),this.showTalk(this.view.talk3,"好大的鱼啊，这下有的吃了",0,2e3),this.WinCompleted()})},this)):71==e&&(this.hideTalk(this.view.talk2),egret.Tween.get(this.view.bg).to({x:-1340},2e3).call(function(){this.view.rolebox.x=1764,this.view.rolebox.y=946,this.role.scaleX*=-1,this.AnimationEndByTimes(this.role,"45",1,function(){this.AnimationEndByTimes(this.role,"46",1,function(){this.FailCompleted()})},this)},this))},t.prototype.reviveStepTwo=function(){this.view.rolebox.x=230,this.view.rolebox.y=1037.87,this.view.bg.x=-10,this.role.play("3",0),this.gameStep2()},t.prototype.reviveStepThree=function(){this.role.scaleX*=-1,this.view.rolebox.x=700,this.view.rolebox.y=1037,this.view.bg.x=-500,this.role.play("3",0),this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0010",t}(GameBase);__reflect(GameMediator0010.prototype,"GameMediator0010");var GameMediator0011=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.yang=new DragonBase,o.yang2=new DragonBase,o.wuyun=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(11)},t.prototype.loadSubOK=function(){this.view.tengman.visible=!1,this.initRole("bb"),this.inityang(),this.inityang2(),this.initwuyun()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.inityang=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.yang.initDragon("yang")];case 1:return e.sent(),this.view.yangbox.addChild(this.yang),this.yang.scaleX=this.yang.scaleY=.6,this.yang.play("daiji",0),[2]}})})},t.prototype.inityang2=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.yang2.initDragon("yang")];case 1:return e.sent(),this.view.yangbox2.addChild(this.yang2),this.yang2.scaleX=this.yang2.scaleY=.6,this.yang2.play("pao",0),[2]}})})},t.prototype.initwuyun=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.wuyun.initDragon("wuyun")];case 1:return e.sent(),this.view.wuyunbox.addChild(this.wuyun),this.wuyun.scaleX=this.wuyun.scaleY=.8,this.wuyun.play("1",0),[2]}})})},t.prototype.createRoleMask=function(){this.mask1||(this.mask1=new egret.Shape,this.mask1.graphics.beginFill(16711680),this.mask1.graphics.drawCircle(0,-190,200),this.mask1.graphics.endFill()),this.role.addChild(this.mask1),this.role.mask=this.mask1},t.prototype.createYangMask=function(){this.mask2||(this.mask2=new egret.Shape,this.mask2.graphics.beginFill(16711680),this.mask2.graphics.drawCircle(-50,-290,300),this.mask2.graphics.endFill()),this.yang2.addChild(this.mask2),this.yang2.mask=this.mask2},t.prototype.RandomNum=function(e,t){var i=t-e,o=Math.random(),n=e+o*i;return n},t.prototype.quakeAni=function(e){egret.Tween.get(e,{loop:!0}).to({rotation:3},100+50*Math.random()).to({rotation:-3},250+50*Math.random()).to({rotation:0},100+50*Math.random())},t.prototype.startGame=function(){this.role.play("2",0),this.view.bg.x=-10,egret.Tween.get(this.view.rolebox).to({x:230},3300).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"怎么有只羊拦住去路",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[71,72,73])},this,3e3)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-550},4500)},this,1e3),egret.Tween.get(this.view.rolebox).to({x:750},4500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk1,"这里怎么会有个草堆，会不会有什么问题",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[74,75])},this,3e3)},this)},t.prototype.gameStep3=function(){this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-1350},5500),egret.Tween.get(this.view.rolebox).to({x:this.view.keng.x-10},500).call(function(){this.role.play("52",1)},this).to({x:this.view.keng.x+430},930).call(function(){this.role.play("3",0)},this).wait(1600).call(function(){this.role.play("2",0)},this).to({x:this.view.keng.x+730},2500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk2,"下雨了，我要找个地方躲躲雨",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[68,76])},this,3e3)},this)},t.prototype.eventResult=function(e){71==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:260},300).call(function(){this.AnimationEndByTimes(this.role,"47",1,function(){this.role.play("3",0),this.yang.play("pao",0),egret.Tween.get(this.view.yangbox).to({x:this.view.rolebox.x+150},1e3).call(function(){this.yang.play("gongji",1),this.role.play("47a",1),egret.setTimeout(function(){egret.Tween.get(this.view.rolebox).to({x:190},230)},this,100),this.FailCompleted()},this)})},this)):72==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"48",1,function(){this.yang.play("pao",0),egret.Tween.get(this.view.yangbox).to({x:this.view.rolebox.x+150},1e3).call(function(){this.yang.play("gongji",1),this.role.play("48a",1),egret.setTimeout(function(){egret.Tween.get(this.view.rolebox).to({x:150},230)},this,100),this.FailCompleted()},this)})):73==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"49",1,function(){this.view.tengman.visible=!0,this.role.play("3",0),egret.setTimeout(function(){this.yang.play("pao",0),egret.Tween.get(this.view.yangbox).to({x:this.view.tengman.x-17},1500).call(function(){this.yang.play("buzhuo",1),this.view.tengman.visible=!1,egret.setTimeout(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})},this,2e3)},this)},this,1500)})):75==e?(this.hideTalk(this.view.talk1),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:this.view.keng.x+180},2e3).call(function(){this.disappear(this.view.cao),this.AnimationEndByTimes(this.role,"50",1,function(){this.createRoleMask(),egret.Tween.get(this.role.armuture).to({y:210},300)}),this.FailCompleted()},this)):74==e?this.showTalk(this.view.talk1,"引来一只羊试试",0,2e3,function(){this.AnimationEndByTimes(this.role,"48",1,function(){egret.Tween.get(this.view.yangbox2).to({x:this.view.keng.x+210},2e3).call(function(){this.disappear(this.view.cao),this.yang2.play("daiji",0),this.createYangMask(),egret.Tween.get(this.yang2.armuture).to({y:190},300).call(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})},this)},this)})},this):68==e?(this.hideTalk(this.view.talk2),this.AnimationEndByTimes(this.role,"54",1,function(){egret.Tween.get(this.view.wuyunbox).to({x:this.view.rolebox.x+200},2e3).call(function(){this.wuyun.play("1",0),this.showTalk(this.view.talk3,"这下淋不到我了"),this.nextStep(),this.WinCompleted(3e3)},this)})):76==e&&(this.hideTalk(this.view.talk2),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:this.view.tree.x+200},2e3).call(function(){this.role.play("3",0),egret.Tween.get(this.view.wuyunbox).to({x:this.view.rolebox.x},2e3).call(function(){this.wuyun.play("3",1),egret.setTimeout(function(){this.role.play("53",1),this.view.tree.source="scene11_json.12dianjiaoi"},this,70),this.FailCompleted()},this)},this))},t.prototype.reviveStepTwo=function(){this.view.rolebox.x=230,this.view.rolebox.y=1020.54,this.view.bg.x=-10,this.role.armuture.y=0,this.role.mask=null,this.role.removeChild(this.mask1),this.mask1=null,this.view.cao.alpha=1,this.role.play("3",0),this.gameStep2()},t.prototype.reviveStepThree=function(){this.view.rolebox.x=750,this.view.rolebox.y=1020.54,this.view.bg.x=-550,this.view.wuyunbox.x=1511.57,this.view.tree.source="scene11_json.12bigtree",this.wuyun.play("1",0),this.role.play("3",0),this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent
},enumerable:!0,configurable:!0}),t.NAME="GameMediator0011",t}(GameBase);__reflect(GameMediator0011.prototype,"GameMediator0011");var GameMediator0012=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.waixingren0=new DragonBase,o.waixingren1=new DragonBase,o.waixingren2=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(12)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.initwaixingren()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initwaixingren=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.waixingren0.initDragon("waixingren")];case 1:return e.sent(),this.view.waixingbox0.addChild(this.waixingren0),this.waixingren0.play("daiji",0),this.waixingren0.scaleX*=this.waixingren0.scaleY*=.65,[4,this.waixingren1.initDragon("waixingren")];case 2:return e.sent(),this.view.waixingbox1.addChild(this.waixingren1),this.waixingren1.play("daiji",0),this.waixingren1.scaleX*=this.waixingren1.scaleY*=.65,this.waixingren1.visible=!1,[4,this.waixingren2.initDragon("waixingren")];case 3:return e.sent(),this.view.rolebox.addChild(this.waixingren2),this.waixingren2.play("daiji",0),this.waixingren2.scaleX=this.waixingren2.scaleY=0,[2]}})})},t.prototype.RandomNum=function(e,t){var i=t-e,o=Math.random(),n=e+o*i;return n},t.prototype.quakeAni=function(e){egret.Tween.get(e,{loop:!0}).to({rotation:3},100+50*Math.random()).to({rotation:-3},250+50*Math.random()).to({rotation:0},100+50*Math.random())},t.prototype.startGame=function(){this.role.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-150},3e3)},this,1e3),egret.Tween.get(this.view.rolebox).to({x:350},3500).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"这应该是开门的密码，填入什么才会开门呢",1e3),egret.setTimeout(function(){this.role.play("3b",0);var e=this.view.bg.localToGlobal(this.view.rolebox.x,this.view.rolebox.y);e.y=e.y-this.role.armuture.height*this.role.scaleX*.6+10,e.x+=160,this.drawReverse(e.x,e.y,null,!0);var t=1.5;egret.Tween.get(this.view.main).to({scaleX:t,scaleY:t,x:PopUpManager.STAGE_WIDTH*(1-t)/2+(PopUpManager.STAGE_WIDTH/2-e.x)*t,y:PopUpManager.STAGE_HEIGHT*(1-t)/2+(PopUpManager.STAGE_HEIGHT/2-e.y)*t},300),this.sendNotification(NotificationNames.SHOW_SELECT,[85,86])},this,3e3)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-750},4500)},this,500),egret.Tween.get(this.view.rolebox).to({x:950},4500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk2,"￥%@…#&*！",0,2e3,function(){this.showTalk(this.view.talk1,"前面竟然有外星人！这下该怎么办",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[87,88])},this,3e3)},this)},this)},t.prototype.gameStep3=function(){this.showTalk(this.view.talk3,"桌子上有好多奇怪的糖果，好想尝一尝",1e3),egret.setTimeout(function(){this.role.play("3c",0),this.sendNotification(NotificationNames.SHOW_SELECT,[77,78,79])},this,3e3)},t.prototype.eventResult=function(e){85==e?(this.hideTalk(this.view.talk0),this.clearMask(),egret.Tween.get(this.view.main).to({x:0,y:0,scaleX:1,scaleY:1},300),this.showTalk(this.view.talk0,"答案一定是这个",1e3,2e3,function(){this.view.result.visible=!0,this.view.result.scaleY=0,this.view.result.source="scene12_json.error",egret.Tween.get(this.view.result).to({scaleY:.8},300).wait(1e3).to({scaleY:0},200).call(function(){egret.Tween.get(this.view.jiguang).to({scaleY:1},200).to({scaleY:0},150),this.role.play("37",1),this.FailCompleted()},this)},this)):86==e?(this.hideTalk(this.view.talk0),this.clearMask(),egret.Tween.get(this.view.main).to({x:0,y:0,scaleX:1,scaleY:1},300),this.showTalk(this.view.talk0,"这下准没错了",1e3,2e3,function(){this.view.result.visible=!0,this.view.result.scaleY=0,egret.Tween.get(this.view.result).to({scaleY:.8},300).wait(1e3).to({scaleY:0},300).call(function(){egret.Tween.get(this.view.men).to({y:280},2e3).call(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})},this)},this)},this)):88==e?(this.hideTalk(this.view.talk1),this.AnimationEndByTimes(this.role,"44",1,function(){this.role.armuture.animation.timeScale=.3,this.role.play("44a",0),egret.Tween.get(this.view.rolebox).to({y:970},1e3).call(function(){egret.Tween.get(this.view.bg).to({x:-1500},7200)},this).to({x:1700},7e3).call(function(){this.role.armuture.animation.timeScale=1,this.role.play("3",0),egret.setTimeout(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})},this,1e3)},this)})):87==e?(this.hideTalk(this.view.talk1),this.waixingren1.visible=!0,this.role.scaleX*=-1,this.role.play("2a",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-100},2e3)},this,500),egret.Tween.get(this.view.rolebox).to({x:450},4e3),egret.setTimeout(function(){this.role.play("37",1)},this,3800),egret.setTimeout(function(){var e=new eui.Image("scene12_json.bd");e.width=70,this.view.waixingbox1.addChild(e),e.y=-90,e.x=140,SoundManager.getInstance().playNewEffect(SoundManager.BIU),egret.Tween.get(e).to({x:e.x+140},160).call(function(){this.disappear(e),egret.Tween.removeTweens(this.view.rolebox),this.FailCompleted()},this)},this,3800)):77==e?(this.hideTalk(this.view.talk3),this.AnimationEndByTimes(this.role,"41a",1,function(){this.showTalk(this.view.talk3,"脆脆的甜甜的真好吃！"),this.nextStep(),this.WinCompleted()})):78==e?(this.hideTalk(this.view.talk3),this.AnimationEndByTimes(this.role,"41",1,function(){this.showTalk(this.view.talk4,"我怎么变成一堆草了？！"),this.FailCompleted()})):79==e&&(this.hideTalk(this.view.talk3),this.AnimationEndByTimes(this.role,"41b",1,function(){egret.Tween.get(this.role).to({scaleX:0,scaleY:0},700).call(function(){egret.Tween.get(this.waixingren2).to({scaleX:.65,scaleY:.65},700).call(function(){this.showTalk(this.view.talk3,"我怎么变成外星人了？！"),this.FailCompleted()},this)},this)}))},t.prototype.reviveStepTwo=function(){this.view.rolebox.x=350,this.view.rolebox.y=1020.54,this.role.scaleX*=-1,this.waixingren1.visible=!1,this.view.bg.x=-150,this.role.play("3",0),egret.setTimeout(function(){this.gameStep2()},this,1200)},t.prototype.reviveStepThree=function(){this.view.talk3.alpha=0,this.view.talk4.alpha=0,this.view.rolebox.x=1700,this.view.rolebox.y=970,this.view.bg.x=-1500,this.role.scaleX=this.role.scaleY=.65,this.waixingren2.scaleX=this.waixingren2.scaleY=0,this.role.play("3",0),egret.setTimeout(function(){this.gameStep3()},this,1200)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0012",t}(GameBase);__reflect(GameMediator0012.prototype,"GameMediator0012");var GameMediator0013=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.waixingren0=new DragonBase,o.mujian=new DragonBase,o.jingbao=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(13)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.initwaixingren(),this.initmujian(),this.initjingbao()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",1),this.startGame()},t.prototype.initwaixingren=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.waixingren0.initDragon("waixingren13")];case 1:return e.sent(),this.view.waixingbox0.addChild(this.waixingren0),this.waixingren0.play("yidong",0),this.waixingren0.scaleX*=this.waixingren0.scaleY*=.65,[2]}})})},t.prototype.initmujian=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.mujian.initDragon("mujian")];case 1:return e.sent(),this.view.mujianbox.addChild(this.mujian),this.mujian.scaleX*=this.mujian.scaleY*=.5,this.mujian.visible=!1,[2]}})})},t.prototype.initjingbao=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.jingbao.initDragon("jingbao")];case 1:return e.sent(),this.view.jingbaobox.addChild(this.jingbao),this.jingbao.play("2",0),[2]}})})},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:230},3300).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"这植物好像变异了，一定要毁掉",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[81,80,82])},this,3e3)},this)},t.prototype.gameStep2=function(){this.showTalk(this.view.talk0,"被外星人发现了，我得赶紧跑！",1e3,2e3,function(){this.role.play("2a",0),egret.Tween.get(this.view.waixingbox0).to({x:400},3500),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-300},3e3)},this,500),egret.Tween.get(this.view.rolebox).to({x:750},3500).call(function(){this.role.play("3a",0),this.waixingren0.play("daiji",0),this.showTalk(this.view.talk1,"该怎么办呢.."),this.sendNotification(NotificationNames.SHOW_SELECT,[21,22])},this)},this)},t.prototype.gameStep3=function(){this.showTalk(this.view.talk3,"这两个按钮我该按下哪个呢",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[84,83])},this,3e3)},t.prototype.createRoleMask=function(){this.mask1||(this.mask1=new egret.Shape,this.mask1.graphics.beginFill(16711680),this.mask1.graphics.drawCircle(0,-190,200),this.mask1.graphics.endFill()),this.role.addChild(this.mask1),this.role.mask=this.mask1},t.prototype.eventResult=function(e){81==e?(this.hideTalk(this.view.talk0),egret.setTimeout(function(){var e=new eui.Image("scene13_json.bd");e.width=40,e.height=20,e.rotation=32,this.view.rolebox.addChild(e),e.y=-95,e.x=132,egret.Tween.get(e).to({x:165,y:-71},100).call(function(){this.disappear(e),this.view.ice.visible=!0},this)},this,1020),this.AnimationEndByTimes(this.role,"59",1,function(){this.role.play("3",0),this.disappear(this.view.zhiwubox,1e3),egret.setTimeout(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})},this,1e3)})):80==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.view.waixingbox0).to({x:50},1100).call(function(){this.waixingren0.play("gongji",1);var e=new eui.Image("scene13_json.bd");SoundManager.getInstance().playNewEffect(SoundManager.BIU),e.width=70,this.view.waixingbox0.addChild(e),e.y=-128,e.x=140,this.FailCompleted(),egret.Tween.get(e).to({x:190},160).call(function(){this.disappear(e),this.role.play("57a",1)},this)},this)},this,3e3),egret.Tween.get(this.view.rolebox).to({x:this.view.zhiwubox.x-20},1100).call(function(){this.role.play("57",1),egret.setTimeout(function(){this.view.zhiwubox.visible=!1,this.jingbao.play("1",0),egret.Tween.get(this.view.warning,{loop:!0}).to({alpha:.5},700).to({alpha:0},700)},this,670)},this)):82==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:this.view.zhiwubox.x-50},1100).call(function(){this.role.play("58",1),egret.setTimeout(function(){var e=new SheetMovieClip(60,EffectUrl.FIRE_EFF);e.setList(1,16,"scene13_json.dy00"),e.start(1),e.x=this.view.zhiwubox.x,e.y=this.view.zhiwubox.y-200,this.view.bg.addChild(e),this.FailCompleted()},this,1300)},this)):21==e?(this.hideTalk(this.view.talk1),this.role.scaleX*=-1,this.role.play("42",0),egret.setTimeout(function(){this.waixingren0.play("gongji",1);var e=new eui.Image("scene13_json.bd");SoundManager.getInstance().playNewEffect(SoundManager.BIU),e.width=70,this.view.waixingbox0.addChild(e),e.y=-128,e.x=140,this.FailCompleted(),egret.Tween.get(e).to({x:250},200).call(function(){this.disappear(e),this.role.play("37",1)},this)},this,800)):22==e?(this.hideTalk(this.view.talk1),this.role.play("43",0),egret.Tween.get(this.view.waixingbox0).to({x:600},2800),this.waixingren0.play("yidong",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-1350},3500)},this,300),egret.Tween.get(this.view.rolebox).to({x:1600},3200).call(function(){this.role.play("3",0),egret.setTimeout(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})},this,1e3)},this)):84==e?(this.hideTalk(this.view.talk3),this.mujian.alpha=0,this.mujian.visible=!0,egret.Tween.get(this.mujian).to({alpha:1},800).call(function(){this.mujian.play("1",1),this.AnimationEndByTimes(this.role,"55",1,function(){this.role.play("56",0),egret.Tween.get(this.view.rolebox).to({y:this.view.rolebox.y-400},3e3),this.nextStep(),this.WinCompleted(3e3)})},this)):83==e&&(this.hideTalk(this.view.talk3),this.view.xianjing.visible=!0,this.AnimationEndByTimes(this.role,"50",1,function(){this.createRoleMask(),egret.Tween.get(this.role.armuture).to({y:370},600),this.FailCompleted()}))},t.prototype.reviveStepTwo=function(){this.view.rolebox.x=230,this.view.rolebox.y=980,this.role.scaleX*=-1,this.view.bg.x=0,this.role.play("3",0),this.view.waixingbox0.x=-156.74,this.waixingren0.play("yidong",0),egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.view.xianjing.visible=!1,this.view.rolebox.x=1600,this.view.rolebox.y=980,this.view.bg.x=-1350,this.role.armuture.y=0,this.role.mask=null,this.role.removeChild(this.mask1),this.mask1=null,this.role.play("3",0),egret.setTimeout(function(){this.gameStep3()},this,1200)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0013",t}(GameBase);__reflect(GameMediator0013.prototype,"GameMediator0013");var GameMediator0014=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.waixingren0=new DragonBase,o.mujian=new DragonBase,o.st0dir=0,o.st1dir=0,o.fcdir=1,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(14)},t.prototype.loadSubOK=function(){this.playGround(),this.initRole("feichuan"),this.initmujian()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("daiji",0),this.startGame()},t.prototype.playGround=function(){this.view.background2.visible=!1,this.view.bgmask.alpha=0,this.bgindex=egret.setInterval(function(){this.view.background0.x--,this.view.background1.x--,0==this.view.background1.x?this.view.background0.x=2100:0==this.view.background0.x&&(this.view.background1.x=2100)},this,17),this.st0Shake=egret.setInterval(function(){0==this.st0dir?(this.view.st0.rotation+=.3,this.view.st0.rotation>=6&&(this.st0dir=1)):(this.view.st0.rotation-=.3,this.view.st0.rotation<=-6&&(this.st0dir=0))},this,17),this.st1Shake=egret.setInterval(function(){0==this.st1dir?(this.view.st1.rotation+=.2,this.view.st1.rotation>=5&&(this.st1dir=1)):(this.view.st1.rotation-=.2,this.view.st1.rotation<=-5&&(this.st1dir=0))},this,17),this.fcShake=egret.setInterval(function(){0==this.fcdir?(this.view.fc.rotation+=.1,this.view.fc.rotation>=3&&(this.fcdir=1)):(this.view.fc.rotation-=.1,this.view.fc.rotation<=-3&&(this.fcdir=0))},this,17),egret.Tween.get(this.view.ren,{loop:!0}).to({rotation:2.5},900).to({rotation:-2.5},1800).to({rotation:0},900)},t.prototype.initmujian=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.mujian.initDragon("14mujian")];case 1:return e.sent(),this.view.mujianbox.addChild(this.mujian),this.mujian.scaleX*=this.mujian.scaleY*=.5,egret.Tween.get(this.mujian,{loop:!0}).to({rotation:2},1300).to({rotation:-2},2600).to({rotation:0},1300),this.mujian.alpha=0,[2]}})})},t.prototype.startGame=function(){this.role.play("daiji",0),egret.setTimeout(function(){egret.Tween.get(this.view.st0).to({x:544},1500),egret.Tween.get(this.view.st1).to({x:669},1500),egret.Tween.get(this.view.fc).to({x:599},1500)},this,3e3),egret.Tween.get(this.view.rolebox).to({x:190},3300).call(function(){egret.setTimeout(function(){this.showTalk(this.view.talk0,"又是陨石又是飞船，我该往哪儿飞"),this.sendNotification(NotificationNames.SHOW_SELECT,[89,94,95])},this,1200)},this)},t.prototype.gameStep2=function(){egret.Tween.get(this.view.earth).to({scaleX:1,scaleY:1},4500),egret.Tween.get(this.view.rolebox).to({y:946.66},2e3).wait(3e3).call(function(){egret.Tween.get(this.mujian).to({alpha:1},1300).call(function(){this.showTalk(this.view.talk0,"不好，是外星人的母舰"),this.sendNotification(NotificationNames.SHOW_SELECT,[90,93])},this)},this)},t.prototype.gameStep3=function(){this.showTalk(this.view.talk0,"被困在海中怎么办？",0,2e3,function(){this.sendNotification(NotificationNames.SHOW_SELECT,[91,92])},this)},t.prototype.createRoleMask=function(){this.mask1||(this.mask1=new egret.Shape,this.mask1.graphics.beginFill(16711680),this.mask1.graphics.drawCircle(0,-190,200),this.mask1.graphics.endFill()),this.role.addChild(this.mask1),this.role.mask=this.mask1},t.prototype.eventResult=function(e){89==e?(this.role.play("fei",0),this.hideTalk(this.view.talk0),egret.Tween.get(this.view.rolebox).to({y:760},1e3),egret.Tween.get(this.view.st0).to({x:-400,y:0},2800),egret.Tween.get(this.view.st1).to({x:-450},3800),egret.Tween.get(this.view.fc).to({x:-500},4500),this.AnimationEndByTimes(this.role,"fei",2,function(){this.role.play("daiji",0),this.nextStep(),this.gameStep2()})):94==e?(this.hideTalk(this.view.talk0),egret.Tween.get(this.view.st0).to({x:-400,y:0},2800),egret.Tween.get(this.view.st1).to({x:-450},3800),egret.Tween.get(this.view.fc).to({x:-500},4500),egret.setTimeout(function(){var e=new SheetMovieClip(60,EffectUrl.BAOZHA_EFF);e.setList(1,6,"xb"),e.start(1),e.anchorOffsetX=98,e.anchorOffsetY=76,e.scaleX=e.scaleY=2,e.x=180,e.y=850,this.view.bg.addChild(e),this.role.play("zhuangji",1),egret.Tween.removeTweens(this.view.fc),egret.Tween.get(this.view.rolebox).to({x:-200},500),egret.Tween.get(this.view.fc).to({x:-500},9e3),this.FailCompleted()},this,1e3)):95==e?(this.hideTalk(this.view.talk0),egret.Tween.get(this.view.st0).to({x:-400,y:0},2800),egret.Tween.get(this.view.st1).to({x:-450},3800),egret.Tween.get(this.view.fc).to({x:-500},4500),egret.Tween.get(this.view.rolebox).to({y:1100},1e3),egret.setTimeout(function(){var e=new SheetMovieClip(60,EffectUrl.BAOZHA_EFF);e.setList(1,6,"xb"),e.start(1),e.anchorOffsetX=98,e.anchorOffsetY=76,e.scaleX=e.scaleY=2,e.x=180,e.y=1e3,this.view.bg.addChild(e),this.role.play("zhuangji",1),egret.Tween.removeTweens(this.view.st1),egret.Tween.get(this.view.rolebox).to({x:-200},500),egret.Tween.get(this.view.st1).to({x:-500},9e3),this.FailCompleted()},this,1e3)):90==e?this.showTalk(this.view.talk0,"走不掉了，同归于尽吧！",0,2e3,function(){egret.Tween.get(this.view.rolebox).to({y:600,x:400},1300).call(function(){var e=new SheetMovieClip(60,EffectUrl.BAOZHA_EFF);e.setList(1,6,"xb"),e.start(1),e.anchorOffsetX=98,e.anchorOffsetY=76,e.scaleX=e.scaleY=5,e.x=350,e.y=490,this.view.bg.addChild(e),this.role.visible=!1,this.FailCompleted()},this)},this):93==e?this.showTalk(this.view.talk0,"先回地球再说吧",0,2e3,function(){this.AnimationEndByTimes(this.role,"diqiu",1,function(){this.role.visible=!1,this.nextStep(),egret.Tween.get(this.view.bgmask).to({alpha:1},1e3).call(function(){this.view.background2.visible=!0},this).wait(300).to({alpha:0},1e3).call(function(){this.gameStep3()},this)},this),egret.Tween.get(this.view.rolebox).to({y:800,x:600},1300)},this):91==e?(egret.Tween.get(this.view.chuan).to({x:200},1e4),this.showTalk(this.view.talk0,"果然有邮轮！得救了！",1500),this.nextStep(),this.WinCompleted(3e3)):92==e&&(this.showTalk(this.view.talk0,"飞船坏了，没有办法过去呀",500),this.FailCompleted())},t.prototype.reviveStepTwo=function(){this.view.rolebox.x=190,this.view.rolebox.y=760,this.role.visible=!0,this.role.play("daiji",0),this.mujian.alpha=0,this.view.earth.scaleX=this.view.earth.scaleY=0,egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.view.talk0.alpha=0,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.clearInterval(this.bgindex),egret.clearInterval(this.st0Shake),egret.clearInterval(this.st1Shake),egret.clearInterval(this.fcShake),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0014",t}(GameBase);__reflect(GameMediator0014.prototype,"GameMediator0014");var GameMediator0015=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.yv=new DragonBase,o.renfanzi=new DragonBase,o.che0=new DragonBase,o.che1=new DragonBase,o.baobiao=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(15)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.inityv(),this.initrenfanzi(),this.initbaobiao(),this.initche()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",1),this.startGame()},t.prototype.inityv=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.yv.initDragon("yv")];case 1:return e.sent(),this.view.yvbox.addChild(this.yv),this.yv.play("10",0),this.yv.scaleX*=this.yv.scaleY*=.6,this.yv.scaleX*=-1,[2]}})})},t.prototype.initrenfanzi=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.renfanzi.initDragon("renfanzi")];case 1:return e.sent(),this.view.renfanzibox.addChild(this.renfanzi),this.renfanzi.scaleX*=this.renfanzi.scaleY*=.65,this.renfanzi.play("1",0),this.renfanzi.scaleX*=-1,[2]}})})},t.prototype.initbaobiao=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.baobiao.initDragon("baobiao")];case 1:return e.sent(),this.view.baobiaobox.addChild(this.baobiao),this.baobiao.scaleX*=this.baobiao.scaleY*=.8,this.baobiao.scaleX*=-1,[2]}})})},t.prototype.initche=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.che0.initDragon("che")];case 1:return e.sent(),this.view.chebox0.addChild(this.che0),[4,this.che1.initDragon("che")];case 2:return e.sent(),this.view.chebox1.addChild(this.che1),this.che0.scaleX=this.che0.scaleY=.65,this.che0.scaleX*=-1,this.che1.scaleX=this.che1.scaleY=.65,this.che0.play("lk",0),[2]}})})},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:230},3300).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"终于回家乡了！有个小孩子在哭，难道遇到人贩子了？",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[96,97])},this,4e3)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-850},4700)},this,500),egret.Tween.get(this.view.rolebox).to({x:1e3},5200).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"走的好累的，看看能不能找辆车..",0),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[98,99])},this,2e3)},this)},t.prototype.gameStep3=function(){this.showTalk(this.view.talk0,"汽车扎胎了，这该怎么回家啊？",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[100,101])},this,3e3)},t.prototype.eventResult=function(e){96==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:400},1500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk0,"这小孩是不是你拐来的？！",0,2e3,function(){this.renfanzi.play("2",1),this.renfanzi.scaleX*=-1,this.showTalk(this.view.talk1,"后面就是警察局，我在这里拐小孩是疯了么？"),this.FailCompleted()},this)},this),egret.Tween.get(this.view.bg).to({x:-200},2e3)):97==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:385},1500).call(function(){egret.setTimeout(function(){var e=new eui.Image("scene15_json.caps");e.anchorOffsetX=70,e.anchorOffsetY=73,e.scaleX=-.7,e.scaleY=.7,e.y=-115,e.x=7,this.view.yvbox.addChild(e)},this,960),this.AnimationEndByTimes(this.role,"62",1,function(){this.role.play("3",0),this.yv.play("11",0),this.showTalk(this.view.talk2,"太好了！我也有警察叔叔的帽子了！",0,2e3,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})})})},this),egret.Tween.get(this.view.bg).to({x:-200},2e3)):98==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1200},1500).call(function(){this.role.play("3",0),this.baobiao.play("2",1),this.showTalk(this.view.talk4,"总统的车你也敢乘？",0,2e3),egret.setTimeout(function(){this.role.play("63",0),egret.Tween.get(this.view.rolebox).to({x:300,y:0},1200)},this,300),this.FailCompleted()},this)):99==e?(this.hideTalk(this.view.talk0),egret.Tween.get(this.view.bg).to({x:-1450},5e3),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1600},4500).call(function(){this.role.play("3",0),this.disappear(this.role),egret.setTimeout(function(){this.che1.play("aotuo2",0),this.nextStep(),egret.Tween.get(this.view.chebox1).to({x:3400},3300).call(function(){this.che1.play("aotuo1",0),egret.setTimeout(function(){this.view.rolebox.x=3350,egret.Tween.get(this.role).to({alpha:1},250).call(function(){this.gameStep3()},this)},this,1500)},this),egret.Tween.get(this.view.bg).to({x:-3200},3400)},this,500)},this)):100==e?(this.role.play("65",0),this.view.talk0.y-=90,this.showTalk(this.view.talk0,"这下可以回家了"),egret.Tween.get(this.view.rolebox).to({x:4e3},3e3),this.nextStep(),this.WinCompleted(3e3)):101==e&&(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"64",1,function(){this.AnimationEndByLoop(this.role,"64a",3e3,function(){var e=new SheetMovieClip(60,[]);e.setList(0,13,"scene15_json.wuzi_3_"),e.anchorOffsetX=327,e.anchorOffsetY=142,e.scaleX=e.scaleY=2,this.view.rolebox.addChild(e),e.start(1),this.FailCompleted(1e3)})}))},t.prototype.reviveStepTwo=function(){this.view.rolebox.x=385,this.view.rolebox.y=980,this.view.bg.x=-200,this.role.play("3",0),egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.view.rolebox.x=3350,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0015",t}(GameBase);__reflect(GameMediator0015.prototype,"GameMediator0015");var GameMediator0016=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.jiangshi0=new DragonBase,o.jiangshi1=new DragonBase,o.jiangshi2=new DragonBase,o.baobiao=new DragonBase,o.jiangshilist=[],o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(16)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.initjiangshi()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",1),this.startGame()},t.prototype.initjiangshi=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.jiangshi0.initDragon("16jiangshi")];case 1:return e.sent(),this.view.jiangshibox0.addChild(this.jiangshi0),[4,this.jiangshi1.initDragon("16jiangshi")];case 2:return e.sent(),this.view.jiangshibox1.addChild(this.jiangshi1),this.jiangshi0.scaleX=this.jiangshi0.scaleY=.65,[4,this.jiangshi2.initDragon("16jiangshi")];case 3:return e.sent(),this.view.jiangshibox2.addChild(this.jiangshi2),this.jiangshi2.scaleX=this.jiangshi2.scaleY=.65,this.jiangshi0.scaleX*=-1,this.jiangshi2.scaleX*=-1,this.jiangshi1.scaleX=this.jiangshi1.scaleY=.65,this.jiangshi1.scaleX*=-1,this.jiangshi0.play("1",0),this.jiangshi1.play("1",0),this.jiangshi2.play("1",0),this.jiangshilist.push(this.jiangshi0),this.jiangshilist.push(this.jiangshi1),this.jiangshilist.push(this.jiangshi2),[2]}})})},t.prototype.createFire=function(){var e=new SheetMovieClip(60,EffectUrl.FIRE_EFF);e.setList(1,18,"scene16_json.000"),e.scaleX=e.scaleY=1.5,e.start(0),this.view.fire0.addChild(e);var t=new SheetMovieClip(60,EffectUrl.FIRE_EFF);t.setList(1,18,"scene16_json.000"),t.scaleX=t.scaleY=1.5,t.start(0),this.view.fire1.addChild(t);var i=new SheetMovieClip(60,EffectUrl.FIRE_EFF);i.setList(1,18,"scene16_json.000"),i.scaleX=i.scaleY=1.5,i.start(0),this.view.fire2.addChild(i),this.sheetGroup.push(e),this.sheetGroup.push(t),this.sheetGroup.push(i),egret.Tween.get(this.view.home).to({alpha:1},1500).call(function(){this.clearSheetClip(!0)},this)},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:600},5500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk0,"是我心爱的汉堡店！看到它肚子又饿了",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[43,44])},this,4e3)},this),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-200},5e3)},this,1e3)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-850},3700)},this,500),egret.Tween.get(this.view.rolebox).to({x:1e3},4200).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"为什么会有一群僵尸围住我的家？"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[102,103])},this,200)},this)},t.prototype.gameStep3=function(){this.showTalk(this.view.talk0,"妈妈去哪儿了？",2e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[104,105])},this,4e3)},t.prototype.eventResult=function(e){43==e?this.showTalk(this.view.talk0,"舒舒服服吃个汉堡吧",0,2e3,function(){this.AnimationEndByTimes(this.role,"66",1,function(){SoundManager.getInstance().playNewEffect(SoundManager.WANG),this.AnimationEndByTimes(this.role,"66a",1,function(){SoundManager.getInstance().playNewEffect(SoundManager.JINGKONG),this.role.play("66b",1),this.FailCompleted()}),this.showTalk(this.view.talk0,"啊，我的汉堡",700,1500)})}):44==e?this.showTalk(this.view.talk0,"印象中上一次吃炸鸡被鸟叼走了，我得小心点",0,2e3,function(){this.AnimationEndByTimes(this.role,"67",1,function(){this.role.play("3",0),this.showTalk(this.view.talk0,"吃饱啦，回家",0,2e3,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})})})}):102==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1050},500).call(function(){this.AnimationEndByTimes(this.role,"68",1,function(){this.role.play("68a",0),egret.setTimeout(this.createFire,this,1e3),egret.setTimeout(function(){for(var e=0;e<this.jiangshilist.length;e++){var t=this.jiangshilist[e];t.play("2",0),t.scaleX*=-1,egret.Tween.get(t).to({x:420},2100).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"啊，我的家",0,2e3)},this)}this.FailCompleted(3e3)},this,1e3)})},this)):103==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"69",1,function(){this.role.play("69a",0);var e=new SheetMovieClip(60,EffectUrl.JTL_EFF);e.start(0),e.x=125,e.y=-150,this.view.rolebox.addChild(e),this.sheetGroup.push(e),egret.setTimeout(function(){for(var e=function(e){var i=t.jiangshilist[e];i.play("2",0),i.scaleX*=-1,egret.Tween.get(i).to({x:420},2100).call(function(){0==e&&(this.clearSheetClip(!0),this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.showTalk(this.view.talk0,"赶紧回去看看发生了什么 ",0,2e3,function(){this.view.bgmask.alpha=0,this.view.bgmask.visible=!0,egret.Tween.get(this.view.bgmask).to({alpha:1},800).call(function(){this.view.bg1.visible=!0;
for(var e=0;e<this.jiangshilist.length;e++){var t=this.jiangshilist[e];t.play("1",0),t.x=-100}this.view.rolebox.x=200,this.view.bg.x=0},this).wait(300).to({alpha:0},300).call(function(){this.gameStep3()},this)})}))},t)},t=this,i=0;i<this.jiangshilist.length;i++)e(i)},this,1e3)})):104==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:350},1500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk0,"这是妈妈留下的纸条？",0,2e3,function(){this.view.paper.visible=!1,egret.setTimeout(function(){this.showTalk(this.view.talk0,"这里竟然有一条地道",0,2e3,function(){this.view.ground.visible=!0,this.role.play("1",1),this.nextStep(),this.WinCompleted()})},this,500)})},this),egret.Tween.get(this.view.bg).to({x:-50},1e3)):105==e&&(this.role.play("3",0),this.showTalk(this.view.talk0,"去小镇找找看吧",0,2e3,function(){egret.Tween.get(this.view.bgmask).to({alpha:1},800).call(function(){this.view.bg1.visible=!1,this.view.rolebox.x=1500,this.role.scaleX*=-1,this.view.bg.x=-1100},this).wait(300).to({alpha:0},300).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"怎么又来这么多僵尸 ",0,2e3),this.FailCompleted(3e3)},this)}))},t.prototype.reviveStepTwo=function(){this.view.rolebox.x=600,this.view.bg.x=-200,this.role.play("3",0);for(var e=0;e<this.jiangshilist.length;e++){var t=this.jiangshilist[e];t.play("1",0),t.x=0,t.scaleX*=-1}this.view.home.alpha=0,egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.role.play("3",0),this.role.scaleX*=-1,this.view.rolebox.x=200,this.view.bg.x=0,this.view.bg1.visible=!0,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0016",t}(GameBase);__reflect(GameMediator0016.prototype,"GameMediator0016");var GameMediator0017=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.yeren=new DragonBase,o.niao1=new DragonBase,o.jiangshi2=new DragonBase,o.baobiao=new DragonBase,o.jiangshilist=[],o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(17)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.inityeren(),this.initniao1()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.inityeren=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.yeren.initDragon("yeren")];case 1:return e.sent(),this.yeren.scaleX=this.yeren.scaleY=1.3,this.yeren.play("daiji",0),this.view.yerenbox.addChild(this.yeren),[2]}})})},t.prototype.initniao1=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.niao1.initDragon("niao1")];case 1:return e.sent(),this.niao1.play("1",0),this.view.niao1box.addChild(this.niao1),[2]}})})},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:250},3e3).call(function(){this.role.play("3",0),this.showTalk(this.view.talk0,"问问他是否知道我妈妈去哪里了吧",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[1,106])},this,4e3)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-1e3},6e3)},this,500),egret.Tween.get(this.view.rolebox).to({x:1200},6500).call(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"小鸟被网困住了，得想办法救它出来"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[107,108])},this,2e3)},this)},t.prototype.gameStep3=function(){this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-2200},9e3),egret.Tween.get(this.view.rolebox).to({x:2350},9500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk0,"河水湍急 如何过河呢"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[109,110])},this,2e3)},this)},t.prototype.createshitouboxMask=function(){this.mask||(this.mask=new egret.Shape,this.mask.graphics.beginFill(16711680),this.mask.graphics.drawCircle(40,15,50),this.mask.graphics.endFill()),this.view.shitoubox.addChild(this.mask),this.view.shitoubox.mask=this.mask},t.prototype.eventResult=function(e){1==e?(this.showTalk(this.view.talk0,"老伯，有看到一位拿着个奶粉瓶的女性吗"),this.AnimationEndByTimes(this.role,"71",1,function(){this.FailCompleted()}),egret.setTimeout(function(){this.yeren.play("yihuo",1)},this,730)):106==e?(this.showTalk(this.view.talk0,"老伯，有看到一位拿着个蚊拍的女性吗",0,2e3),this.AnimationEndByTimes(this.role,"73",1,function(){this.AnimationEndByTimes(this.yeren,"huangrangdawu",1,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.yeren.play("daiji",0),this.gameStep2()})})}),egret.setTimeout(function(){},this,730)):107==e?this.showTalk(this.view.talk0,"试试用标枪打下来这个网吧",0,2e3,function(){this.AnimationEndByTimes(this.role,"75",1,function(){this.role.play("3",0),egret.setTimeout(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})},this,1e3)}),egret.setTimeout(function(){this.disappear(this.view.wang),this.niao1.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.niao1).to({x:1800,y:-300},4e3)},this,300)},this,1200)}):108==e?this.showTalk(this.view.talk0,"试试用剪刀剪破这个网吧",0,2e3,function(){this.AnimationEndByTimes(this.role,"74",1,function(){this.showTalk(this.view.talk0,"这个网有点高够不着"),this.FailCompleted()})}):109==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:2450},1e3).call(function(){this.AnimationEndByTimes(this.role,"76",1,function(){egret.setTimeout(function(){this.AnimationEndByTimes(this.role,"76a",1,function(){this.role.play("3",0)}),egret.setTimeout(function(){this.view.shitoubox.visible=!0,egret.Tween.get(this.view.shitoubox).to({y:957},350,egret.Ease.circIn),egret.Tween.get(this.view.shitoubox).to({x:2661},350).call(function(){this.createshitouboxMask(),egret.Tween.get(this.view.shitou).to({y:15},350),egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:2500},500).call(function(){egret.Tween.get(this.view.rolebox).to({x:2904,y:922},930),this.AnimationEndByTimes(this.role,"52",1,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:3200},3e3),this.nextStep(),this.WinCompleted()})},this)},this,1e3)},this)},this,730)},this,400)}),egret.setTimeout(function(){this.view.shitoubox.visible=!1,this.view.shitoubox.y-=60},this,830)},this)):110==e&&(this.hideTalk(this.view.talk0),this.view.mutou.visible=!0,egret.Tween.get(this.view.mutou).to({y:965},400).to({x:2222,y:800,scaleX:.4,scaleY:.4},2500).call(function(){},this),egret.setTimeout(function(){this.disappear(this.view.mutou)},this,2400),egret.setTimeout(function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"木头被冲跑了")},this,1e3),this.FailCompleted(3e3))},t.prototype.reviveStepTwo=function(){this.view.talk0.alpha=0,this.view.rolebox.x=250,this.view.bg.x=0,this.role.play("3",0),egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.view.talk0.alpha=0,this.role.play("3",0),this.view.rolebox.x=1200,this.view.bg.x=-1e3,this.view.mutou.x=2729.5,this.view.mutou.y=721.5,this.view.mutou.visible=!1,this.view.mutou.alpha=1,this.view.mutou.scaleX=this.view.mutou.scaleY=1,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0017",t}(GameBase);__reflect(GameMediator0017.prototype,"GameMediator0017");var GameMediator0018=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.laohu=new DragonBase,o.mao=new DragonBase,o.mifeng=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(18)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.initlaohu(),this.initmao(),this.initmifeng()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initlaohu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.laohu.initDragon("laohu")];case 1:return e.sent(),this.laohu.scaleX=this.laohu.scaleY=1.8,this.laohu.play("1",0),this.view.laohubox.addChild(this.laohu),[2]}})})},t.prototype.initmao=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.mao.initDragon("mao")];case 1:return e.sent(),this.mao.play("3",0),this.mao.alpha=0,this.view.maobox.addChild(this.mao),[2]}})})},t.prototype.initmifeng=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.mifeng.initDragon("mifeng")];case 1:return e.sent(),this.mifeng.scaleX=this.mifeng.scaleY=.6,this.mifeng.armuture.animation.timeScale=.5,this.mifeng.play("1",0),this.view.mifengbox.addChild(this.mifeng),[2]}})})},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:200},2500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk0,"好美的桃园，可是有只老虎把守怎么过去呢？",1e3),egret.setTimeout(function(){this.role.play("3b",0),this.sendNotification(NotificationNames.SHOW_SELECT,[81,111])},this,4e3)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.setTimeout(function(){egret.Tween.get(this.view.bg).to({x:-1400},9e3).call(function(){this.showTalk(this.view.talk0,"前面有群蜜蜂，走过去会被蛰怎么办？",500),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[82,26,20])},this,2500)},this)},this,500),egret.Tween.get(this.view.rolebox).to({x:1600},8500).call(function(){this.role.play("3a",0)},this)},t.prototype.gameStep3=function(){this.role.play("3",0),this.showTalk(this.view.talk0,"水灵灵的桃子！想吃！怎么够到它呢"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[62,27])},this,2e3)},t.prototype.eventResult=function(e){81==e?this.showTalk(this.view.talk0,"试试冰冻光线吧",0,1300,function(){this.AnimationEndByTimes(this.role,"78",1,function(){this.role.play("3a",0)}),egret.setTimeout(function(){var e=new eui.Image("scene18_json.bd");SoundManager.getInstance().playNewEffect(SoundManager.BIU),e.width=40,e.height=20,this.view.rolebox.addChild(e),e.y=-130,e.x=115,egret.Tween.get(e).to({x:230},200).call(function(){this.disappear(e),this.AnimationEndByTimes(this.laohu,"4",1,function(){this.laohu.play("1",0),this.showTalk(this.view.talk0,"老虎竟然能挣脱冰块",0,2e3),this.FailCompleted()})},this)},this,1e3)}):111==e?this.showTalk(this.view.talk0,"加油小猫",0,1300,function(){egret.Tween.get(this.mao).to({alpha:1},300).call(function(){this.mao.play("1",0),egret.Tween.get(this.view.bg).to({x:-800},4500),egret.setTimeout(function(){egret.Tween.get(this.mao).to({y:-75},2900)},this,1e3)},this).to({x:1e3},4e3).call(function(){this.mao.play("2",0),egret.Tween.get(this.mao).to({y:-350},1500).call(function(){this.mao.play("3",0)},this)},this),egret.setTimeout(function(){this.laohu.scaleX*=-1,this.laohu.play("2",0),egret.Tween.get(this.laohu).to({x:600},3e3).call(function(){egret.Tween.get(this.laohu).to({x:650},500),this.AnimationEndByTimes(this.laohu,"3",1,function(){var e=new SheetMovieClip(60,EffectUrl.FIRE_EFF);e.setList(1,4,"scene18_json.yunxuan"),e.start(0),this.view.effectgroup.addChild(e),this.sheetGroup.push(e),this.nextStep(),egret.Tween.get(this.view.bg).wait(600).to({x:0},3e3).call(function(){this.AnimationEndByTimes(this.role,"1",1,function(){this.gameStep2()})},this)})},this)},this,2200)}):82==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"79",1,function(){this.showTalk(this.view.talk0,"蜜蜂好像被激怒了，快跑",0,2e3,function(){egret.Tween.get(this.mifeng).to({x:-350},2e3),egret.Tween.get(this.role).to({x:-300},2e3),this.FailCompleted(2500),this.role.scaleX*=-1,this.role.play("79a",0)})})):26==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"80",1,function(){this.showTalk(this.view.talk0,"特殊时期，忍忍吧！",0,2e3,function(){egret.Tween.get(this.view.rolebox).to({x:2400},5e3),egret.Tween.get(this.view.bg).to({x:-2250},6e3).call(function(){this.role.play("3",0),this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),egret.setTimeout(function(){this.gameStep3()},this,1500)})},this),this.role.play("80a",0)})})):20==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"81",1,function(){this.showTalk(this.view.talk0,"头盔护不住脸和身体啊",0,2e3,function(){egret.Tween.get(this.mifeng).to({x:-350},2e3),egret.Tween.get(this.role).to({x:-300},2e3),this.FailCompleted(2500),this.role.scaleX*=-1,this.role.play("81a",0)})})):62==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"82",1,function(){}),egret.setTimeout(function(){this.role.play("82a",0),egret.Tween.get(this.view.rolebox).to({x:2450,y:850},1500).call(function(){this.showTalk(this.view.talk0,"飘起来就可以拿到了",0,1500,function(){this.AnimationEndByTimes(this.role,"82c",1,function(){}),egret.setTimeout(function(){this.view.peach.visible=!1,this.WinCompleted()},this,170)})},this)},this,830)):27==e&&(this.hideTalk(this.view.talk0),this.role.play("83",1),this.FailCompleted(2e3))},t.prototype.reviveStepTwo=function(){this.view.talk0.alpha=0,this.view.rolebox.x=200,this.role.x=0,this.role.scaleX=.65,this.mifeng.x=0,this.view.bg.x=0,this.role.play("3",0),egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.view.talk0.alpha=0,this.role.play("3",0),this.view.rolebox.x=2400,this.view.bg.x=-2250,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0018",t}(GameBase);__reflect(GameMediator0018.prototype,"GameMediator0018");var GameMediator0019=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.laonong=new DragonBase,o.haizi=new DragonBase,o.music=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(19)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.initlaonong(),this.inithaizi(),this.initMusic()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initlaonong=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.laonong.initDragon("laonong")];case 1:return e.sent(),this.laonong.scaleX=this.laonong.scaleY=.9,this.laonong.play("1",0),this.view.laonongbox.addChild(this.laonong),[2]}})})},t.prototype.inithaizi=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.haizi.initDragon("xiaohai3")];case 1:return e.sent(),this.haizi.scaleX=this.haizi.scaleY=1.5,this.haizi.play("1",0),this.view.haizibox.addChild(this.haizi),[2]}})})},t.prototype.initMusic=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.music.initDragon("yy19")];case 1:return e.sent(),this.view.musicbox.addChild(this.music),[2]}})})},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:200},2500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk2,"生人免进",0,2e3),this.AnimationEndByTimes(this.laonong,"2",1,function(){this.laonong.play("1",0)}),this.showTalk(this.view.talk0,"前面有个村庄！好像有个村民在站岗",2e3),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[66,112])},this,4e3)},this)},t.prototype.gameStep2=function(){egret.setTimeout(function(){this.showTalk(this.view.talk0,"被小孩子围住了走不了怎么办",500),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[78,62,113])},this,2500)},this,500)},t.prototype.gameStep3=function(){egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1478},5e3).call(function(){this.role.play("3",0)},this),egret.Tween.get(this.view.bg).to({x:-1300},5e3).call(function(){this.showTalk(this.view.talk0,"大门上是妈妈的蚊拍！可是怎么开门呢？"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[15,21,42])},this,2e3)},this)},this,500)},t.prototype.eventResult=function(e){66==e?this.showTalk(this.view.talk0,"挖个地道试试！",0,1300,function(){this.role.armuture.animation.timeScale=2,this.AnimationEndByTimes(this.role,"85",3,function(){this.AnimationEndByTimes(this.role,"85a",1,function(){this.role.armuture.animation.timeScale=1,this.showTalk(this.view.talk0,"这地好硬 铁铲都断了",0,2e3),this.FailCompleted(2e3)})})}):112==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"84",1,function(){this.AnimationEndByTimes(this.role,"84a",1,function(){this.role.play("84b",0),egret.Tween.get(this.view.rolebox).to({y:600},3e3).call(function(){egret.Tween.get(this.view.bg).to({x:-720},3500)},this).to({x:900},3e3).to({y:1010},3e3).call(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"84c",1,function(){this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})},this)},this)})})):78==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:960},500).call(function(){this.role.play("3",0),this.AnimationEndByTimes(this.role,"86",1,function(){this.role.play("3",0)}),egret.setTimeout(function(){this.haizi.play("3",1),this.showTalk(this.view.talk1,"这个糖好有趣呀",300,2e3,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})})},this,1330)},this)):62==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"87",1,function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"这孩子毫无反应，好像不喜欢气球",0,2e3),this.FailCompleted(2e3)})):113==e?this.showTalk(this.view.talk0,"给他们尝尝快乐水？",0,2e3,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:980},500).call(function(){this.role.play("3",0),this.AnimationEndByTimes(this.role,"88",1,function(){}),egret.setTimeout(function(){this.haizi.play("2",1),this.role.play("88a",1),this.FailCompleted()},this,1330)},this)}):15==e?(this.hideTalk(this.view.talk0),this.music.play("1",0),egret.setTimeout(function(){egret.Tween.get(this.view.men).to({skewY:-20},1500),this.nextStep(),this.WinCompleted()},this,1e3)):21==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1700},2e3).call(function(){this.AnimationEndByTimes(this.role,"91",1,function(){this.showTalk(this.view.talk0,"大门好像毫无反应",0,2e3,function(){this.role.play("3a",0),this.FailCompleted(2e3)})})},this)):42==e&&(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1700},2e3).call(function(){this.AnimationEndByTimes(this.role,"90",1,function(){this.showTalk(this.view.talk0,"大门好像毫无反应",0,2e3,function(){this.role.play("3a",0),this.FailCompleted(2e3)})})},this))},t.prototype.reviveStepTwo=function(){this.view.talk0.alpha=0,this.view.rolebox.x=900,this.view.bg.x=-720,this.role.play("3",0),egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.view.talk0.alpha=0,this.role.play("3",0),this.view.rolebox.x=960,this.view.bg.x=-720,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0019",t}(GameBase);__reflect(GameMediator0019.prototype,"GameMediator0019");var GameMediator0020=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.shoupiao=new DragonBase,o.haidao=new DragonBase,o.mhq=new DragonBase,o.huojian=new DragonBase,o.wuyun=new DragonBase,o.iscomplete=!1,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(20),this.game.templevel>=0?this.view.huiyi.visible=!1:this.view.huiyi.visible=!0},t.prototype.loadSubOK=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.initshoupiao()];case 1:return e.sent(),this.game.templevel>=0?this.initRole1("yv"):(this.topViewMediator.view.visible=!1,this.initHuiYi()),this.inithaidao(),this.initmhq(),this.inithuojian(),this.initwuyun(),this.createFire(),[2]}})})},t.prototype.initHuiYi=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.bigrole=new DragonBase,[4,this.bigrole.initDragon("jinhua1")];case 1:return e.sent(),this.bigrole.scaleX=this.bigrole.scaleY=.7,this.view.bigrole.addChild(this.bigrole),this.initRole("yv"),this.bigrole.armuture.animation.timeScale=-.5,this.bigrole.play("2-3",1),egret.Tween.get(this.view.huiyi).wait(2e3).to({alpha:0},2e3).call(function(){this.startGame(),this.bigrole.visible=!1},this),[2]}})})},t.prototype.initRole1=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return e.prototype.initRole.call(this,t),this.startGame(),[2]})})},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.7,this.role.play("1",0),this.role.visible=!1,this.iscomplete=!0},t.prototype.initshoupiao=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.shoupiao.initDragon("shoupiao")];case 1:return e.sent(),this.shoupiao.scaleX=this.shoupiao.scaleY=.85,this.shoupiao.play("2",0),this.view.shoupiaobox.addChild(this.shoupiao),this.shoupiao.visible=!1,[2]}})})},t.prototype.inithaidao=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.haidao.initDragon("haidao")];case 1:return e.sent(),this.haidao.scaleX=this.haidao.scaleY=1,this.haidao.play("1",0),this.view.haidaobox.addChild(this.haidao),[2]}})})},t.prototype.createFire=function(){var e=new SheetMovieClip(60,EffectUrl.FIRE_EFF1);e.scaleX=e.scaleY=1.5,e.start(0),this.view.fire0.addChild(e);var t=new SheetMovieClip(60,EffectUrl.FIRE_EFF1);t.scaleX=t.scaleY=1.5,t.start(0),this.view.fire1.addChild(t);var i=new SheetMovieClip(60,EffectUrl.FIRE_EFF1);i.scaleX=i.scaleY=1.5,i.start(0),this.view.fire2.addChild(i),this.sheetGroup.push(e),this.sheetGroup.push(t),this.sheetGroup.push(i)},t.prototype.initmhq=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.mhq.initDragon("mhq")];case 1:return e.sent(),this.view.mhqbox.addChild(this.mhq),this.mhq.visible=!1,[2]}})})},t.prototype.inithuojian=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.huojian.initDragon("huojian")];case 1:return e.sent(),this.view.huojianbox.addChild(this.huojian),this.huojian.alpha=0,[2]}})})},t.prototype.initwuyun=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.wuyun.initDragon("wuyun20")];case 1:return e.sent(),this.view.wuyunbox.addChild(this.wuyun),this.wuyun.alpha=0,this.wuyun.play("2",0),[2]}})})},t.prototype.startGame=function(){if(this.iscomplete)this.view.huiyi.visible=!1,this.topViewMediator.view.visible=!0,this.role.visible=!0,this.shoupiao.visible=!0,this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-200},2500),egret.Tween.get(this.view.rolebox).to({x:450},2500).call(function(){this.role.play("1",0),this.AnimationEndByTimes(this.shoupiao,"1",1,function(){this.shoupiao.play("2",0),this.showTalk(this.view.talk1,"小朋友，请出示一下你的门票",0,2e3,function(){this.showTalk(this.view.talk0,"忘记带钱没法买门票了怎么办？"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[114,115])},this,2e3)},this)})},this);else var e=egret.setInterval(function(){this.iscomplete&&(egret.clearInterval(e),this.view.huiyi.visible=!1,this.topViewMediator.view.visible=!0,this.role.visible=!0,this.shoupiao.visible=!0,this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-200},2500),egret.Tween.get(this.view.rolebox).to({x:450},2500).call(function(){this.role.play("1",0),this.AnimationEndByTimes(this.shoupiao,"1",1,function(){this.shoupiao.play("2",0),this.showTalk(this.view.talk1,"小朋友，请出示一下你的门票",0,2e3,function(){this.showTalk(this.view.talk0,"忘记带钱没法买门票了怎么办？"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[114,115])},this,2e3)},this)})},this))},this,50)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:900},5e3).call(function(){this.role.play("1",0),egret.setTimeout(function(){this.showTalk(this.view.talk0,"遇到了可怕的海盗拦路，怎么办？",500),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[116,117])},this,2500)},this,500)},this),egret.Tween.get(this.view.bg).to({x:-720},5500).call(function(){},this)},t.prototype.gameStep3=function(){egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1478},5e3).call(function(){this.role.play("1",0)},this),egret.Tween.get(this.view.bg).to({x:-1300},5e3).call(function(){this.showTalk(this.view.talk0,"热气球着火了，得想办法灭火"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[118,119])},this,2e3)},this)},this,500)},t.prototype.eventResult=function(e){114==e?this.showTalk(this.view.talk0,"给妈妈打个电话吧",0,2e3,function(){this.AnimationEndByTimes(this.role,"17",1,function(){this.role.play("17a",1),this.role.armuture.animation.timeScale=1,this.showTalk(this.view.talk0,"电话没人接",500,2e3),this.FailCompleted(2300)})}):115==e?(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"16",1,function(){this.role.play("1",0),this.showTalk(this.view.talk1,"今天小班同学免费，小朋友进去吧",0,2e3,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"3",1,function(){this.role.play("1",0),this.gameStep2()})})})):116==e?this.showTalk(this.view.talk0,"希望这个金币能破解诅咒",0,2e3,function(){this.AnimationEndByTimes(this.role,"18",1,function(){this.role.play("1",0),this.haidao.play("3",1),this.nextStep(),egret.setTimeout(function(){this.showTalk(this.view.talk2,"小朋友谢谢你",0,2e3,function(){this.AnimationEndByTimes(this.role,"3",1,function(){this.role.play("1",0),this.gameStep3()})})},this,500)})}):117==e?(this.hideTalk(this.view.talk0),this.view.yue.alpha=0,this.view.yue.scaleX=this.view.yue.scaleY=0,this.view.yue.visible=!0,egret.Tween.get(this.view.yue).to({alpha:1,scaleX:2,scaleY:2},500).wait(1e3).call(function(){this.haidao.play("2",1),egret.setTimeout(function(){this.role.play("7",0)},this,1e3),this.showTalk(this.view.talk0,"海盗变成了更吓人的骷髅了",1e3,2e3),this.FailCompleted(2800)},this).to({alpha:0},300)):118==e?(this.hideTalk(this.view.talk0),egret.Tween.get(this.huojian).to({alpha:1},500).call(function(){this.AnimationEndByTimes(this.huojian,"2",1,function(){this.huojian.play("3",0),egret.Tween.get(this.huojian).to({y:-600},2e3).call(function(){this.huojian.play("4",1),egret.setTimeout(function(){egret.Tween.get(this.wuyun).to({alpha:1},1e3).call(function(){this.wuyun.play("1",0);for(var e=0;e<this.sheetGroup.length;e++)egret.Tween.get(this.sheetGroup[e]).to({alpha:0},2e3);egret.setTimeout(function(){this.showTalk(this.view.talk0,"太好了，火灭了",300,2e3),this.role.play("3",0),this.nextStep(),this.WinCompleted(2300)},this,2e3)},this)},this,500)},this)})},this)):119==e&&(this.hideTalk(this.view.talk0),this.mhq.visible=!0,this.mhq.alpha=0,egret.Tween.get(this.mhq).to({alpha:1},500).call(function(){this.AnimationEndByTimes(this.mhq,"2",1,function(){this.mhq.play("1",0),egret.setTimeout(function(){this.role.play("7",0)},this,1e3),this.showTalk(this.view.talk0,"火势太大了，喷火器喷完都没灭火",300,2e3),this.FailCompleted(2300)})},this))},t.prototype.reviveStepTwo=function(){this.view.talk0.alpha=0,this.haidao.play("1",0),this.view.rolebox.x=250,this.view.bg.x=0,this.role.play("1",0),egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.mhq.visible=!1,this.view.talk0.alpha=0,this.role.play("1",0),this.view.rolebox.x=960,this.view.bg.x=-720,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0020",t}(GameBase);__reflect(GameMediator0020.prototype,"GameMediator0020");var GameMediator0021=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.haizi0=new DragonBase,o.haizi2=new DragonBase,o.laoren0=new DragonBase,o.laoren1=new DragonBase,o.gou=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(21)},t.prototype.loadSubOK=function(){this.initRole("yv"),this.inithaizi0(),this.inithaizi2(),this.initlaoren0(),this.initlaoren1(),this.initgou()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.inithaizi0=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.haizi0.initDragon("xiaohai1")];case 1:return e.sent(),this.haizi0.scaleX=this.haizi0.scaleY=1.5,this.haizi0.scaleX*=-1,this.haizi0.play("1",0),this.view.haizibox0.addChild(this.haizi0),[2]}})})},t.prototype.inithaizi2=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.haizi2.initDragon("haizi3")];case 1:return e.sent(),this.haizi2.scaleX=this.haizi2.scaleY=1.5,this.haizi2.scaleX*=-1,this.haizi2.play("1",0),this.view.haizibox2.addChild(this.haizi2),[2]}})})},t.prototype.initlaoren0=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.laoren0.initDragon("laoren2")];case 1:return e.sent(),this.laoren0.scaleX=this.laoren0.scaleY=1.5,this.laoren0.scaleX*=-1,this.laoren0.play("1",0),this.view.laorenbox0.addChild(this.laoren0),[2]}})})},t.prototype.initlaoren1=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.laoren1.initDragon("laoren1")];case 1:return e.sent(),this.laoren1.scaleX=this.laoren1.scaleY=1.5,this.laoren1.scaleX*=-1,this.laoren1.play("1",0),this.view.laorenbox1.addChild(this.laoren1),[2]}})})},t.prototype.initgou=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.gou.initDragon("gou1")];case 1:return e.sent(),this.gou.scaleX=this.gou.scaleY=1,this.gou.scaleX*=-1,this.gou.play("2",0),this.view.goubox.addChild(this.gou),this.gou.visible=!1,[2]}})})},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:200},2500).call(function(){this.role.play("1",0),this.showTalk(this.view.talk0,"前面的小朋友好快乐，怎么能让他更快乐一些呢？"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[120,121])},this,3e3)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-580},4500),egret.Tween.get(this.view.rolebox).to({x:800},5e3).call(function(){this.role.play("1",0),this.showTalk(this.view.talk2,"我的宠物狗去哪里了",500,2e3),egret.setTimeout(function(){this.showTalk(this.view.talk0,"帮老人找宠物狗吧",600),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[122,123])
},this,2500)},this,2500)},this)},t.prototype.gameStep3=function(){egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1500},5e3).call(function(){this.role.play("1",0)},this),egret.Tween.get(this.view.bg).to({x:-1300},5e3).call(function(){this.showTalk(this.view.talk0,"这是谁的风筝挂在树上了，想个办法拿下去来"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[124,125,126])},this,2e3)},this)},this,500)},t.prototype.eventResult=function(e){120==e?this.showTalk(this.view.talk0,"给他做个沙丘城堡吧",0,1500,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:275},600).call(function(){this.AnimationEndByTimes(this.role,"19",1,function(){this.role.play("1",0),this.view.shadiao.visible=!0,egret.setTimeout(function(){this.haizi0.play("2",1),egret.setTimeout(function(){this.view.shadiao.source="scene21_json.shadiao",this.role.play("1a",0),this.FailCompleted(1700)},this,330)},this,600)})},this)}):121==e?this.showTalk(this.view.talk0,"送给他我最爱的鸡腿",0,1500,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:350},900).call(function(){this.AnimationEndByTimes(this.role,"20",1,function(){this.role.play("1",0),this.AnimationEndByTimes(this.haizi0,"3",1,function(){this.haizi0.play("1",0),this.nextStep(),this.AnimationEndByTimes(this.role,"3",1,function(){this.role.play("1",0),this.gameStep2()})})})},this)}):122==e?this.showTalk(this.view.talk0,"试一试美食引诱",0,1500,function(){this.AnimationEndByTimes(this.role,"21",1,function(){this.laoren0.play("2",0),this.laoren1.play("2",0),egret.Tween.get(this.view.gou).to({y:900},1500).call(function(){this.nextStep(),this.AnimationEndByTimes(this.role,"3",1,function(){this.role.play("1",0),this.gameStep3()})},this)})}):123==e?(this.gou.visible=!0,this.showTalk(this.view.talk0,"汪汪",0,1500),egret.Tween.get(this.view.goubox).to({x:190},4500),this.AnimationEndByLoop(this.role,"22",2200,function(){this.role.play("24a",1),this.FailCompleted()})):124==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1550},500).call(function(){this.role.play("1",0),this.AnimationEndByTimes(this.role,"23",1,function(){this.role.play("3",0),this.nextStep(),this.WinCompleted()}),egret.setTimeout(function(){egret.Tween.get(this.view.fengzheng).to({x:1684,y:926},300)},this,900)},this)):125==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1560},700).call(function(){this.role.play("1",0),egret.Tween.get(this.view.rolebox).to({x:1650,y:966},340).to({x:1600,y:1010},400),this.AnimationEndByTimes(this.role,"24",1,function(){this.FailCompleted(),this.AnimationEndByTimes(this.role,"24a",1,function(){})})},this)):126==e&&(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"25",1,function(){this.role.play("1",0),egret.setTimeout(function(){this.role.play("1a",0),this.showTalk(this.view.talk0,"扇的风力太小了",500,1500),this.FailCompleted(2e3)},this,1e3)},this))},t.prototype.reviveStepTwo=function(){this.view.talk0.alpha=0,this.view.rolebox.x=350,this.view.bg.x=0,this.role.play("1",0),this.gou.visible=!1,this.view.goubox.x=1452,egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.view.talk0.alpha=0,this.role.play("1",0),this.view.rolebox.x=800,this.view.rolebox.y=1010,this.view.bg.x=-580,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0021",t}(GameBase);__reflect(GameMediator0021.prototype,"GameMediator0021");var GameMediator0022=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.jiqiren=new DragonBase,o.bingdu=new DragonBase,o.music=new DragonBase,o.jixiebi=new DragonBase,o.gongchengshi=new DragonBase,o.movetimes=0,o.targettimes=7,o.movespeed=96,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(22),this.view.warn.alpha=0},t.prototype.loadSubOK=function(){this.initRole("bb"),this.initjiqiren(),this.initbingdu(),this.initjixiebi(),this.initgongchengshi(),this.initMusic()},t.prototype.initMusic=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.music.initDragon("yy22")];case 1:return e.sent(),this.view.yybox.addChild(this.music),this.music.play("1",0),[2]}})})},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initjiqiren=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.jiqiren.initDragon("jiqiren")];case 1:return e.sent(),this.jiqiren.scaleX=this.jiqiren.scaleY=1.8,this.jiqiren.scaleX*=-1,this.jiqiren.play("1",0),this.view.jiqirenbox.addChild(this.jiqiren),[2]}})})},t.prototype.initbingdu=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.bingdu.initDragon("bingdu")];case 1:return e.sent(),this.bingdu.scaleX=this.bingdu.scaleY=1.8,this.bingdu.scaleX*=-1,this.bingdu.play("1",0),this.bingdu.alpha=0,this.view.bingdubox.addChild(this.bingdu),[2]}})})},t.prototype.initjixiebi=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.jixiebi.initDragon("jixiebi")];case 1:return e.sent(),this.jixiebi.scaleX=this.jixiebi.scaleY=1.8,this.jixiebi.scaleX*=-1,this.jixiebi.play("1",0),this.view.jixiebibox.addChild(this.jixiebi),[2]}})})},t.prototype.initgongchengshi=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.gongchengshi.initDragon("gongchengshi")];case 1:return e.sent(),this.gongchengshi.scaleX=this.gongchengshi.scaleY=.65,this.gongchengshi.scaleX*=-1,this.gongchengshi.play("1",0),this.view.gongchengshibox.addChild(this.gongchengshi),[2]}})})},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:220},2500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk1,"检测到你心率过高！",500,2e3,function(){this.role.play("3a",0),this.showTalk(this.view.talk0,"怎么办呢",500),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[127,128])},this,3e3)})},this)},t.prototype.jiqiMove=function(e){egret.Tween.get(this.view.jiqirenbox).wait(500).to({x:this.view.jiqirenbox.x+this.movespeed},250).wait(250).call(function(){return this.movetimes++,this.movetimes>=this.targettimes?(this.jiqiren.play("1",0),void(e&&e.call(this))):void this.jiqiMove(e)},this)},t.prototype.gameStep2=function(){this.movetimes=0,this.targettimes=7,this.movespeed=96,egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-1080},7e3),this.jiqiren.play("8",0),this.jiqiMove(),egret.Tween.get(this.view.rolebox).to({x:1350},7500).call(function(){this.role.play("3",0),egret.Tween.get(this.view.warn,{loop:!0}).to({alpha:1},300).to({alpha:0},300),egret.Tween.get(this.bingdu).wait(1e3).to({alpha:1},1500),this.showTalk(this.view.talk0,"出现了异形病毒怎么办？",2e3,2e3),egret.setTimeout(function(){this.role.play("3a",0),this.sendNotification(NotificationNames.SHOW_SELECT,[129,130])},this,2500)},this)},this,500)},t.prototype.gameStep3=function(){this.targettimes=8,this.movetimes=0,this.movespeed=96,this.jiqiren.play("8",0),this.jiqiMove(),egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:2150},5e3).call(function(){this.role.play("3",0)},this),egret.Tween.get(this.view.bg).to({x:-2050},5e3).call(function(){this.showTalk(this.view.talk0,"机械手臂不受控制怎么办"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[131,132,133])},this,2500)},this)},this,500)},t.prototype.eventResult=function(e){if(127==e)this.hideTalk(this.view.talk0),this.showTalk(this.view.talk1,"建议测量体温检查",0,1500,function(){this.AnimationEndByTimes(this.jiqiren,"2",1,function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:320},900).call(function(){this.role.play("92",1),this.showTalk(this.view.talk0,"奇怪，我的体温没问题啊",500,2e3),this.FailCompleted(2e3),egret.setTimeout(function(){this.jiqiren.play("9",1)},this,330)},this)})});else if(128==e)this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"93",1,function(){this.showTalk(this.view.talk0,"这下好多了",0,1500,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})})});else if(129==e){this.hideTalk(this.view.talk0),this.targettimes=5,this.movetimes=0,this.movespeed=134,egret.Tween.get(this.view.bg).to({x:-1250},1e3*this.targettimes-500),this.jiqiren.play("8",0);var t=function(){this.showTalk(this.view.talk1,"看我的消毒气泡",0,1500,function(){this.AnimationEndByTimes(this.jiqiren,"4",1,function(){var e=new SheetMovieClip(100,EffectUrl.FIRE_EFF);e.setList(1,2,"scene22_json.xh"),e.anchorOffsetX=212,e.anchorOffsetY=137,e.scaleX=e.scaleY=0,e.x=-113,e.y=-205,egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5},1200).to({x:-355,y:-390},1e3).wait(500).call(function(){e.stop(),e.reset(),e.time.delay=60,e.setList(1,14,"scene22_json."),e.start(1),egret.setTimeout(function(){this.showTalk(this.view.talk1,"这个病毒太顽强了",0,1500),this.FailCompleted()},this,1e3)},this),e.start(0),this.view.jiqirenbox.addChild(e)})})};this.jiqiMove(t)}else if(130==e){this.hideTalk(this.view.talk0),this.targettimes=5,this.movetimes=0,this.movespeed=134,egret.Tween.get(this.view.bg).to({x:-1250},1e3*this.targettimes-500),this.jiqiren.play("8",0);var t=function(){this.AnimationEndByTimes(this.jiqiren,"4",1,function(){egret.setTimeout(function(){egret.Tween.get(this.bingdu).to({alpha:0},500)},this,1e3),this.AnimationEndByTimes(this.jiqiren,"7",1,function(){this.AnimationEndByTimes(this.jiqiren,"6",1,function(){this.view.warn.visible=!1,egret.Tween.removeTweens(this.view.warn),this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})})})})};this.jiqiMove(t)}else 131==e?(this.hideTalk(this.view.talk0),this.disappear(this.view.chatou,500),this.showTalk(this.view.talk0,"这好像不是机械臂的插头",1e3,2e3,function(){this.role.play("3a",0),this.FailCompleted()})):132==e?(this.hideTalk(this.view.talk0),this.gongchengshi.play("3",0),egret.Tween.get(this.view.gongchengshibox).to({x:2550},2e3).call(function(){this.gongchengshi.play("4",0)},this).to({x:3e3,y:100},1500).call(function(){this.FailCompleted()},this)):133==e&&(this.showTalk(this.view.talk0,"肯定是你搞的鬼",0,2e3),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:2500},2e3).call(function(){this.role.play("96",0),egret.Tween.get(this.view.rolebox).to({x:this.view.rolebox.x+320},4e3),egret.Tween.get(this.view.jiqirenbox).to({x:this.view.jiqirenbox.x+320},4e3).call(function(){this.music.visible=!1,this.jixiebi.armuture.animation.stop(),this.nextStep(),this.WinCompleted()},this)},this))},t.prototype.reviveStepTwo=function(){this.view.talk0.alpha=0,this.view.rolebox.x=220,this.view.bg.x=0,this.bingdu.alpha=0,this.view.warn.alpha=0,this.role.play("3",0),this.jiqiren.play("1",0),this.view.jiqirenbox.x=506.66,egret.Tween.removeTweens(this.view.warn),this.gameStep2()},t.prototype.reviveStepThree=function(){this.view.talk0.alpha=0,this.role.play("3",0),this.gongchengshi.play("1",0),this.view.rolebox.x=1350,this.view.bg.x=-1250,this.view.jiqirenbox.x=1848.66,this.view.gongchengshibox.x=2850,this.view.gongchengshibox.y=724.89,this.view.chatou.alpha=1,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0022",t}(GameBase);__reflect(GameMediator0022.prototype,"GameMediator0022");var GameMediator0023=function(e){function t(i){var o=e.call(this,t.NAME,i)||this;return o.gongjiao3=new DragonBase,o.gongjiao1=new DragonBase,o.gongjiao2=new DragonBase,o.laoren1=new DragonBase,o.gou=new DragonBase,o}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.loadSub(23)},t.prototype.loadSubOK=function(){this.initRole("bb"),this.initgongjiao1(),this.initgongjiao2(),this.initgongjiao3()},t.prototype.initRoleComplete=function(){this.role.scaleX=this.role.scaleY=.65,this.role.play("3",0),this.startGame()},t.prototype.initgongjiao3=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.gongjiao3.initDragon("gongjiao3")];case 1:return e.sent(),this.gongjiao3.scaleX=this.gongjiao3.scaleY=.85,this.gongjiao3.play("1",0),this.view.gongjiaobox3.addChild(this.gongjiao3),[2]}})})},t.prototype.initgongjiao1=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.gongjiao1.initDragon("gongjiao1")];case 1:return e.sent(),this.gongjiao1.scaleX=this.gongjiao1.scaleY=.85,this.gongjiao1.play("1",0),this.view.gongjiaobox1.addChild(this.gongjiao1),[2]}})})},t.prototype.initgongjiao2=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.gongjiao2.initDragon("gongjiao2")];case 1:return e.sent(),this.gongjiao2.scaleX=this.gongjiao2.scaleY=.85,this.gongjiao2.play("1",0),this.view.gongjiaobox2.addChild(this.gongjiao2),[2]}})})},t.prototype.initlaoren1=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.laoren1.initDragon("laoren1")];case 1:return e.sent(),this.laoren1.scaleX=this.laoren1.scaleY=1.5,this.laoren1.scaleX*=-1,this.laoren1.play("1",0),this.view.laorenbox1.addChild(this.laoren1),[2]}})})},t.prototype.initgou=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.gou.initDragon("gou1")];case 1:return e.sent(),this.gou.scaleX=this.gou.scaleY=1,this.gou.scaleX*=-1,this.gou.play("2",0),this.view.goubox.addChild(this.gou),this.gou.visible=!1,[2]}})})},t.prototype.startGame=function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:200},2500).call(function(){this.role.play("3",0),this.showTalk(this.view.talk0,"这个路人外放太没素质了，怎么办呢？"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[120,121])},this,3e3)},this)},t.prototype.gameStep2=function(){this.role.play("2",0),egret.Tween.get(this.view.bg).to({x:-780},5500),egret.Tween.get(this.view.rolebox).to({x:1e3},6e3).call(function(){this.role.play("3b",0),this.showTalk(this.view.talk0,"好温暖的阳光啊，有点想睡觉了但又怕坐过站",600),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[122,123])},this,2500)},this)},t.prototype.gameStep3=function(){egret.setTimeout(function(){this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1600},5e3).call(function(){this.role.play("3",0)},this),egret.Tween.get(this.view.bg).to({x:-1400},5e3).call(function(){this.showTalk(this.view.talk0,"这是谁的风筝挂在树上了，想个办法拿下去来"),egret.setTimeout(function(){this.sendNotification(NotificationNames.SHOW_SELECT,[124,125,126])},this,2e3)},this)},this,500)},t.prototype.eventResult=function(e){120==e?this.showTalk(this.view.talk0,"我丢！",0,1500,function(){this.AnimationEndByTimes(this.role,"97",1,function(){this.showTalk(this.view.talk0,"没丢到...",0,1500),this.FailCompleted()})}):121==e?this.AnimationEndByTimes(this.gongjiao3,"2",1,function(){this.gongjiao3.play("3",0),this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep2()})}):122==e?this.showTalk(this.view.talk0,"尝试一下头悬梁吧",0,1500,function(){this.AnimationEndByTimes(this.role,"99",1,function(){this.showTalk(this.view.talk0,"头发绑不住",0,1500),this.FailCompleted()})}):123==e?this.AnimationEndByTimes(this.role,"100",1,function(){this.showTalk(this.view.talk0,"没有太阳清醒多了",0,1500,function(){this.nextStep(),this.AnimationEndByTimes(this.role,"1",1,function(){this.role.play("3",0),this.gameStep3()})})}):124==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1550},500).call(function(){this.role.play("1",0),this.AnimationEndByTimes(this.role,"23",1,function(){this.role.play("3",0),this.nextStep(),this.WinCompleted()}),egret.setTimeout(function(){egret.Tween.get(this.view.fengzheng).to({x:1684,y:926},300)},this,900)},this)):125==e?(this.hideTalk(this.view.talk0),this.role.play("2",0),egret.Tween.get(this.view.rolebox).to({x:1560},700).call(function(){this.role.play("1",0),egret.Tween.get(this.view.rolebox).to({x:1650,y:966},340).to({x:1600,y:1010},400),this.AnimationEndByTimes(this.role,"24",1,function(){this.FailCompleted(),this.AnimationEndByTimes(this.role,"24a",1,function(){})})},this)):126==e&&(this.hideTalk(this.view.talk0),this.AnimationEndByTimes(this.role,"25",1,function(){this.role.play("1",0),egret.setTimeout(function(){this.role.play("1a",0),this.showTalk(this.view.talk0,"扇的风力太小了",500,1500),this.FailCompleted(2e3)},this,1e3)},this))},t.prototype.reviveStepTwo=function(){this.view.talk0.alpha=0,this.view.rolebox.x=350,this.view.bg.x=0,this.role.play("1",0),this.gou.visible=!1,this.view.goubox.x=1452,egret.setTimeout(function(){this.gameStep2()},this,500)},t.prototype.reviveStepThree=function(){this.view.talk0.alpha=0,this.role.play("1",0),this.view.rolebox.x=800,this.view.rolebox.y=1010,this.view.bg.x=-580,this.gameStep3()},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.clearSheetClip(),egret.Tween.removeAllTweens(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="GameMediator0023",t}(GameBase);__reflect(GameMediator0023.prototype,"GameMediator0023");var PvpLobby=function(e){function t(){return e.call(this,"PvpLobbySkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(PvpLobby.prototype,"PvpLobby");var PvpLobbyMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.close_btn,this.closeMyself,this),ClickBase.getInstance().on(this.view.createroom,this.onCreateRoom,this),ClickBase.getInstance().on(this.view.joinroom,this.onJoinRoom,this),ClickBase.getInstance().on(this.view.match,this.onMatch,this)},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.closeMyself=function(){PopUpManager.hide(this.view)},t.prototype.onCreateRoom=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,txSocket.getInstance().createRoom()];case 1:return e=t.sent(),1==e?(this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_PVPROOM}),PopUpManager.hide(this.view)):console.log("房间创建失败:",e),[2]}})})},t.prototype.onJoinRoom=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,txSocket.getInstance().joinRoomForId(this.view.roomnum.text)];case 1:return e=t.sent(),1==e?(this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_PVPROOM}),PopUpManager.hide(this.view)):console.log("加入房间失败:",e),[2]}})})},t.prototype.onMatch=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,txSocket.getInstance().matchRoom()];case 1:return e=t.sent(),1==e?(this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_PVPROOM}),PopUpManager.hide(this.view)):console.log("匹配失败"),[2]}})})},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="PvpLobbyMediator",t}(BaseMediator);__reflect(PvpLobbyMediator.prototype,"PvpLobbyMediator");var PvpPop=function(e){function t(){return e.call(this,"PvpPopSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(PvpPop.prototype,"PvpPop");var PvpPopMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.yes,this.onYes,this),ClickBase.getInstance().on(this.view.no,this.onNo,this)},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.onYes=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,txSocket.getInstance().backCurRoom()];case 1:return e=t.sent(),1==e?(this.sendNotification(NotificationNames.OPEN_WINDOW,{name:WindowName.OPEN_PVPROOM}),PopUpManager.hide(this.view)):console.log("回到房间失败:",e),[2]}})})},t.prototype.onNo=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,txSocket.getInstance().quitCurRoom()];case 1:return e=t.sent(),1==e?PopUpManager.hide(this.view):console.log("退出房间失败:",e),[2]}})})},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.yes),ClickBase.getInstance().off(this.view.no),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="PvpPopMediator",t}(BaseMediator);__reflect(PvpPopMediator.prototype,"PvpPopMediator");var PvpRoom=function(e){function t(){return e.call(this,"PvpRoomSkin")||this}return __extends(t,e),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BaseView);__reflect(PvpRoom.prototype,"PvpRoom");var PvpRoomMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),ClickBase.getInstance().on(this.view.close_btn,this.closeMyself,this)},t.prototype.handleNotification=function(e){e.getBody();e.getName()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.closeMyself=function(){PopUpManager.hide(this.view)},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),ClickBase.getInstance().off(this.view.close_btn),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="PvpRoomMediator",t}(BaseMediator);__reflect(PvpRoomMediator.prototype,"PvpRoomMediator");var ItemSignNormal=function(e){function t(){var t=e.call(this)||this;return t._day=1,t.skinName="ItemSignNormalSkin",t}return __extends(t,e),t.prototype.setRewardUrl=function(e){this.imgIcon.source=e},t.prototype.setSelected=function(e){e?(this.labelDay.textColor=this.labelCount.strokeColor=13792326,this.imgBg.source="windowUI_json.BY_qd_10"):(this.labelDay.textColor=this.labelCount.strokeColor=0,this.imgBg.source="windowUI_json.BY_qd_09")},t.prototype.setRecvMarkState=function(e){this.imgRecvMark.visible=e},t.prototype.setRewardCount=function(e){this.labelCount.text=e+""},t.prototype.setRewardIcon=function(e){0==e?this.imgIcon.source="mainUI_json.BY_JSL_07":1==e&&(this.imgIcon.source="mainUI_json.tili")},Object.defineProperty(t.prototype,"signday",{get:function(){return this._day},set:function(e){this._day=e,this.labelDay.text="第"+e+"天"},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(eui.Component);__reflect(ItemSignNormal.prototype,"ItemSignNormal"),window.ItemSignNormal=ItemSignNormal;var ItemSignSpecial=function(e){function t(){var t=e.call(this)||this;return t._day=1,t.skinName="ItemSignSpecialSkin",t}return __extends(t,e),t.prototype.setRewardUrl=function(e){this.imgIcon.source=e},t.prototype.setSelected=function(e){e?(this.labelDay.textColor=this.labelCount.strokeColor=13792326,this.imgBg.source="windowUI_json.BY_qd_07"):(this.labelDay.textColor=this.labelCount.strokeColor=0,this.imgBg.source="windowUI_json.BY_qd_08")},t.prototype.setRecvMarkState=function(e){this.imgRecvMark.visible=e},t.prototype.setRewardCount=function(e){this.labelCount.text=e+""},t.prototype.setRewardIcon=function(e){0==e?this.imgIcon.source="mainUI_json.BY_JSL_07":1==e&&(this.imgIcon.source="mainUI_json.tili")},Object.defineProperty(t.prototype,"signday",{get:function(){return this._day},set:function(e){this._day=e,this.labelDay.text="第"+e+"天"},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(eui.Component);__reflect(ItemSignSpecial.prototype,"ItemSignSpecial"),window.ItemSignSpecial=ItemSignSpecial;var SignView=function(e){function t(){var t=e.call(this,"SignSkin")||this;t.itemSigns=[],t.isSolo=!0;for(var i=0;7>i;i++)t.itemSigns.push(t["itemSign"+(i+1)]);return t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.initView=function(e){for(var t=0,i=this.itemSigns.length;i>t;t++)this.itemSigns[t].setSelected(e.cnt==t),this.itemSigns[t].setRecvMarkState(e.cnt>t),this.itemSigns[t].setRewardCount(GameDefine.SIGN_REWARD_COUNTS[t]),this.itemSigns[t].setRewardIcon(GameDefine.SIGN_REWARD_TYPE[t])},t.prototype.onClose=function(){PopUpManager.hide(this)},t.prototype.dispose=function(){DisplayUtil.removeAll(this)},t}(BasePopupWindow);__reflect(SignView.prototype,"SignView");var SignViewMediator=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),t.prototype.onRegister=function(){e.prototype.onRegister.call(this),this.init(),this.addEvent(),ToolUtil.setShareOrVideoIcon(this.view.sign)},t.prototype.init=function(){var e=this.user.signWeek;this.view.initView(e),this.game.createBanner({width:.8})},t.prototype.addEvent=function(){ClickBase.getInstance().on(this.view.groupDoubleRecv,this.handleBtnDoubleRecvClick,this),ClickBase.getInstance().on(this.view.groupRecv,this.handleBtnRecvClick,this)},t.prototype.handleBtnDoubleRecvClick=function(){NativeManager.playVideo(this,this.successHandler,null)},t.prototype.playVideoCallback=function(){this.getReward(!0),this.closeView()},t.prototype.handleBtnRecvClick=function(){this.getReward(),this.closeView()},t.prototype.getReward=function(e){void 0===e&&(e=!1);var t=this.user.signWeek,i={};0==GameDefine.SIGN_REWARD_TYPE[t.cnt]?(this.user.gold+=GameDefine.SIGN_REWARD_COUNTS[t.cnt]*(e?2:1),i.type=ITEM_REWARD_TYPE.COIN):1==GameDefine.SIGN_REWARD_TYPE[t.cnt]&&(this.user.energy+=GameDefine.SIGN_REWARD_COUNTS[t.cnt]*(e?2:1),i.type=ITEM_REWARD_TYPE.ENERGY),i.value=GameDefine.SIGN_REWARD_COUNTS[t.cnt]*(e?2:1),e?i.beginPos=this.view.localToGlobal(this.view.groupRecv.x,this.view.groupRecv.y):i.beginPos=this.view.localToGlobal(this.view.groupDoubleRecv.x,this.view.groupDoubleRecv.y),this.sendNotification(NotificationNames.SHOW_FLY_EFF,i),this.user.updateSevenSign(this.user.serverTime,t.cnt+1),PopUpManager.toast("领取成功")},t.prototype.successHandler=function(){this.playVideoCallback()},t.prototype.closeView=function(){PopUpManager.hide(this.view)},t.prototype.removeEvent=function(){ClickBase.getInstance().off(this.view.groupDoubleRecv),ClickBase.getInstance().off(this.view.groupRecv)},t.prototype.listNotificationInterests=function(){return[NotificationNames.UPDATEICON]},t.prototype.handleNotification=function(e){e.getBody();switch(e.getName()){case NotificationNames.UPDATEICON:ToolUtil.setShareOrVideoIcon(this.view.sign)}},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.removeEvent(),this.view.dispose()},Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.NAME="SignViewMediator",t}(BaseMediator);__reflect(SignViewMediator.prototype,"SignViewMediator",["IVideo"]);var ShareCallBack=function(){function e(){this.time=0,this.again=!1,this.is_survive=!1}return e.prototype.callBack=function(){this.success&&this.success.apply(this.success_parent),this.info&&this.info.callBack&&this.info.callBack.apply(this.success_parent)},e.prototype.shareWithoutBack=function(){ToolUtil.shareAppWithoutBack({title:this.info.title,imageUrl:this.info.imageUrl,query:this.info.query,success:function(e){}})},e}();__reflect(ShareCallBack.prototype,"ShareCallBack");var WindowVO=function(){function e(){}return e}();__reflect(WindowVO.prototype,"WindowVO");